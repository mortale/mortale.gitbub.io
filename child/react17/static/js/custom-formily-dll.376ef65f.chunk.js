(this["webpackJsonpchild-react17"]=this["webpackJsonpchild-react17"]||[]).push([[454],{27727:function(e,n,t){"use strict";t(21914);var i=t(24838),r=t(27225),o=t(93479),l=t(56552),a=(0,o.cA)({components:{FormItem:i.xJ,Input:i.II,Select:i.Ph,DatePicker:i.Mt,NumberPicker:i.Ye}}),d=(0,r.Np)();n.Z=function(e){var n=e.schema;return(0,l.jsx)(o.RV,{form:d,children:(0,l.jsx)(a,{schema:n})})}},10617:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var i=t(45987),r=t(97326),o=t(60136),l=t(98557),a=t(43144),d=t(15671),s=t(29439),c=["type","description","title","statusInfo","valueRule"],u={TEXT:{type:"string","x-decorator":"FormItem","x-component":"Input"},TEXTAREA:{type:"string","x-decorator":"FormItem","x-component":"Input.TextArea"},DATE:{type:"string","x-decorator":"FormItem","x-component":"DatePicker"},NUMBER:{type:"string","x-decorator":"FormItem","x-component":"NumberPicker"},SELECT:{type:"string","x-decorator":"FormItem","x-component":"Select"}},f={DATE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1980-01-01",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"9999-01-01",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u8bf7\u5927\u4e8e\u6700\u5c0f\u503c",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\u8bf7\u5c0f\u4e8e\u6700\u5927\u503c";return function(r){return r?+new Date(r)>=+new Date(n)?i:+new Date(r)<=+new Date(e)?t:void 0:""}}},v=(0,a.Z)((function e(){(0,d.Z)(this,e)}));v.initData=function(e){var n=e.type,t=e.description,r=e.title,o=e.statusInfo,l=e.valueRule,a=(0,i.Z)(e,c);if(!u[n])throw new Error("".concat(n," \u7c7b\u578b\u4e0d\u5b58\u5728"));var d=function(e){switch(e.statusType){case"EDITABLE":return{editable:!0};case"READONLY":return{editable:!1};case"HIDDEN":return{visible:!1}}}(o),v=function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,t=["DATE"].includes(n);return Object.entries(e).reduce((function(i,r){var o=(0,s.Z)(r,2),l=o[0],a=o[1];return["minLength","maxLength","minimum","maximum"].includes(l)?i[l]=Number(a):"required"===l&&a?i["x-validator"].push({required:a,message:e.requiredErrorMsg}):"range"===l&&a&&t&&i["x-validator"].push(f[n](e.minDate,e.maxDate)),i}),{"x-validator":[]})}(l,{type:n});return Object.assign({title:r,description:t},u[n],{status:d},v,{"x-component-props":a})};var p=function(e){(0,o.Z)(t,e);var n=(0,l.Z)(t);function t(e){var i;(0,d.Z)(this,t),i=n.call(this);var o=t.initData(e);return Object.assign((0,r.Z)(i),o),i}return(0,a.Z)(t)}(v),m=["id"],g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},t=e.reduce((function(e,t){try{var r=t.id,o=(0,i.Z)(t,m),l=new p(o);l=n(l),e[r]=l}catch(a){console.error(a)}return e}),{});return{type:"object",properties:t}}},11322:function(e,n,t){"use strict";t.d(n,{nc:function(){return Ee},RO:function(){return Zt},_W:function(){return mt},uM:function(){return kn}});var i,r=t(1413),o=t(45987),l=t(4942),a=t(29439),d=t(21914),s=t(6670),c=t(14507),u=t.n(c),f="BASE",v="CHANGE_FORMVO",p="INIT_FORMDESIGN",m="PLACE_FIELD",g="DELETE_FIELD",h="BATCH_DELETE_FIELD",y="MOVE_FIELD",F="SELECT_FIELD",x="COPY_FIELD",I="CHANGE_FIELD",Z="CLEAR_FORMDESIGN",b=t(8452),C=t(76172),D=t(93433),P=t(15671),j=t(43144),S=t(27225),w=t(93479),E=t(34792),O=["items"],M=["fieldFunctionContorl","templates","extendMaskLayers"],k=["mounted","unMounted"],A=["templates","splitDownKeys","dndMaskLayerTemplates"],N=["parId","splitDownKeys"],T=function(e){return void 0===e||null===e||"object"!==typeof e?e:JSON.parse(JSON.stringify(e))},V=function(e){return"[object Object]"===Object.prototype.toString.call(e)},L=function(e,n){if(!e)return[];for(var t=[e],i=n[t[t.length-1]];i.parId;)t.push(i.parId),i=n[t[t.length-1]];return t},R=function(e){var n={};if(!e||!V(e))return null;var t=this.fieldInfoTemplate[e.type];t||console.error("".concat(e.type," template is not found"));var i=Array.from((null===t||void 0===t?void 0:t.splitDownKeys)||[]);for(var r in e)if(!N.includes(r)&&Object.prototype.hasOwnProperty.call(e,r)){var o=""===e[r]?null:T(e[r]),l=r.replace(/(\"|\')/g,"").split(">"),a=l.pop();if(l.length>=1){if(l.every((function(e){return i.includes(e)})))l.reduce((function(e,n){return e[n]||(e[n]={}),e[n]}),n)[a]=o}else n[r]=o}return n},W=function(e,n){var t={};if(!e||!V(e))return null;void 0!==n&&(t.parId=n);var i=this.fieldInfoTemplate[e.type];i||console.error("".concat(e.type," template is not found"));var r=Array.from((null===i||void 0===i?void 0:i.splitDownKeys)||[]);return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var l=i?i+">"+o:o,a=n[o];r.includes(o)&&V(a)?e(a,l):t[l]=T(a)}}(e),t},B=function(e,n){var t,i=this.fieldFunctionContorl,o=this.transformField,l=this.fieldKey,a={},d={};return t=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n||void 0===n?void 0:n.map((function(n){var s=""+n[l],c=(null===i||void 0===i?void 0:i(n))||{},u=c.canDrag,f=c.canDel,v=c.canCopy,p=c.visible,m={id:s,canDrag:null===u||void 0===u||u,canDel:null===f||void 0===f||f,canCopy:null===v||void 0===v||v,visible:null===p||void 0===p||p};return d[s]=m.visible?o(n,t):(0,r.Z)((0,r.Z)({},n),{},{parId:t}),n.items&&(a[s]=e(n.items||[],s)),m}))}(e),{outerFieldPostions:t,nestedFieldPostions:a,fieldsMap:d}},_=function e(n){return(n=Array.isArray(n)?n:[n]).reduce((function(n,t){if("Identifier"===t.type)n.push(t.value);else if("DestructorExpression"===t.type){var i;"ArrayPattern"===(null===(i=t.value)||void 0===i?void 0:i.type)?n.push.apply(n,(0,D.Z)(e(t.value.elements))):(console.warn("parserType",t.type),console.warn("afterType",t.value.type))}else console.warn("otherType",t.type);return n}),[])},q=function(e){var n={},t={};return e&&e.forEach((function(e){var i=function(i){if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];if(o){n[i]=(0,r.Z)({splitDownKeys:new Set},o.initialValue||{}),t[i]=o;var l=K(o,(function(e,t){var r=new E._(e).parse(),o=void 0!==t.initialValue&&null!==t.initialValue;_(r).forEach((function(e,r){var l=e.replace(/(\"|\')/g,"").split(">");l.length>1&&(l.pop(),l.forEach((function(e){return n[i].splitDownKeys.add(e)}))),!o||t.type&&!["void","array","object"].includes(t.type)||(Array.isArray(t.initialValue)?n[i][e]=t.initialValue[r]:n[i][e]=t.initialValue)})),delete t.initialValue}));t[i]=l.toJSON()}}};for(var o in e)i(o)})),{fieldInfoTemplate:n,fieldSetterTemplate:t}},Y=function(e,n){var t=this,i=(n.data||{}).contorlTrigger;return i&&(i=Array.isArray(i)?i:[i]).forEach((function(i){var r=e[i];e[i]=function(){for(var e,o,l=arguments.length,a=new Array(l),d=0;d<l;d++)a[d]=arguments[d];Promise.resolve(null===(e=null===(o=t["".concat(i,"ValidateInSetter")])||void 0===o?void 0:o.call(t,n.props.name,a[0],t.recoverField(n.form.values)))||void 0===e||e).then((function(e){e&&r.apply(void 0,a)}))}})),(0,r.Z)({},e)},K=function(e,n){return function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new S.Dm(""),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.mapProperties((function(t,o,l){var a=i.concat(o);if(void 0===o||null===o)e(t,i);else{var d=null===n||void 0===n?void 0:n(o,t,i,r);t.type&&["object","void"].includes(t.type)&&e(t,a,d)}}))}(e=new w.V_(Object.assign({type:"object"},e))),e},H=function(e,n,t){var i=t.createSchemaFieldParams;n=new w.V_(n);var r=(0,S.Np)({initialValues:e,validateFirst:!0});return K(n,(function(e,n,t){var o,l=n.toFieldProps(i),a=Object.assign({},l,{name:e,basePath:t});(o="object"===n.type?r.createObjectField(a):"array"===n.type?r.createArrayField(a):"void"===n.type?r.createVoidField(a):r.createField(a))&&"none"===o.display&&(r.deleteValuesIn(e),o.destroy())})),r.onMount(),r.submit().finally((function(){r.onUnmount()}))},$=function(e,n){var t=e.outerFieldPostions,i=e.nestedFieldPostions,r=e.fieldsMap;return function e(t){return t.reduce((function(t,o){var l=o.id,a=o.visible,d=r[l];return a&&(d=n(d),i[l]&&(d.items=e(i[l])),t.push(d)),t}),[])}(t)},z=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.fieldsMap,r=e.outerFieldPostions,o=e.nestedContainerFieldPostions,d=n.fieldSetterTemplate,s=Object.entries(i).reduce((function(e,t){var i=(0,a.Z)(t,2),l=i[0],s=i[1];if(!s)return e;var c,u=null===s||void 0===s?void 0:s.parId,f=(u?o[u]:r).filter((function(e){return e.id===l}))[0].visible,v=null!==(c=d[s.type])&&void 0!==c?c:null;return f?v?e.push(H(s,v,n).then((function(e){return[l,e]}),(function(e){throw[l,e]}))):e.push(Promise.reject([l,[{code:"schemaError",messages:s.type?"".concat(l,"\u5b57\u6bb5\u7c7b\u578b\u4e3a\u4e0d\u5b58\u5728"):"".concat(l,"\u7684\u7c7b\u578b\u4e3a").concat(s.type,"\u7684schema\u7f3a\u5931")}]])):e.push([l,s]),e}),[]);return Promise.allSettled(s).then((function(e){var n=e.reduce((function(e,n){var t=n.status,i=n.value,r=n.reason;return"rejected"===t?e.error.push((0,l.Z)({},r[0],r[1])):e.success[i[0]]=i[1],e}),{error:[],success:{}});if(n.error.length)throw n.error;if(t)return n.success}))},G=function e(n,t){var i=t.fieldInfoTemplate,a=t.fieldKey,d=[];return[(Array.isArray(n)?n:[n]).map((function(n){var t,s,c=n.items,u=(0,o.Z)(n,O),f=null!==(t=n[a])&&void 0!==t?t:Math.random().toString(36).slice(-8)+ +new Date,v=(i[u.type]||{}).title,p=(0,r.Z)((0,r.Z)({},u),{},(s={id:f},(0,l.Z)(s,a,f),(0,l.Z)(s,"title",v),s));return c&&Array.isArray(c)&&(p.items=e(c,i)),d.push(f),p})),d]},J=function(){function e(){(0,P.Z)(this,e)}return(0,j.Z)(e,null,[{key:"initSupInfo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.fieldFunctionContorl,i=n.templates,l=n.extendMaskLayers,a=(0,o.Z)(n,M),d=q(i);this[e]=(0,r.Z)((0,r.Z)((0,r.Z)({mounted:!0,fieldFunctionContorl:t,templates:i,extendMaskLayers:l},a),d),{},{dndMaskLayerTemplates:(0,C.LO)(l||{})}),Object.assign(this[e],{transformField:W.bind(this[e]),recoverField:R.bind(this[e]),transformFormVo:B.bind(this[e]),dealWithCustomData:Y.bind(this[e])})}},{key:"changeSupInfo",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this[n]){var i=this[n],r=(i.mounted,i.unMounted,(0,o.Z)(i,k)),l=e.diffChange(r,t);Object.assign(this[n],l)}}},{key:"deleteSupInfo",value:function(e){this[e]&&Object.assign(this[e],{unMounted:!0})}},{key:"diffChange",value:function(e,n){var t=n.templates,i=(n.splitDownKeys,n.dndMaskLayerTemplates,(0,o.Z)(n,A));return t&&e.templates!==t&&Object.assign(i,q(t)),i}}]),e}();!function(e){e.add="add",e.move="move",e.delete="delete",e.copy="copy",e.select="select"}(i||(i={}));var U,X,Q=["type","formDesignId"],ee=["fieldsMap"],ne=function(e,n){e[n]=void 0},te={formDesignId:"",outerFieldPostions:[],nestedFieldPostions:{},fieldsMap:{},selectedFieldId:null},ie=function(e,n,t){var i,r=e.innerField,o=e.placeLayerInfo,l=(e.dragFieldInfo,o.contentFieldId),a=o.dropIndex,d=l?n.nestedFieldPostions[l]||(n.nestedFieldPostions[l]=[],n.nestedFieldPostions[l]):n.outerFieldPostions,s=a||(0,b.findLastIndex)(d,(function(e){return e.visible}))+1,c=null===(i=t.transformFormVo)||void 0===i?void 0:i.call(t,r);d.splice.apply(d,[s,0].concat((0,D.Z)(c.outerFieldPostions))),l?n.nestedFieldPostions[l]=(0,D.Z)(d):n.outerFieldPostions=(0,D.Z)(d),Object.assign(n.fieldsMap,c.fieldsMap),Object.assign(n.nestedFieldPostions,c.nestedFieldPostions)},re=function(e,n,t){var i,r=e.contentFieldId,o=e.copyField,l=e.innerIndex,a=null===(i=t.transformFormVo)||void 0===i?void 0:i.call(t,o),d=r?n.nestedFieldPostions[r]:n.outerFieldPostions;d.splice.apply(d,[l+1,0].concat((0,D.Z)(a.outerFieldPostions))),r?n.nestedFieldPostions[r]=(0,D.Z)(d):n.outerFieldPostions=(0,D.Z)(d),Object.assign(n.nestedFieldPostions,a.nestedFieldPostions),Object.assign(n.fieldsMap,a.fieldsMap)},oe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:""},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=n.id,o=t.index,l=[],a=e.filter((function(e){return e.id===r}))[0];e.length&&-1!==i||l.push(a);var d=e.reduce((function(e,n,t){return t!==o&&e.push(n),t===i&&a&&e.push(a),e}),l);if(a&&void 0===i){var s=(0,b.findLastIndex)(d,(function(e){return e.visible}))+1;d.splice(s,0,a)}return d},le=function(e,n){var t=e.placeLayerInfo,i=e.dragFieldInfo,r=n.nestedContainerFieldPostions,o=n.outerFieldPostions,l=i.id,a=i.contentFieldId,d=i.dragIndex,s=t.contentFieldId,c=t.dropIndex,u=s?r[s]:o,f=a?r[a]:o,v=[];switch((v=u===f?[u=oe(u,{index:c,id:l},{index:d})]:[u=oe(u,{index:c||u.length-1,id:l}),f=oe(f,void 0,{index:d})]).length){case 1:return s?r[s]=v[0]:o=v[0],{nestedContainerFieldPostions:r,outerFieldPostions:o};case 2:return s?r[s]=v[0]:o=v[0],a?r[a]=v[1]:o=v[1],{nestedContainerFieldPostions:r,outerFieldPostions:o};default:return null}},ae=function(e,n){var t=e.fieldId,i=e.contentFieldId,r=(i?n.nestedFieldPostions[i]:n.outerFieldPostions).filter((function(e){return e.id!==t}));i?n.nestedFieldPostions[i]=(0,D.Z)(r):n.outerFieldPostions=(0,D.Z)(r),n.nestedFieldPostions[t]&&ne(n.nestedFieldPostions,t);var o=L(n.selectedFieldId,n.fieldsMap),l=o.indexOf(t);l>=0&&(n.selectedFieldId=o[l+1]||null),ne(n.fieldsMap,t)},de=function(e,n){var t=e.fieldId,i=n.nestedFieldPostions,r=n.fieldsMap,o=n.outerFieldPostions,l=n.selectedFieldId,a=L(n.selectedFieldId,n.fieldsMap),d=-1;return Array.isArray(t)&&(t.forEach((function(e){var n=r[e];if(n){n.parId?(i[n.parId]=i[n.parId].filter((function(n){return n.id!==e})),i[e]&&ne(i,e)):o=o.filter((function(n){return n.id!==e})),ne(r,e);var t=a.indexOf(e);d=Math.max(t,d)}})),d>=0&&(l=a[d+1]||null)),{nestedFieldPostions:i,outerFieldPostions:o,fieldsMap:r,selectedFieldId:l}},se=function(e,n,t){var i=e.fieldId,o=e.newFieldInfo,l=void 0===o?{}:o,a=e.cover;i=i||n.selectedFieldId;var d=n.fieldsMap[i];n.fieldsMap[i]=a?(0,r.Z)((0,r.Z)({},l),{},{parId:d.parId}):Object.assign({parId:d.parId},d,(0,b.cloneDeep)(l))},ce=function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=void 0)},ue=function(){var e,n,t,l,a,d,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.cloneDeep)(te),c=arguments.length>1?arguments[1]:void 0,u=c.type,f=c.formDesignId,C=(0,o.Z)(c,Q),D=J[s.formDesignId]||{};switch(u){case p:return(0,r.Z)((0,r.Z)({},s),{},{formDesignId:f});case v:var P=(null===(e=D.transformFormVo)||void 0===e?void 0:e.call(D,C.formVo||[]))||{},j=P.fieldsMap,S=(0,o.Z)(P,ee);return ce(s.fieldsMap),Object.assign(s.fieldsMap,j||{}),(0,r.Z)((0,r.Z)({},s),S);case m:return ie(C,s,D),null===(n=D.onFormVoChange)||void 0===n||n.call(D,i.add,C.innerField),(0,r.Z)({},s);case x:return re(C,s,D),null===(t=D.onFormVoChange)||void 0===t||t.call(D,i.copy,C.copyField),(0,r.Z)({},s);case y:var w=le(C,s);if(w){var E,O=C.placeLayerInfo,M=C.dragFieldInfo,k=s.fieldsMap[M.id];return k.parId=O.contentFieldId,null===(E=D.onFormVoChange)||void 0===E||E.call(D,i.move,k),(0,r.Z)((0,r.Z)({},s),w)}return s;case g:return ae(C,s),null===(l=D.onFormVoChange)||void 0===l||l.call(D,i.delete,C.fieldId),(0,r.Z)({},s);case h:var A=de(C,s);return null===(a=D.onFormVoChange)||void 0===a||a.call(D,i.delete,C.deleteIds),(0,r.Z)((0,r.Z)({},s),A);case F:return null===(d=D.onFormVoChange)||void 0===d||d.call(D,i.select,C.selectId),(0,r.Z)((0,r.Z)({},s),{},{selectedFieldId:C.selectId});case I:return se(C,s),(0,r.Z)({},s);case Z:return(0,b.cloneDeep)(te);default:return s}},fe=t(56552),ve=["formDesignPerfixCls"],pe=["formVo","templates","fieldFunctionContorl","formDesignId","customFieldAttrWithSetting","customFieldsRules","manualContorlSchema","onFormVoChange","onFieldChange","onChangeValidateInSetter","extendMaskLayers","fieldKey","coustomPerview"],me=["formDesignState","formDesignDataDiepatch","placeFieldValidate","createInnerFieldInfo","moveFieldValidate","deleteFieldValidate","copyFieldValidate","createCopyFieldInfo","formDesignId"],ge=["type"],he=["type"],ye=["splitDownKeys"],Fe=["type"],xe=["type"],Ie={formDesignPerfixCls:"mortale-form-design",formDesignId:""},Ze=d.createContext(Ie),be=d.createContext(te),Ce=d.createContext({placeField:function(){return Promise.resolve([])},moveField:function(){},deleteField:function(){return Promise.resolve(!0)},copyField:function(){return Promise.resolve([])},selectField:function(){}}),De=(U=[function(e){return d.forwardRef((function(n,t){var i=n.formDesignPerfixCls,l=(0,o.Z)(n,ve),a=d.useMemo((function(){var e=(0,r.Z)({},Ie);return i&&(e.formDesignPerfixCls=i),e.formDesignId=(0,b.uniqueId)("".concat(e.formDesignPerfixCls,"-")),e}),[i]);return(0,fe.jsx)(Ze.Provider,{value:a,children:(0,fe.jsx)(e,(0,r.Z)((0,r.Z)((0,r.Z)({},l),a),{},{ref:t}))})}))},function(e){return d.forwardRef((function(n,t){var i=n.formVo,l=n.templates,s=n.fieldFunctionContorl,c=n.formDesignId,u=n.customFieldAttrWithSetting,f=n.customFieldsRules,m=n.manualContorlSchema,g=n.onFormVoChange,h=n.onFieldChange,y=n.onChangeValidateInSetter,F=n.extendMaskLayers,x=n.fieldKey,D=void 0===x?"id":x,P=n.coustomPerview,j=(0,o.Z)(n,pe),S=d.useReducer(ue,(0,b.cloneDeep)(te)),w=(0,a.Z)(S,2),E=w[0],O=w[1];d.useEffect((function(){J.changeSupInfo(c,{fieldFunctionContorl:s,customFieldAttrWithSetting:u,customFieldsRules:f,templates:l,manualContorlSchema:m,onFormVoChange:g,onFieldChange:h,CoustomPerView:P})}),[l,s,u,f,m,g,h,P]),d.useEffect((function(){return Promise.resolve(J.initSupInfo(c,{fieldFunctionContorl:s,customFieldAttrWithSetting:u,templates:l,customFieldsRules:f,validateWithScrollSign:C.LO.ref(""),manualContorlSchema:m,onFormVoChange:g,onFieldChange:h,onChangeValidateInSetter:y,fieldKey:D,CoustomPerView:P,extendMaskLayers:F})).then((function(){O({type:p,formDesignId:c})})).finally((function(){null!==i&&void 0!==i&&i.length&&O({type:v,formVo:i})})),function(){Promise.resolve(J.deleteSupInfo(c)).then((function(){O({type:Z})})).finally((function(){}))}}),[]),d.useEffect((function(){var e=J[c];e&&O({type:v,formVo:i}),E.selectedFieldId&&(null!==e&&void 0!==e&&e.resetSetterPaneValue&&(e.resetSetterPaneValue.value=e.resetSetterPaneValue.value+1),null!==e&&void 0!==e&&e.resetSetterPaneSchema&&(e.resetSetterPaneSchema.value=e.resetSetterPaneSchema.value+1))}),[i]);var M=d.useCallback((function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O({type:I,fieldId:e,newFieldInfo:n,cover:t})}),[]),k=d.useMemo((function(){return(0,r.Z)((0,r.Z)({},E),{},{changeField:M})}),[E,M]);return(0,fe.jsx)(be.Provider,{value:k,children:(0,fe.jsx)(e,(0,r.Z)((0,r.Z)({},j),{},{formDesignDataDiepatch:O,formDesignState:E,formDesignId:c,ref:t}))})}))},function(e){return d.forwardRef((function(n,t){var i=n.formDesignState,l=n.formDesignDataDiepatch,s=n.placeFieldValidate,c=n.createInnerFieldInfo,u=n.moveFieldValidate,f=n.deleteFieldValidate,v=n.copyFieldValidate,p=n.createCopyFieldInfo,I=n.formDesignId,Z=(0,o.Z)(n,me),C=d.useCallback((function(e,n,t,o){var l,a,d,s=J[I],c=null===(l=s.recoverField)||void 0===l?void 0:l.call(s,i.fieldsMap[t.id]),u=null===(a=s.recoverField)||void 0===a?void 0:a.call(s,i.fieldsMap[n.id]);return Promise.resolve(e||null===(d=null===o||void 0===o?void 0:o((0,r.Z)((0,r.Z)({},c),t),(0,r.Z)((0,r.Z)({},u),n)))||void 0===d||d).then((function(e){return{validateResult:e,operationField:c,contentField:u}}))}),[]),D=d.useCallback((function(e,n){e.type;var t=(0,o.Z)(e,ge),i=(n.type,(0,o.Z)(n,he)),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=J[I];return Promise.resolve(C(r,t,i,s)).then((function(e){var n=e.validateResult,r=(e.operationField,e.contentField);if(n){var s=(0,b.cloneDeep)(d.fieldInfoTemplate[i.uniquelySign]),u=(s.splitDownKeys,(0,o.Z)(s,ye));return u||console.error("".concat(i.uniquelySign,"\u7c7b\u578b\u5b57\u6bb5\u4e0d\u5b58\u5728")),Promise.resolve((null===c||void 0===c?void 0:c(u,r))||u).then((function(e){var n=G(e,d),r=(0,a.Z)(n,2),o=r[0],s=r[1];return l({type:m,innerField:o,placeLayerInfo:t,dragFieldInfo:i}),s}))}return[]}))}),[s,c]),P=d.useCallback((function(e,n){e.type;var t=(0,o.Z)(e,Fe),i=(n.type,(0,o.Z)(n,xe)),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Promise.resolve(C(r,t,i,u)).then((function(e){var n=e.validateResult;e.operationField,e.contentField,n&&l({type:y,placeLayerInfo:t,dragFieldInfo:i})}))}),[u]),j=d.useCallback((function(e,n,t,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return null===i||void 0===i||i.stopPropagation(),Promise.resolve(C(o,{id:n},{id:e},f)).then((function(i){var r,o=i.validateResult,l=(i.operationField,i.contentField,!1);return Array.isArray(o)?null!==o&&void 0!==o&&o.length&&(r={fieldId:o},l=!0):o&&(Array.isArray(e)&&null!==e&&void 0!==e&&e.length?(r={deleteIds:e},l=!0):r={fieldId:e,deleteIndex:t,contentFieldId:n}),{isBatchDel:l,dispatchParams:r}})).then((function(e){var n=e.isBatchDel,t=e.dispatchParams,i=!1;return t&&(l(n?(0,r.Z)({type:h},t):(0,r.Z)({type:g},t)),i=!0),i}))}),[f]),S=d.useCallback((function(e,n){null===n||void 0===n||n.stopPropagation(),l({type:F,selectId:e})}),[]),w=d.useCallback((function(e,n,t,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null===i||void 0===i||i.stopPropagation();var o=J[I];return Promise.resolve(C(r,{id:n},{id:e},v)).then((function(e){var i=e.validateResult,r=e.operationField,d=e.contentField;return i?Promise.resolve((null===p||void 0===p?void 0:p(r,d))||r).then((function(e){var i=G(e,o),r=(0,a.Z)(i,2),d=r[0],s=r[1];return l({type:x,contentFieldId:n,innerIndex:t,copyField:d}),s})):[]}))}),[C,v,p]),E=d.useMemo((function(){return{placeField:D,moveField:P,deleteField:j,selectField:S,copyField:w}}),[]);return(0,fe.jsx)(Ce.Provider,{value:E,children:(0,fe.jsx)(e,(0,r.Z)((0,r.Z)({},Z),{},{ref:t}))})}))}],function(e){return U.reduceRight((function(e,n){return n(e)}),e)}),Pe=["children","type","uniquelySign","canDrag","title","style","className","formDesignPerfixCls","formDesignId"],je=["info"],Se=d.memo((function(e){var n=e.type,t=void 0===n?f:n,i=e.canDrag,r=void 0===i||i,o=e.formDesignPerfixCls,c=e.uniquelySign,v=(0,s.c)({item:{type:t,uniquelySign:c},options:{dropEffect:"copy"},canDrag:function(){return r}}),p=(0,a.Z)(v,3),m=p[1],g=p[2];return d.useEffect((function(){g(document.getElementById("".concat(o,"-faker-perview")))}),[o]),(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)("div",{ref:m,className:u()("".concat(o,"-drag-layer"),(0,l.Z)({},"".concat(o,"-drag-disable"),!r))})})})),we=d.memo((function(e){var n=e.children,t=e.type,i=void 0===t?f:t,l=e.uniquelySign,a=e.canDrag,s=e.title,c=e.style,v=e.className,p=e.formDesignPerfixCls,m=e.formDesignId,g=(0,o.Z)(e,Pe),h=J[m],y=d.useMemo((function(){return"".concat(i,"_").concat(l)}),[i,l]);return d.useEffect((function(){h&&(h.dndMaskLayerTemplates[l]=(0,r.Z)({id:y,uniquelySign:l,type:i,name:s},g))}),[h,y]),(0,fe.jsxs)("div",{className:u()("".concat(p,"-drag-range"),v),id:y,title:s,style:c,children:[(0,fe.jsx)(Se,{type:i,uniquelySign:l,canDrag:a,formDesignPerfixCls:p}),n]})})),Ee=function(e){var n=e.info,t=(0,o.Z)(e,je),i=d.useContext(Ze),l=i.formDesignId,a=i.formDesignPerfixCls;return(0,fe.jsx)(we,(0,r.Z)((0,r.Z)((0,r.Z)({},n),t),{},{title:n.name,formDesignId:l,formDesignPerfixCls:a,children:(0,fe.jsx)("div",{className:"".concat(a,"-single-widget-content"),children:(0,fe.jsx)("div",{className:"".concat(a,"-single-widget-text"),children:n.name})})}))},Oe=t(44051),Me=t(12797),ke=t(41225),Ae=t(83418),Ne=t(91908),Te=["isDropContent","accept","type","children","fieldId","index","contentFieldId"],Ve=(0,Me.default)((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(void 0,t.concat(i))}}));!function(e){e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.none=""}(X||(X={}));var Le=d.forwardRef((function(e,n){var t=e.children,i=e.contentFieldId,r=e.formDesignPerfixCls;return(0,fe.jsx)("div",{className:"".concat(r,"-drop-content"),style:{zIndex:i?11:1},ref:n,children:t})})),Re=d.forwardRef((function(e,n){var t,i=e.children,r=(e.contentFieldId,e.fieldId),o=e.isSelected,a=e.deleteField,s=e.selectField,c=e.copyField,f=e.canDel,v=e.canCopy,p=e.isDragging,m=e.isFirstField,g=e.isLastField,h=e.locationMarker,y=e.formDesignPerfixCls,F="".concat(y,"-form-item-hover"),x=d.useCallback((function(e){return a(e)}),[a]),I=d.useCallback((function(e){return c(e)}),[c]);return(0,fe.jsx)("div",{id:r,ref:n,className:"".concat(y,"-field-dnd-wrapper"),children:(0,fe.jsx)("div",{className:u()((t={},(0,l.Z)(t,"".concat(y,"-field-active"),o),(0,l.Z)(t,"".concat(y,"-first-field"),m),(0,l.Z)(t,"".concat(y,"-last-field"),g),(0,l.Z)(t,"".concat(y,"-field-dragging"),p),(0,l.Z)(t,"".concat(y,"-location-").concat(h.sign,"-marker"),h.show&&h.sign),t)),onClick:s,onMouseOver:function(e){var t;e.stopPropagation(),null===(t=n.current)||void 0===t||t.children[0].classList.add(F)},onMouseOut:function(e){var t;e.stopPropagation(),null===(t=n.current)||void 0===t||t.children[0].classList.remove(F)},children:(0,fe.jsxs)("div",{className:"".concat(y,"-field-border"),children:[(0,fe.jsxs)("div",{className:"".concat(y,"-field-operation-area"),children:[(0,fe.jsx)("span",{children:v&&(0,fe.jsx)(Ae.Z,{onClick:I})}),(0,fe.jsx)("span",{children:f&&(0,fe.jsx)(Ne.Z,{onClick:x})})]}),i]})})})})),We=function(e){var n=e.isDropContent,t=void 0!==n&&n,i=e.accept,l=void 0===i?f:i,c=e.type,u=void 0===c?f:c,v=e.children,p=e.fieldId,m=e.index,g=e.contentFieldId,h=(0,o.Z)(e,Te),y=d.useContext(Ze).formDesignPerfixCls,F=d.useContext(Ce),x=F.placeField,I=F.moveField,Z=F.selectField,b=F.deleteField,C=F.copyField,D=Ve(Z,p),P=Ve(b,p,g,m),j=Ve(C,p,g,m),S=function(e,n,t){var i=n.placeField,r=n.moveField,o=n.selectField,l=n.type,c=n.accept,u=n.canDrag,f=void 0===u||u,v=n.formDesignPerfixCls,p=t.contentFieldId,m=t.fieldId,g=t.index,h=d.useState({show:!1,sign:X.none}),y=(0,a.Z)(h,2),F=y[0],x=y[1],I=d.useRef(null),Z=(0,s.c)({item:{type:l,id:m,contentFieldId:p,dragIndex:g},canDrag:f,collect:function(e){return{isDragging:e.isDragging()}}}),b=(0,a.Z)(Z,3),C=b[0],D=b[1],P=b[2],j=d.useCallback((function(e,n){var t=n.top,i=n.height,r=n.bottom,o=e.y;if(!(o-t<0||r-o<0)){var l={show:!0,sign:o-t<=i/2?X.top:X.bottom};F.show===l.show&&F.sign===l.sign||x(l)}}),[F]),S=(0,ke.L)({accept:c,drop:function(e,n){var t=n.getDropResult(),a=n.isOver({shallow:!1}),d=n.getItem().id;if(!t&&a)if(d){var s="number"!==typeof g||[X.bottom,X.right].includes(F.sign)?g:g-1;null===r||void 0===r||r({type:l,id:m,contentFieldId:p,dropIndex:s},e)}else{var c="number"!==typeof g||[X.top,X.left].includes(F.sign)?g:g+1;i({type:l,id:m,contentFieldId:p,dropIndex:c},e).then((function(e){e.length&&o(e[0])}))}},hover:function(n,t){if(((null===n||void 0===n?void 0:n.id)!==m||e)&&t.isOver({shallow:!0})&&I.current){var i=t.getClientOffset(),r=I.current.getBoundingClientRect();if(n.id&&[n.index,n.index+1].includes(i.y-r.top<=r.height/2?g:g+1))return;j(i,r)}},collect:function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),clientOffset:e.getClientOffset()}}}),w=(0,a.Z)(S,2),E=w[0],O=w[1];return d.useEffect((function(){e||(D(I),P(document.getElementById("".concat(v,"-faker-perview")))),O(I)}),[I,e]),d.useEffect((function(){var e;return F.show&&!E.isOverCurrent&&(e=setTimeout((function(){clearTimeout(e),x({show:!1,sign:X.none})}),32)),function(){e&&clearTimeout(e)}}),[F,E.isOverCurrent]),[I,C.isDragging,F]}(t,{placeField:x,moveField:I,selectField:Z,type:u,accept:l,canDrag:h.canDrag,formDesignPerfixCls:y},{contentFieldId:g,fieldId:p,index:m}),w=(0,a.Z)(S,3),E=w[0],O=w[1],M=w[2],k=d.useMemo((function(){return t?Le:Re}),[t]);return(0,fe.jsx)(k,(0,r.Z)((0,r.Z)({ref:E},h),{},{formDesignPerfixCls:y,fieldId:p,contentFieldId:g,selectField:D,deleteField:P,copyField:j,isDragging:O,locationMarker:M,children:v}))},Be=t(72715),_e=t(54664),qe=t(60136),Ye=t(98557),Ke=t(39390),He=function(){return He=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},He.apply(this,arguments)},$e=(0,d.createContext)(null),ze=(0,d.createContext)(null),Ge=function(){return He(He({},(0,d.useContext)($e)),(0,d.useContext)(ze))},Je=t(3382),Ue=t(27536),Xe=t(94698),Qe=t(25012),en=t(5477),nn=t(14611),tn=["id"],rn=function(){return rn=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},rn.apply(this,arguments)},on=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(t[i[r]]=e[i[r]])}return t},ln=function(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var i,r,o=t.call(e),l=[];try{for(;(void 0===n||n-- >0)&&!(i=o.next()).done;)l.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return l};var an={error:d.createElement(Qe.Z,null),success:d.createElement(en.Z,null),warning:d.createElement(nn.Z,null)},dn=function(e){var n,t,i,r,l,a=e.id,s=(0,o.Z)(e,tn),c=s.children,f=on(s,["children"]),v=ln((0,d.useState)(!1),2),p=v[0],m=v[1],g=function(e){var n,t,i,r,o,l,a,s,c,u,f,v,p,m,g,h,y,F,x,I,Z,b,C,D,P=Ge();return rn(rn({},e),{layout:null!==(t=null!==(n=e.layout)&&void 0!==n?n:P.layout)&&void 0!==t?t:"horizontal",colon:null!==(i=e.colon)&&void 0!==i?i:P.colon,labelAlign:"vertical"===P.layout?null!==(o=null!==(r=e.labelAlign)&&void 0!==r?r:P.labelAlign)&&void 0!==o?o:"left":null!==(a=null!==(l=e.labelAlign)&&void 0!==l?l:P.labelAlign)&&void 0!==a?a:"right",labelWrap:null!==(s=e.labelWrap)&&void 0!==s?s:P.labelWrap,labelWidth:null!==(c=e.labelWidth)&&void 0!==c?c:P.labelWidth,wrapperWidth:null!==(u=e.wrapperWidth)&&void 0!==u?u:P.wrapperWidth,labelCol:null!==(f=e.labelCol)&&void 0!==f?f:P.labelCol,wrapperCol:null!==(v=e.wrapperCol)&&void 0!==v?v:P.wrapperCol,wrapperAlign:null!==(p=e.wrapperAlign)&&void 0!==p?p:P.wrapperAlign,wrapperWrap:null!==(m=e.wrapperWrap)&&void 0!==m?m:P.wrapperWrap,fullness:null!==(g=e.fullness)&&void 0!==g?g:P.fullness,size:null!==(h=e.size)&&void 0!==h?h:P.size,inset:null!==(y=e.inset)&&void 0!==y?y:P.inset,asterisk:e.asterisk,bordered:null!==(F=e.bordered)&&void 0!==F?F:P.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(I=null!==(x=e.feedbackLayout)&&void 0!==x?x:P.feedbackLayout)&&void 0!==I?I:"loose",tooltipLayout:null!==(b=null!==(Z=e.tooltipLayout)&&void 0!==Z?Z:P.tooltipLayout)&&void 0!==b?b:"icon",tooltipIcon:null!==(D=null!==(C=e.tooltipIcon)&&void 0!==C?C:P.tooltipIcon)&&void 0!==D?D:d.createElement(Xe.Z,null)})}(f),h=function(){var e=ln((0,d.useState)(!1),2),n=e[0],t=e[1],i=(0,d.useRef)(),r=(0,d.useRef)();return(0,d.useLayoutEffect)((function(){if(i.current&&r.current){var e=r.current.getBoundingClientRect().width,o=i.current.getBoundingClientRect().width;e&&o&&o<e||n&&t(!1)}}),[]),{overflow:n,containerRef:i,contentRef:r}}(),y=h.containerRef,F=h.contentRef,x=h.overflow,I=g.label,Z=g.style,b=g.layout,C=g.colon,D=void 0===C||C,P=g.addonBefore,j=g.addonAfter,S=g.asterisk,w=g.feedbackStatus,E=g.extra,O=g.feedbackText,M=g.fullness,k=g.feedbackLayout,A=g.feedbackIcon,N=g.inset,T=g.bordered,V=void 0===T||T,L=g.labelWidth,R=g.wrapperWidth,W=g.labelCol,B=g.wrapperCol,_=g.labelAlign,q=g.wrapperAlign,Y=void 0===q?"left":q,K=g.size,H=g.labelWrap,$=g.wrapperWrap,z=g.tooltipLayout,G=g.tooltip,J=g.tooltipIcon;I=24===W&&/^\s+$/.test(I)?null:I;var U=rn({},g.labelStyle),X=rn({},g.wrapperStyle),Q=!1;(L||R)&&(L&&(U.width="auto"===L?void 0:L,U.maxWidth="auto"===L?void 0:L),R&&(X.width="auto"===R?void 0:R,X.maxWidth="auto"===R?void 0:R)),(W||B)&&(U.width||X.width||(Q=!0));var ee=function(e,n){var t=null===n||void 0===n?"ant":n.antPrefixCls;return(null===n||void 0===n?void 0:n.prefixCls)||(e?(t+"-").concat(e):t)}("formily-item",s),ne="popover"===k?d.createElement(Ue.Z,{autoAdjustOverflow:!0,placement:"top",content:d.createElement("div",{className:u()((n={},n[ee+"-"+w+"-help"]=!!w,n[ee+"-help"]=!0,n))},an[w]," ",O),visible:!!O},c):c;return d.createElement("div",rn({},function(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(n,t){return t.includes("data-")&&(n[t]=e[t]),n}),{})}(s),{style:rn(rn({},Z),{}),className:u()((t={},t[""+ee]=!0,t[ee+"-layout-"+b]=!0,t[ee+"-"+w]=!!w,t[ee+"-feedback-has-text"]=!!O,t[ee+"-size-"+K]=!!K,t[ee+"-feedback-layout-"+k]=!!k,t[ee+"-fullness"]=!!M||!!N||!!A,t[ee+"-inset"]=!!N,t[ee+"-active"]=p,t[ee+"-inset-active"]=!!N&&p,t[ee+"-label-align-"+_]=!0,t[ee+"-control-align-"+Y]=!0,t[ee+"-label-wrap"]=!!H,t[ee+"-control-wrap"]=!!$,t[ee+"-bordered-none"]=!1===V||!!N||!!A,t[s.className]=!!s.className,t)),onFocus:function(){(A||N)&&m(!0)},onBlur:function(){(A||N)&&m(!1)},id:a}),function(){var e;return I?d.createElement("div",{className:u()((e={},e[ee+"-label"]=!0,e[ee+"-label-tooltip"]=G&&"text"===z||x,e[ee+"-item-col-"+W]=Q&&!!W,e)),style:U},function(){var e=d.createElement("div",{className:u()(ee+"-label-content"),ref:y},S&&d.createElement("span",{className:u()(ee+"-asterisk")},"*"),d.createElement("label",{ref:F},I));return"text"===z&&G||x?d.createElement(Je.default,{placement:"top",align:{offset:[0,10]},title:x?d.createElement("div",null,d.createElement("div",null,I),d.createElement("div",null,G)):G},e):e}(),function(){if(G&&"icon"===z&&!x)return d.createElement("span",{className:u()(ee+"-label-tooltip-icon")},d.createElement(Je.default,{placement:"top",align:{offset:[0,2]},title:G},J))}()," "!==I&&d.createElement("span",{className:u()(ee+"-colon")},D?":":"")):null}(),d.createElement("div",{className:u()((i={},i[ee+"-control"]=!0,i[ee+"-item-col-"+B]=Q&&!!B&&I,i))},d.createElement("div",{className:u()(ee+"-control-content")},P&&d.createElement("div",{className:u()(ee+"-addon-before")},P),d.createElement("div",{style:X,className:u()((r={},r[ee+"-control-content-component"]=!0,r[ee+"-control-content-component-has-feedback-icon"]=!!A,r))},d.createElement(ze.Provider,{value:void 0},ne),A&&d.createElement("div",{className:u()(ee+"-feedback-icon")},A)),j&&d.createElement("div",{className:u()(ee+"-addon-after")},j)),!!O&&"popover"!==k&&"none"!==k&&d.createElement("div",{className:u()((l={},l[ee+"-"+w+"-help"]=!!w,l[ee+"-help"]=!0,l[ee+"-help-enter"]=!0,l[ee+"-help-enter-active"]=!0,l))},O),E&&d.createElement("div",{className:u()(ee+"-extra")},E)))},sn=(0,w.$j)(dn,(0,w.jM)({validateStatus:!0,title:"label",required:!0},(function(e,n){if((0,S.JF)(n))return{extra:e.extra||n.description};if(!n)return e;return{feedbackText:function(){var t=function(e){return e.reduce((function(n,t,i){return t?i<e.length-1?n.concat([t,", "]):n.concat([t]):n}),[])};if(!n.validating)return e.feedbackText?e.feedbackText:n.selfErrors.length?t(n.selfErrors):n.selfWarnings.length?t(n.selfWarnings):n.selfSuccesses.length?t(n.selfSuccesses):void 0}(),extra:e.extra||n.description}}),(function(e,n){var t;return(0,S.JF)(n)?e:n?{feedbackStatus:"validating"===n.validateStatus?"pending":(null===(t=n.decorator[1])||void 0===t?void 0:t.feedbackStatus)||n.validateStatus}:e}),(function(e,n){if((0,S.JF)(n))return e;if(!n)return e;var t=!1;return n.required&&"readPretty"!==n.pattern&&(t=!0),"asterisk"in e&&(t=e.asterisk),{asterisk:t}}),(function(e,n){var t={};return n&&(t.id=n.address.entire),t})));sn.BaseItem=dn;var cn=sn,un=(t(89072),t(60441),["span","labelCol","wrapperCol","className"]),fn=function(e){(0,qe.Z)(t,e);var n=(0,Ye.Z)(t);function t(e){return(0,P.Z)(this,t),n.call(this,e)}return(0,j.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.span,t=e.labelCol,i=e.wrapperCol,l=e.className,a=(0,o.Z)(e,un);return(0,fe.jsx)(Ke.default,{span:n||24,children:(0,fe.jsx)(cn,(0,r.Z)({antPrefixCls:"ant",labelCol:t,wrapperCol:i,colon:24!==t,labelAlign:24!==t?"right":"left",className:l},a))})}}]),t}(d.Component),vn=fn,pn=t(27168),mn=t(90038),gn=["fieldInfo"],hn=["fieldInfo"],yn=["fieldInfo"],Fn=["fieldInfo"],xn=Be.Z.TextArea,In=d.memo((function(e){var n=e.formDesignPerfixCls,t=e.supInfo,i=(e.mode,e.type),r=t.dndMaskLayerTemplates,o=d.useState(r[i]),l=(0,a.Z)(o,2),s=l[0],c=l[1];return d.useEffect((function(){(0,C.U5)((function(){s||c(r[i])}))}),[]),(0,fe.jsx)("div",{className:"".concat(n,"-field-mark")})})),Zn=function(e){return d.memo((function(n){var t,i,r,o=n.fieldInfo,l=d.useContext(Mn),a=l.labelCol,s=l.wrapperCol,c=d.useContext(On),f=c.mode,v=c.SuffixFieldDisplay,p=c.SuffixFieldWidth,m=d.useContext(Ze),g=m.formDesignPerfixCls,h=m.formDesignId,y=J[h];return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(In,{formDesignPerfixCls:g,supInfo:y,mode:f,type:o.type}),(0,fe.jsx)("div",{style:{flex:"0 0 ".concat(p,"px")},className:"".concat(g,"-field-custom-area"),children:(0,fe.jsx)(v,{fieldInfo:y.recoverField(o),mode:f})}),(0,fe.jsx)(vn,{labelCol:a,wrapperCol:s,label:o.title||" ",asterisk:"EDITABLE"===o["statusInfo>statusType"]&&o.required,extra:o.description,wrapperStyle:{pointerEvents:"none"},style:{marginBottom:"0"},mode:f,children:(0,fe.jsx)(e,{fieldInfo:o,placeholder:o.placeholder,disabled:"EDITABLE"!==o["statusInfo>statusType"],style:o.style||{},className:u()("".concat(g,"-").concat((null===(t=o.type)||void 0===t||null===(i=t.replace("_","-"))||void 0===i||null===(r=i.toLocaleLowerCase)||void 0===r?void 0:r.call(i))||"unknow","-field"),o.className),mode:f})})]})}))},bn={TEXT:Zn((function(e){e.fieldInfo;var n=(0,o.Z)(e,gn);return(0,fe.jsx)(Be.Z,(0,r.Z)({},n))})),TEXTAREA:Zn((function(e){e.fieldInfo;var n=(0,o.Z)(e,hn);return(0,fe.jsx)(xn,(0,r.Z)({width:"100%"},n))})),DATE:Zn((function(e){return(0,fe.jsx)(_e.Z,(0,r.Z)({width:"100%",block:!0},e))})),NUMBER:Zn((function(e){e.fieldInfo;var n=(0,o.Z)(e,yn),t=u()("input-number-handler-wrap-contorl",n.className);return(0,fe.jsx)(pn.Z,(0,r.Z)((0,r.Z)({},n),{},{className:t}))})),SELECT:Zn((function(e){e.fieldInfo;var n=(0,o.Z)(e,Fn);return(0,fe.jsx)(mn.Z,(0,r.Z)({},n))}))},Cn=function(e){var n;n=e,"[object Object]"===Object.prototype.toString.call(n)&&Object.entries(e).forEach((function(e){var n=(0,a.Z)(e,2),t=n[0],i=n[1];bn[t]=Zn(i)}))},Dn=function(e){var n=e.fieldId,t=d.useContext(be).fieldsMap[n],i=d.useMemo((function(){return bn[t.type]}),[t.type]);return(0,fe.jsx)(i,{fieldInfo:t})},Pn=(t(30346),["id"]),jn=function(){return(0,fe.jsx)("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:"\u8bf7\u4ece\u5de6\u8fb9\u62d6\u5165\u4e00\u4e2a\u7ec4\u4ef6"})},Sn=d.memo((function(e){var n=e.fieldGroupData,t=e.contentFieldId,i=e.selectedFieldId,l=n.length-1;return(0,fe.jsx)(Oe.default,{children:n.map((function(e,n){var a=e.id,d=(0,o.Z)(e,Pn);return"boolean"!==typeof d.visible||d.visible?(0,fe.jsx)(We,(0,r.Z)((0,r.Z)({isFirstField:!n,isLastField:n===l,index:n,contentFieldId:t,fieldId:a,isSelected:i===a},d),{},{children:(0,fe.jsx)(Dn,{fieldId:a})}),a):null}))})})),wn=d.memo((function(e){var n=e.contentFieldId,t=e.fieldGroupData,i=e.selectedFieldId,r=e.customNoData,o=void 0===r?null:r;return(0,fe.jsx)(We,{isDropContent:!0,contentFieldId:n,children:null!==t&&void 0!==t&&t.length?(0,fe.jsx)(Sn,{contentFieldId:n,fieldGroupData:t,selectedFieldId:i}):o})})),En=function(e){var n=e.contentFieldId,t=e.customNoData,i=d.useContext(be),r=i.outerFieldPostions,o=i.nestedFieldPostions,l=i.selectedFieldId,a=n?o[n]:r;return(0,fe.jsx)(wn,{contentFieldId:n,selectedFieldId:l,fieldGroupData:a,customNoData:t})},On=d.createContext({mode:"web",SuffixFieldDisplay:function(e){return(0,fe.jsx)(fe.Fragment,{})},SuffixFieldWidth:84}),Mn=d.createContext({labelCol:8,wrapperCol:16}),kn=function(e){var n=d.useContext(Ze).formDesignPerfixCls,t=d.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16},e.layout)}),[e.layout]),i=d.useMemo((function(){return Object.assign({},{mode:e.mode||"web",SuffixFieldDisplay:e.SuffixFieldDisplay||function(){return(0,fe.jsx)(fe.Fragment,{})},SuffixFieldWidth:e.SuffixFieldWidth||84})}),[e.SuffixFieldWidth,e.SuffixFieldDisplay,e.mode]);return d.useEffect((function(){Cn(e.expendFieldSimulate)}),[e.expendFieldSimulate]),(0,fe.jsx)(On.Provider,{value:i,children:(0,fe.jsx)(Mn.Provider,{value:t,children:(0,fe.jsx)("div",{className:"".concat(n,"-simulator-content"),children:(0,fe.jsx)(En,{contentFieldId:null,customNoData:e.noData||(0,fe.jsx)(jn,{})})})})})},An=t(36577),Nn=t(54676),Tn=function(e){var n=e.title,t=e.supContent,i=void 0===t?function(){return null}:t,r=e.children,o=d.useContext(Ze).formDesignPerfixCls;return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)("div",{className:"".concat(o,"-form-group-title"),children:[n,(0,fe.jsx)(i,{})]}),(0,fe.jsx)(Nn.Z,{children:r})]})},Vn=function(){var e=d.useContext(Ze).formDesignPerfixCls;return(0,fe.jsx)("div",{className:"".concat(e,"-side-line")})},Ln=t(56877),Rn=t.n(Ln),Wn=["type","value","onChange","decimal"],Bn=["value","onChange","format"],_n=["type","onBlur","onFocus"],qn=_e.Z.RangePicker,Yn=function(e){return/^\-$/.test(e)?"0":/\.$/.test(e)?e.slice(0,e.length-1):null},Kn=function(e){e.type,e.value;var n=e.onChange,t=e.decimal,i=void 0===t?2:t,l=(0,o.Z)(e,Wn),s=d.useState(e.value||[]),c=(0,a.Z)(s,2),u=c[0],f=c[1],v=d.useMemo((function(){return new RegExp("^\\-?((0|[1-9][0-9]*)?$|(0|[1-9][0-9]*)(\\.\\d{0,"+i+"})?$)")}),[i]),p=function(e,t){var i=t.target.value,r=function(e,n){var t=(0,D.Z)(u);return v.test(n)?(t[e]=n,t):null}(e,i);if(r){var o=(0,D.Z)(r);f(r);var l=Yn(i);l&&(o[e]=l),n(o)}},m=function(){var e=(0,a.Z)(u,2),t=e[0],i=e[1];t=Yn(t)||t,i=Yn(i)||i,t&&i&&+t>+i&&(f([i,t]),n([i,t]))};return(0,fe.jsxs)("div",{className:"flex",children:[(0,fe.jsx)(Be.Z,(0,r.Z)({value:u[0],onChange:p.bind(null,0),onBlur:m},l)),"~",(0,fe.jsx)(Be.Z,(0,r.Z)({value:u[1],onChange:p.bind(null,1),onBlur:m},l))]})},Hn=function(e){var n=e.value,t=e.onChange,i=e.format,l=(0,o.Z)(e,Bn),s=d.useState(Array.from({length:2},(function(n,t){return e.value[t]&&Rn()(e.value[t])}))),c=(0,a.Z)(s,2),u=c[0],f=c[1],v=d.useMemo((function(){var e={YYYY:{type:"rangepicker",picker:"year"},"YYYY-MM":{type:"rangepicker",picker:"month"},"YYYY-MM-DD HH:mm":{type:"rangepicker",showTime:{format:"HH:mm"}},"YYYY-MM-DD HH:mm:ss":{type:"rangepicker",showTime:{format:"HH:mm:ss"}}}[i]||{type:"rangepicker"},r=n.map((function(e){return e&&Rn()(e).format(i)}));return t(r),f(r.map((function(e){return e&&Rn()(e)}))),e}),[i]);return(0,fe.jsx)(qn,(0,r.Z)((0,r.Z)((0,r.Z)({},l),v),{},{block:!0,value:u,isDefinedValue:!0,onCalendarChange:function(e,n){f(e),t(n)}}))},$n=function(e){var n=e.type,t=(e.onBlur,e.onFocus,(0,o.Z)(e,_n)),i=d.useMemo((function(){return["rangepicker"===n?Hn:Kn]}),[n]),l=(0,a.Z)(i,1)[0];return(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)(l,(0,r.Z)({type:n},t))})},zn={number:"\u6570\u503c",percent:"\u767e\u5206\u6bd4",rangepicker:"\u65e5\u671f"},Gn=function(e){var n=e.value||[],t=(0,a.Z)(n,2),i=t[0],r=t[1],o=zn[e.componentProps.type],l=e.componentProps.suffix||"",d="";return i&&!r?d="\u4e0d\u80fd\u4f4e\u4e8e".concat(o,"\u6700\u5c0f\u503c").concat(i).concat(l):!i&&r?d="\u4e0d\u80fd\u8d85\u51fa".concat(o,"\u6700\u5927\u503c").concat(r).concat(l):i&&r&&(d="\u8bf7\u8f93\u5165".concat(i).concat(l,"~").concat(r).concat(l,"\u7684").concat(o)),d},Jn=t(13442),Un=t(32508),Xn=["id"],Qn=["correctionNumber"],et=Be.Z.TextArea,nt=function(e){return"[object Object]"===Object.prototype.toString.call(e)},tt=function(e,n,t,i){var r=n.form,o=t[e.perStatusType||n.initialValue]||[];Object.entries(o).forEach((function(n){var t=(0,a.Z)(n,2),i=t[0],o=t[1];o=Array.isArray(o)?o:[o],e[i]=o.reduce((function(e,n){var t=r.getValuesIn(n);return nt(t)?(e=e||{},Object.assign(e,t)):e=t,e}),void 0)})),e.perStatusType=n.value};(0,S.au)({rangeSetterValidateRules:function(e,n,t){var i=e||[],r=(0,a.Z)(i,2),o=r[0],l=r[1];return o&&l?"":"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u5b57\u6bb5"}});var it=d.memo((function(e){var n=d.useContext(pt);return(0,fe.jsx)(vn,(0,r.Z)((0,r.Z)({},n),e))})),rt=function(e,n){for(var t=arguments.length,i=new Array(t>2?t-2:0),o=2;o<t;o++)i[o-2]=arguments[o];if(i.length){var l=i[i.length-1];"function"===typeof l&&(i[i.length-1]=function(n,t){var i,o=null===(i=e.dealWithCustomData)||void 0===i?void 0:i.call(e,n,t);return(0,r.Z)((0,r.Z)({},l(o,t)),o)})}else i=[function(n,t){var i;return null===(i=e.dealWithCustomData)||void 0===i?void 0:i.call(e,t.data||{},n)}];return(0,w.$j)(n,w.jM.apply(void 0,(0,D.Z)(i)))},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=rt.bind(null,e);return n&&nt(n)?Object.entries(n).reduce((function(e,n){var i=(0,a.Z)(n,2),r=i[0],o=i[1];return e[r]=t(o),e}),{}):{}},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=rt.bind(null,e),i=t(Be.Z),l=t((function(e){var n=e.id,t=(0,o.Z)(e,Xn);return(0,fe.jsx)("div",{id:n,children:(0,fe.jsx)(mn.Z,(0,r.Z)({},t))})}),(function(e,t){var i=n+"-"+t.address.entire;return{options:t.dataSource,id:i,getPopupContainer:function(){return document.getElementById(i)}}})),a=t((function(e){e.correctionNumber;var n=(0,o.Z)(e,Qn);return(0,fe.jsx)(pn.Z,(0,r.Z)({},n))}),(function(e){var n=e.correctionNumber,t={className:"input-number-handler-wrap-contorl"};return n?(0,r.Z)((0,r.Z)({},t),{},{formatter:function(e){return+e-n},parser:function(e){return+e+n}}):t})),d=t(Un.Z,(function(e,n){return e.isCompose&&{options:n.dataSource}})),s=t(Jn.Z,{value:"checked"},(function(e,n){return e.isCompose?{}:{composeOpts:n.dataSource,checkedOpts:e.value}})),c=t(et),u=t($n),f=(0,w.$j)(Tn),v=(0,w.$j)(Vn);return{Input:i,TextArea:c,Select:l,InputNumber:a,Radio:d,Checkbox:s,FormGroup:f,RangeSetter:u,SideLine:v,FormItem:it}},at=(t(94718),["expandFields","layout","scope"]),dt=["splitDownKeys"],st=C.LO.ref(0),ct=C.LO.ref(0),ut=function(e){e.validate().catch((function(e){(0,An.Z)(document.getElementById(e[0].address),{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"})}))},ft=function(){return(0,fe.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u7684\u7ec4\u4ef6"})},vt=d.memo((function(e){var n=e.createSchemaFieldParams,t=e.selectedFieldId,i=e.fieldType,r=e.fieldsMap,o=e.NoData,l=void 0===o?ft:o,s=e.changeField,c=e.formDesignId,u=r[t]||{},f=J[c],v=d.useState({form:{},selectedFieldId:t}),p=(0,a.Z)(v,1)[0],m=function(e,n,t,i){var r=n[e]||{},o=null===r||void 0===r?void 0:r.type,l=d.useState([{type:"object",properties:{}},null]),s=(0,a.Z)(l,2),c=s[0],u=s[1],f=d.useState({selectedFieldId:null}),v=(0,a.Z)(f,1)[0],p=d.useCallback((function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!v.selectedFieldId||!n[v.selectedFieldId])return{type:"object",properties:{}};var r=t.recoverField(v.formAction.values);return K(t.fieldSetterTemplate[e],(function(e,n,o){if(n.type||n["x-component"]){var l;i.push(o.concat(e).toString());var a={componentProps:n["x-component-props"],enum:n.enum,visible:n["x-visible"]},d=null===(l=t.manualContorlSchema)||void 0===l?void 0:l.call(t,e,a,r);d&&d!==a&&(d.enum&&Array.isArray(d.enum)&&(n.enum=d.enum),d.componentProps&&(n["x-component-props"]=d.componentProps),"boolean"===typeof d.visible&&(n["x-visible"]=d.visible))}}))}),[]),m=d.useCallback((function(e,n){return(0,S.Np)({initialValues:e,validateFirst:!0,effects:function(){(0,S.dQ)((function(e){n.validateWithScrollSign.value===v.selectedFieldId&&(n.validateWithScrollSign.value="",ut(e))})),(0,S.ge)("*",(function(e){var t;null===(t=n.onFieldChange)||void 0===t||t.call(n,e.props.name,e.value)})),(0,S.aK)((function(e){i(v.selectedFieldId,e.values)}))}})}),[i]);return d.useEffect((function(){t&&(0,C.U5)((function(){return t.resetSetterPaneSchema.value}),(function(){var e=[],n=p(v.type,v.supInfo,e);v.formAction.setFormState((function(t){e.forEach((function(e){delete t.fields[e]})),u([n,v.formAction])}))}),{fireImmediately:!1})}),[t]),d.useEffect((function(){if(t){v.selectedFieldId=e,v.type=o,v.supInfo=t;var n=m(r,t);v.formAction=n;var i=p(o,t);u([i,n])}}),[e,o,t]),c}(t,r,f,s),g=(0,a.Z)(m,2),h=g[0],y=g[1],F=d.useMemo((function(){return Object.assign(n.scope,function(e){var n={};return{rangeSetterEeactRangeErrorMsg:Gn,statusTypeChangeEffect:tt.bind(null,n),statusInfo:n}}()),n.scope.$published=u.published||!1,(0,w.cA)(n)}),[n,h]);return d.useEffect((function(){p.form=y,p.selectedFieldId=t}),[y]),d.useEffect((function(){f&&((0,C.U5)((function(){return f.validateWithScrollSign.value}),(function(e){e===p.selectedFieldId&&(f.validateWithScrollSign.value="",ut(p.form))})),(0,C.U5)((function(){return f.resetSetterPaneValue.value}),(function(e,n){var t;null!==(t=p.form)&&void 0!==t&&t.id&&p.form.setValues(r[p.selectedFieldId],"overwrite")}),{fireImmediately:!1}))}),[f]),(0,fe.jsx)(fe.Fragment,{children:i&&y?(0,fe.jsx)(w.RV,{form:y,children:(0,fe.jsx)(F,{schema:h})}):(0,fe.jsx)(l,{})})}),(function(e,n){return e.selectedFieldId===n.selectedFieldId&&e.fieldType===n.fieldType&&e.changeField===n.changeField&&e.createSchemaFieldParams===n.createSchemaFieldParams})),pt=d.createContext({labelCol:8,wrapperCol:16,span:24}),mt=function(e){var n,t=e.expandFields,i=void 0===t?{}:t,a=e.layout,s=void 0===a?{}:a,c=e.scope,u=(0,o.Z)(e,at),f=d.useContext(Ze).formDesignPerfixCls,v=d.useContext(be),p=v.selectedFieldId,m=v.fieldsMap,g=v.formDesignId,h=v.changeField,y=J[g],F=d.useMemo((function(){var e={components:(0,r.Z)((0,r.Z)({},lt(y,f)),ot(y,i)),scope:{typeEffect:function(e){var n,t=e.value,i=e.form.values||{},a=y.fieldKey,d=i.title,s=i.description,c=i.placeholder,u=i.id,f=i.parId,v=(y.fieldInfoTemplate||{})[t],p=(v.splitDownKeys,(0,o.Z)(v,dt)),m=(0,r.Z)((0,r.Z)((0,r.Z)({},{}),p),{},(n={title:d,description:s},(0,l.Z)(n,a,i[a]),(0,l.Z)(n,"placeholder",c),(0,l.Z)(n,"id",u),(0,l.Z)(n,"parId",f),n));h("",m,!0)},customScope:c}};return J.changeSupInfo(g,{createSchemaFieldParams:e,resetSetterPaneSchema:st,resetSetterPaneValue:ct}),e}),[i,c,y]);d.useEffect((function(){(0,S.au)({customFieldsRules:function(e,n,t){var i,r,o,l=null===(i=y.recoverField)||void 0===i?void 0:i.call(y,t.form.values);return null===(r=y.customFieldsRules)||void 0===r?void 0:r.call(y,l,null===t||void 0===t||null===(o=t.props)||void 0===o?void 0:o.name,e)}})}),[y]);var x=d.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16,span:24},s)}),[s]),I=null===(n=m[p||""])||void 0===n?void 0:n.type;return(0,fe.jsx)(pt.Provider,{value:x,children:(0,fe.jsx)(vt,(0,r.Z)((0,r.Z)({},u),{},{formDesignId:g,selectedFieldId:p||"",fieldsMap:m,fieldType:I,createSchemaFieldParams:F,changeField:h}))})},gt=t(29750),ht=t(90143),yt=t(95904),Ft={position:"fixed",pointerEvents:"none",zIndex:-1,left:0,top:0,height:"0px",visibility:"hidden"};var xt=function(e){var n=e.formDesignId,t=e.fieldsMap,i=e.formDesignPerfixCls,o=J[n]||{},l=o.dndMaskLayerTemplates,s=o.CoustomPerView,c=(0,yt.f)((function(e){return{dragItem:e.getItem(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}})),u=c.isDragging,f=c.dragItem,v=c.currentOffset,p=c.clientOffset,m=d.useMemo((function(){if(null!==f&&void 0!==f&&f.id){var e=t[f.id],n=e.type,i=e.title,o=l[n]||{},a=o.id,d=o.iconClass,s=(0,r.Z)((0,r.Z)({},f),{},{uniquelySign:n,fieldName:i,iconClass:d});return[(0,r.Z)((0,r.Z)({},s),{},{dragId:a}),s]}if(null!==f&&void 0!==f&&f.uniquelySign){var c=l[null===f||void 0===f?void 0:f.uniquelySign],u=c.iconClass,v=c.id,p=c.name,m=(0,r.Z)((0,r.Z)({},f),{},{iconClass:u,fieldName:p});return[(0,r.Z)((0,r.Z)({},m),{},{dragId:v}),m]}return[f,f]}),[f,t,l]),g=(0,a.Z)(m,2),h=g[0],y=g[1],F=d.useState({contentHeight:40,contentWidth:0}),x=(0,a.Z)(F,1)[0];d.useEffect((function(){if(h){var e,n,t=h.dragId||(null===(e=Object.values(l)[0])||void 0===e?void 0:e.id),i=null===(n=document.getElementById(t))||void 0===n?void 0:n.offsetWidth;x.contentWidth=i||200}}),[h]);var I=function(e,n,t,i){if(t.contentHeight,t.contentWidth,!e||!n)return{};var r=e.x,o=e.y,l=n.x,a=n.y,d={background:"#fff",position:"relative",left:"".concat(r,"px"),top:"".concat(o,"px")};return i&&Object.assign(d,{transform:"translate(-50%, -50%)",left:"".concat(l,"px"),top:"".concat(a,"px")}),d}(v,p,x,null===h||void 0===h?void 0:h.id);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)("div",{style:u&&null!==h&&void 0!==h&&h.uniquelySign?(0,r.Z)((0,r.Z)({},Ft),{},{zIndex:999,visibility:"visible"}):Ft,children:(0,fe.jsx)("div",{style:I,children:s?(0,fe.jsx)(s,(0,r.Z)({},y)):(0,fe.jsx)("div",{className:"".concat(i,"-drag-perview"),style:{width:x.contentWidth,height:x.contentHeight},children:(0,fe.jsx)("div",{className:"".concat(i,"-single-widget-text"),children:null===h||void 0===h?void 0:h.fieldName})})})}),(0,fe.jsx)("div",{id:"".concat(i,"-faker-perview"),style:{position:"fixed",top:"-1000px"},children:"\xa0"})]})},It=(t(98938),d.forwardRef((function(e,n){var t=d.useContext(Ze),i=d.useContext(be),r=d.useContext(Ce),o=d.useMemo((function(){var e;return null===(e=J[i.formDesignId])||void 0===e?void 0:e.mounted}),[i.formDesignId]);return d.useImperativeHandle(n,(function(){var e=J[i.formDesignId]||{},n=e.recoverField,t=e.resetSetterPaneSchema,o=e.resetSetterPaneValue,l=function(n){var t="";return n.catch((function(e){var n=Object.entries(e[0]),i=(0,a.Z)(n,1),r=(0,a.Z)(i[0],1)[0];throw t=r,e})).finally((function(){var n;t&&(null===(n=r.selectField)||void 0===n||n.call(r,t),e.validateWithScrollSign.value=t)}))};return{validate:function(){return l(z(i,e))},submit:function(){return l(function(e,n){return z(e,n,!0).then((function(t){var i=e.outerFieldPostions,r=e.nestedFieldPostions;return function e(i){return i.reduce((function(i,o){var l=o.id,a=o.visible?n.recoverField(t[l]):t[l];return r[l]&&(a.items=e(r[l])),i.push(a),i}),[])}(i)}))}(i,e))},getFieldsMap:$.bind(null,i,n),setSelectFieldId:r.selectField,getSelectFieldId:function(){return i.selectedFieldId},getSelectField:function(){return n(i.fieldsMap[i.selectedFieldId||""])},deleteField:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=[e,null,null];if("string"===typeof e){var o,l=(null===(o=i.fieldsMap[e])||void 0===o?void 0:o.parId)||null;t[1]=l}return r.deleteField.apply(r,t.concat([null,n]))},addField:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.selectedFieldId,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={type:f,uniquelySign:e},l=i.fieldsMap[n||""],a={contentFieldId:null,dropIndex:null,id:"",type:"BASE"};if(l){var d=l.parId,s=d?i.nestedFieldPostions[d]||[]:i.outerFieldPostions,c=s.findIndex((function(e){return e.id===n}));a={contentFieldId:d,dropIndex:c=c>-1?c+1:s.length,id:n,type:"BASE"}}return r.placeField(a,o,t)},changeFieldInfo:function(n,t,r){if(n){var l,a=i.outerFieldPostions,d=i.nestedFieldPostions,s=null===(l=i.fieldsMap[n])||void 0===l?void 0:l.parId;t=((s?d[s]:a).filter((function(e){return e.id===n}))[0]||{}).visible?e.transformField(t):t}i.changeField(n,t,r||!1),n&&n!==i.selectedFieldId||(o.value=o.value+1)},resetSetterPane:function(){o.value=o.value+1,t.value=t.value+1}}}),[i,r]),(0,fe.jsxs)(gt.W,{backend:ht.PD,children:[(0,fe.jsx)("div",{className:u()(t.formDesignPerfixCls,e.className),style:e.style,children:o&&e.children}),(0,fe.jsx)(xt,{formDesignPerfixCls:t.formDesignPerfixCls,formDesignId:i.formDesignId,fieldsMap:i.fieldsMap})]})}))),Zt=De(d.memo(It))},50915:function(){},47852:function(){},40817:function(){},86738:function(){},98938:function(e,n,t){var i=t(93379),r=t(50915);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);var o={insert:"head",singleton:!1};i(r,o);e.exports=r.locals||{}},60441:function(e,n,t){var i=t(93379),r=t(47852);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);var o={insert:"head",singleton:!1};i(r,o);e.exports=r.locals||{}},94718:function(e,n,t){var i=t(93379),r=t(40817);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);var o={insert:"head",singleton:!1};i(r,o);e.exports=r.locals||{}},30346:function(e,n,t){var i=t(93379),r=t(86738);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);var o={insert:"head",singleton:!1};i(r,o);e.exports=r.locals||{}}}]);