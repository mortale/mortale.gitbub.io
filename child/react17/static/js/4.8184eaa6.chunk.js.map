{"version":3,"sources":["components/formily/module.ts","components/formily/constants.ts","components/formily/basic/common.ts","components/formily/basic/context-wrapper.tsx","components/formily/basic/drop.tsx","components/formily/basic/form-design-reducer.ts","components/formily/basic/drag.tsx","components/formily/setter-pane/register-field/form-item/form-layout.js","components/formily/setter-pane/register-field/form-item/form-item.js","components/formily/setter-pane/register-field/form-item/__builtins__.js","components/formily/setter-pane/register-field/form-item/index.tsx","components/formily/simulator-wrap/field-display.tsx","components/formily/simulator-wrap/index.tsx","components/formily/setter-pane/register-field/void-fields.tsx","components/formily/setter-pane/register-field/range-setting.tsx","components/radio/index.tsx","components/formily/setter-pane/register-field/index.tsx","components/formily/setter-pane/index.tsx","components/formily/basic/perview.tsx","components/formily/basic/provider.tsx","pages/custom-form/context.ts","components/icon/index.ts","pages/custom-form/content-header.tsx","components/formily-example/formily-field.ts","components/formily-example/schema.tsx","components/formily-example/index.tsx","pages/custom-form/content-main.tsx","pages/custom-form/index.tsx"],"names":["IChangeTypeProps","BASE","CHANGE_FORMVO","INIT_FORMDESIGN","PLACE_FIELD","DELETE_FIELD","BATCH_DELETE_FIELD","MOVE_FIELD","SELECT_FIELD","COPY_FIELD","CHANGE_FIELD","CLEAR_FORMDESIGN","exteaAttrs","cloneParams","data","undefined","JSON","parse","stringify","isObject","Object","prototype","toString","call","getFieldPath","currentFieldId","fieldsMap","parIds","currentLayer","length","parId","push","recoverField","originField","targetData","curTemplate","this","fieldInfoTemplate","type","console","error","splitDownKeys","Array","from","key","includes","hasOwnProperty","element","keys","replace","split","realKey","pop","every","el","reduce","acc","next","transformField","fieldInfo","iterativeObject","perKey","newKey","transformFormVo","formVo","supInfo","outerFieldPostions","fieldFunctionContorl","curTransformField","fieldKey","nestedFieldPostions","iterativeMethods","interativeData","map","uniqueId","canDrag","canDel","canCopy","visible","currentFunctionCode","id","items","getKeyFormParser","originData","isArray","value","elements","warn","splitTemplates","templates","fieldSetterTemplate","forEach","item","schemaTemplate","Set","initialValue","newSchema","mapSchema","fieldkey","parser","Parser","hasInitialValue","parserResult","i","add","toJSON","dealWithCustomData","props","field","contorlTrigger","triggerKey","oldFunc","params","Promise","resolve","name","form","values","then","validateResult","schema","callback","Schemaiterator","currentSchema","basePath","FormPath","perCBResult","mapProperties","index","address","concat","result","Schema","assign","singleFieldValidate","options","createSchemaFieldParams","createForm","initialValues","validateFirst","fieldProps","toFieldProps","createParams","createObjectField","createArrayField","createVoidField","createField","display","deleteValuesIn","destroy","onMount","submit","finally","onUnmount","getFieldsMap","state","recoverFieldFunc","iterativeOperation","operationArr","validate","returnSuccess","nestedContainerFieldPostions","entries","filter","r","j","reject","code","messages","allSettled","validateData","status","reason","success","createNewFieldHandle","innerField","ids","otherProps","Math","random","slice","Date","title","FormDesignSupInfo","formDesignId","extendMaskLayers","otherSupInfo","log","templateData","mounted","dndMaskLayerTemplates","observable","bind","newSupInfo","otherData","unMounted","newData","diffChange","perData","ctxWraps","postions","deleteObjectParams","defaultState","selectedFieldId","dealWithPlace","placeLayerInfo","contentFieldId","dragFieldInfo","dropIndex","operationData","targetIndex","findLastIndex","splice","dealWithCopy","copyField","innerIndex","dealWithMoveOperationData","opreationData","removeField","innerFieldId","removeIndex","initAcc","innerFieldInfo","dealWithMove","dragId","dragContentFieldId","dragIndex","dropContentFieldId","addOperationData","removeOperationData","changeParams","dealWithDelete","fieldId","deleteFieldPostions","indexOf","dealWithBatchDelete","selectFieldParIds","finalPosition","deleteFieldPostion","max","dealWithChange","newFieldInfo","cover","changeField","cloneDeep","clearFieldsMap","FormDesignReducer","constants","newFieldsMap","newState","onFormVoChange","copy","moveResult","moveField","move","delete","batchDelState","deleteIds","select","selectId","defaultRootContext","formDesignPerfixCls","FormDesignRootContext","React","createContext","FormDesignDataContext","FieldOperationsContext","placeField","deleteField","selectField","FormDesignProviderWrapper","InnerComponent","forwardRef","ref","rootContextValue","useMemo","Provider","customFieldAttrWithSetting","customFieldsRules","manualContorlSchema","onFieldChange","onChangeValidateInSetter","coustomPerview","useState","formDesignLifeStatus","useReducer","formDesignDataReducer","dispatch","useEffect","initSupInfo","validateWithScrollSign","CoustomPerView","deleteSupInfo","changeSupInfo","resetSetterPaneValue","resetSetterPaneSchema","useCallback","dataContextValue","formDesignDataDiepatch","formDesignState","placeFieldValidate","createInnerFieldInfo","moveFieldValidate","deleteFieldValidate","copyFieldValidate","createCopyFieldInfo","validateOperation","noValidate","contentInfo","operationInfo","validateFunc","operationField","contentField","uniquelySign","templateField","fields","deleteIndex","e","stopPropagation","dispatchParams","isBatchDel","deleteResult","copyFieldId","operationsContextValue","reduceRight","ctxWrap","DragDiv","memo","useDrag","dropEffect","baseDrag","connectDragPreview","document","getElementById","className","cs","DragLayout","children","style","Drag","info","dragProps","useContext","funcMemo","memoized","targetFunc","otherParams","ContentDrop","zIndex","FieldDragWithDrop","isSelected","isDragging","isFirstField","isLastField","locationMarker","hoverClassName","wrapperDeleteField","wrappercopyField","sign","show","onClick","onMouseOver","current","classList","onMouseOut","remove","CopyOutlined","DeleteOutlined","Drop","isDropContent","accept","newSelectField","newDeleteField","newCopyField","none","setLocationMarker","collect","monitor","dragCollectData","connectDrag","getArea","eventPostions","top","height","bottom","y","newLocationMarker","useDrop","drop","dropResult","getDropResult","isOverCurrent","isOver","shallow","draggedId","getItem","right","left","hover","clientOffset","getClientOffset","getBoundingClientRect","dropCollectData","connectDrop","timeCount","setTimeout","clearTimeout","useDnd","TargetComponent","__assign","t","s","n","arguments","p","apply","FormLayoutDeepContext","FormLayoutShallowContext","useFormLayout","__rest","getOwnPropertySymbols","propertyIsEnumerable","__read","o","m","Symbol","iterator","ar","done","ICON_MAP","createElement","CloseCircleOutlined","CheckCircleOutlined","warning","ExclamationCircleOutlined","BaseItem","_a","_b","_c","_d","_e","others","_f","active","setActice","formLayout","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","layout","colon","labelAlign","labelWrap","labelWidth","wrapperWidth","labelCol","wrapperCol","wrapperAlign","wrapperWrap","fullness","size","inset","asterisk","bordered","feedbackIcon","feedbackLayout","tooltipLayout","tooltipIcon","QuestionCircleOutlined","useFormItemLayout","overflow","setOverflow","containerRef","useRef","contentRef","useLayoutEffect","contentWidth","width","containerWidth","useOverflow","label","addonBefore","addonAfter","feedbackStatus","extra","feedbackText","tooltip","test","labelStyle","wrapperStyle","enableCol","maxWidth","prefixCls","tag","antPrefixCls","usePrefixCls","formatChildren","Popover","autoAdjustOverflow","placement","content","cls","buf","pickDataProps","onFocus","onBlur","labelChildren","Tooltip","align","offset","renderLabelText","renderTooltipIcon","renderLabel","FormItem","connect","mapProps","validateStatus","required","isVoidField","description","text","validating","selfErrors","selfWarnings","selfSuccesses","takeMessage","decorator","pattern","target","entire","span","TextArea","Input","FieldMark","mode","markLayerInfo","setMarkLayerInfo","reaction","transformProps","InnerComponents","SimulatorWrapLayoutContext","SimulatorWrapContext","SuffixFieldDisplay","SuffixFieldWidth","flex","pointerEvents","marginBottom","placeholder","disabled","toLocaleLowerCase","UIComponents","TEXT","TEXTAREA","DATE","block","NUMBER","RADIO","expandHandle","expandFieldsDisplay","UIComponent","FieldUIComponent","FieldDisplay","DefaultNoData","justifyContent","alignItems","FieldGroupContent","fieldGroupData","groupLength","functionContorl","DropFieldGroup","customNoData","DropFieldGroupWithContext","SimulatorWrap","SimulatorWrapLayoutContextValue","SimulatorWrapContextValue","expendFieldSimulate","noData","FormGroup","supContent","SupContent","SideLine","AntdRangePicker","DatePicker","RangePicker","transformValue","v","RangeSetterWithInput","onChange","decimal","cacheValue","setCacheValue","rexExp","RegExp","wapperOnChange","newValue","targetValue","dealWithValue","changeValue","correctionValue","minValue","maxValue","format","Moment","rangePickerConfig","targetConfig","picker","showTime","newValues","isDefinedValue","onCalendarChange","dates","dateStrings","RangeSetter","RenderComponent","typeTitleMap","rangeSetterEeactRangeErrorMsg","fieldTitle","componentProps","suffix","RadioGroup","Radio","Group","RadioCombination","isCompose","checkText","statusTypeChangeEffect","statusInfo","$self","linkageFields","alisa","$form","cacheField","perStatusType","linkageKeys","curValue","getValuesIn","registerValidateRules","rangeSetterValidateRules","rule","ctx","SetterPaneLayoutContext","WrapperComponent","mapPropsParams","func","expandField","WrapperComponentBindSupInfo","createCommonField","InputWithFormily","SelectWithFormily","dataSource","getPopupContainer","InputNumberWithFormily","correctionNumber","baseConfig","formatter","RadioWithFormily","CheckboxWithFormily","Checkbox","composeOpts","checkedOpts","TextAreaWithFormily","RangeSetterWithFormily","FormGroupWithFormily","SideLineWithFormily","Select","InputNumber","validateWithScroll","catch","scrollIntoView","scrollMode","inline","behavior","SetterPane","fieldType","NoData","fakeThisAttr","properties","formCore","setFormCore","cacheCite","createSchema","schemaType","curSupInfo","controlFieldsKey","curFieldInfo","formAction","contorlParams","enum","createFormAction","effects","onFormMount","f","onFieldInputValueChange","onFormInputChange","setFormState","fireImmediately","newFormAction","useFormCoreData","FieldSchemaField","scope","createDefaultScope","$published","published","createSchemaField","oldValue","setValues","pp","np","SetterPaneWithContext","expandFields","components","typeEffect","template","customScope","c","curfieldInfo","SetterPaneLayoutContextValue","layerStyles","position","visibility","DragPerview","useDragLayer","dragItem","currentOffset","getSourceClientOffset","fieldName","iconClass","customPerviewProps","contentHeight","domId","offsetWidth","postionStyle","currentX","x","currentY","clientX","clientY","targetStyle","background","transform","getItemStyles","FormDesignProvider","rootState","dataState","operationFuncs","canRender","scrollToErrorParams","rejectPromise","firstErrorFlieldId","setSelectFieldId","getSelectFieldId","getSelectField","deleteFieldId","addField","depandFieldId","depandField","operationContent","findIndex","changeFieldInfo","newField","resetSetterPane","DndProvider","backend","HTML5Backend","rootContext","formDesignContext","Icon","createFromIconfontCN","scriptUrl","ButtonGroup","buttonSize","setSelectId","cursor","ContentHeader","prefix","SELECT","validatorMap","minDate","maxDate","minDateErrorMsg","maxDateErrorMsg","BaseField","initData","valueRule","Error","statusType","editable","dealWithStatusInfo","rules","speicalHandle","Number","message","requiredErrorMsg","dealWithValueRule","FormilyField","transformSchema","manualContorlField","originInfo","formilyField","err","SchemaField","NumberPicker","Form","Content","Layout","Sider","CustomDataSourceSetter","AssociateDataSourceSetter","NonEditableInfoSetter","DragGroup","flexDirection","padding","FormContent","json","margin","dealWith","DisplayJson","setData","defaultValue","autoSize","reducer","actions","ContentMain","formDesignRef","task","theme","require","Main","curTemplates","setCurTemplates","borderBottom","contextValue","Page"],"mappings":"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","file":"static/js/4.8184eaa6.chunk.js","sourcesContent":["import React, { CSSProperties } from \"react\";\nexport interface IFunctionProps {\n  canDrag?: boolean;\n  canDel?: boolean;\n  canCopy?: boolean;\n  visible?: boolean;\n}\n\nexport interface IPostionInfoProps extends IFunctionProps {\n  id: string;\n}\nexport interface IFormDesignContextProps {\n  outerFieldPostions: IPostionInfoProps[];\n  nestedFieldPostions: { [key: string]: IPostionInfoProps[] };\n  fieldsMap: { [key: string]: any };\n  selectedFieldId: string | null;\n  formDesignId: string;\n  SuffixFieldDisplay?: React.ComponentType;\n  mode?: string;\n  changeField: (fieldId: string, newField: any, cover?: boolean) => void;\n}\n\n//可被drag的内容展示props\nexport interface IDragBtnProps {\n  type: string;\n  canDrag?: boolean;\n  name: string;\n  iconClass: string;\n  showToCustomer?: boolean; //是否展示给用户看\n}\n//基础字段的模板属性\nexport interface IFieldVoInfo {\n  id?: string;\n  type: string;\n  title?: string;\n  placeholder?: string;\n  required?: boolean;\n  [key: string]: any;\n}\nexport interface IFormVoOperations {\n  placeField: (placeLayerInfo: IFieldVoInfo, dragFieldInfo: IFieldVoInfo, noValidate?: boolean) => Promise<string[]>;\n  moveField: (placeLayerInfo: IFieldVoInfo, dragFieldInfo: IFieldVoInfo, noValidate?: boolean) => void;\n  deleteField: (\n    fieldId: string | string[],\n    contentFieldId: string | null,\n    deleteIndex: number | null,\n    e: any,\n    noValidate?: boolean\n  ) => Promise<boolean>;\n  copyField: (\n    fieldId: string,\n    contentFieldId: null | string,\n    innerIndex: number,\n    e: any,\n    noValidate: boolean\n  ) => Promise<string[]>;\n  selectField: (fieldId: string, e?: any) => void;\n}\n\n//drag容器的props\nexport interface IDragProps {\n  type?: string;\n  canDrag?: boolean;\n  uniquelySign: string | number;\n  title?: string;\n  className?: string;\n  style?: CSSProperties;\n  formDesignPerfixCls?: string;\n}\n\nexport interface IDropProps extends IFunctionProps {\n  fieldType?: string;\n  isDropContent: boolean;\n  type?: string;\n  contentFieldId?: string;\n  fieldId?: string;\n  isSelected?: boolean;\n  hasDelete?: boolean;\n  index?: number;\n  fieldName?: string;\n  nestedLevel?: number;\n  isFirstField?: boolean;\n  isLastField?: boolean;\n  accept?: string | string[];\n}\n\nexport type IFormDesignDataReduceProps = Omit<IFormDesignContextProps, \"changeField\">;\n\nexport interface ICommonProps {\n  className?: string;\n  style?: React.CSSProperties;\n  children?: React.ReactNode;\n  ref?: React.Ref<IFormDesignRef>;\n}\nexport interface IFormDesignRootProps extends ICommonProps {\n  formDesignId?: string;\n  formDesignPerfixCls?: string;\n}\n\nexport enum IChangeTypeProps {\n  add = \"add\",\n  move = \"move\",\n  delete = \"delete\",\n  copy = \"copy\",\n  select = \"select\",\n}\nexport interface IFormDesignDataProps extends ICommonProps {\n  templates: { [key: string]: any };\n  formVo?: IFieldVoInfo[];\n  fieldFunctionContorl?: (fieldInfo: IFieldVoInfo) => IFunctionProps;\n  customFieldAttrWithSetting?: <T>(key: string, attrs: T) => T;\n  customFieldsRules?: (fieldInfo: IFieldVoInfo, key: string, value: any) => Promise<string> | string;\n  manualContorlSchema?: <T extends { componentProps?: any; enum?: any[]; visible?: boolean }>(\n    schemaKey: string,\n    contorlField: T,\n    fieldInfo: any\n  ) => T;\n  onFormVoChange?: (changeType: IChangeTypeProps, fields?: string | string[] | IFieldVoInfo) => void;\n  onFieldChange?: (key: string, value: any) => void;\n  fieldKey?: string;\n  onChangeValidateInSetter?: (key: string, value: any, fieldInfo: any) => Promise<boolean> | boolean;\n  coustomPerview?: React.ComponentType<{ item: { uniquelySign?: string; [k: string]: any } }>;\n  extendMaskLayers?: { [key: string]: { uniquelySign: string; name: string; iconClass: string; [key: string]: any } };\n}\n\nexport interface IDataDeliverProps {\n  formDesignDataDiepatch: React.Dispatch<any>;\n  formDesignState: IFormDesignDataReduceProps;\n  formDesignId: string;\n}\n\nexport interface IFormDesignOperationsProps extends ICommonProps {\n  placeFieldValidate?: (dragFieldInfo: any, placeLayerInfo: any) => boolean;\n  createInnerFieldInfo?: (templateField: IFieldVoInfo, contentField: IFieldVoInfo) => any[] | any | void;\n  moveFieldValidate?: (dragFieldInfo: any, placeLayerInfo: any) => boolean;\n  deleteFieldValidate?: (operationField: any, contentField: any) => string[] | boolean | Promise<string[] | boolean>;\n  copyFieldValidate?: (operationField: any, contentField: any) => boolean;\n  createCopyFieldInfo?: (copyTemplateField: IFieldVoInfo, contentField: IFieldVoInfo) => any | void;\n}\n\nexport type IFormDesignProps = IFormDesignRootProps & IFormDesignDataProps & IFormDesignOperationsProps;\n\nexport interface IFormDesignRef {\n  validate: () => Promise<void>;\n  submit: () => Promise<IFieldVoInfo[]>;\n  getFieldsMap: () => IFieldVoInfo[];\n  setSelectFieldId: (id: string) => void;\n  getSelectFieldId: () => string | null;\n  deleteField: (deleteFieldId: string | string[], noValidate?: boolean) => Promise<boolean>;\n  addField: (uniquelySign: string, depandFieldId?: string | null, noValidate?: boolean) => Promise<string[]>;\n  changeFieldInfo: (fieldId: string, newField: any, cover?: boolean) => void;\n  resetSetterPane: () => void;\n  getSelectField: () => IFieldVoInfo;\n}\n\nexport interface ISimulatorWrapProps {\n  layout?: { labelCol?: number; wrapperCol?: number };\n  mode?: \"web\" | string;\n  SuffixFieldWidth?: number;\n  SuffixFieldDisplay?: React.ComponentType | ((props:any)=>JSX.Element);\n  expendFieldSimulate?: {\n    [key: string]: React.ComponentType;\n  };\n  noData?: React.ReactElement|React.ComponentType;\n}\n\nexport interface ISetterPaneOuterProps {\n  expandFields?: { [key: string]: any };\n  layout?: { labelCol: number; wrapperCol: number; span: number };\n  scope?: { [key: string]: any };\n  NoData?: React.ComponentType;\n  [key: string]: any;\n}\nexport interface ISetterPaneInteralProps extends Omit<ISetterPaneOuterProps, \"expandFields\" | \"layout\" | \"scope\"> {\n  formDesignId: string;\n  selectedFieldId: string;\n  createSchemaFieldParams: any;\n  fieldType: string;\n  fieldsMap: { [key: string]: any };\n  changeField: (fieldId: string, newField: any, cover: boolean) => void;\n}\n","export const STATIC = \"STATIC\";\nexport type STATIC = typeof STATIC;\n\nexport const BASE = \"BASE\";\nexport type BASE = typeof BASE;\n\nexport const CHANGE_FORMVO = \"CHANGE_FORMVO\";\nexport type CHANGE_FORMVO = typeof CHANGE_FORMVO;\n\nexport const INIT_FORMDESIGN = \"INIT_FORMDESIGN\";\nexport type INIT_FORMDESIGN = typeof INIT_FORMDESIGN;\n\nexport const PLACE_FIELD = \"PLACE_FIELD\";\nexport type PLACE_FIELD = typeof PLACE_FIELD;\n\nexport const DELETE_FIELD = \"DELETE_FIELD\";\nexport type DELETE_FIELD = typeof DELETE_FIELD;\n\nexport const BATCH_DELETE_FIELD = \"BATCH_DELETE_FIELD\";\nexport type BATCH_DELETE_FIELD = typeof BATCH_DELETE_FIELD;\n\nexport const MOVE_FIELD = \"MOVE_FIELD\";\nexport type MOVE_FIELD = typeof MOVE_FIELD;\n\nexport const SELECT_FIELD = \"SELECT_FIELD\";\nexport type SELECT_FIELD = typeof SELECT_FIELD;\n\nexport const COPY_FIELD = \"COPY_FIELD\";\nexport type COPY_FIELD = typeof COPY_FIELD;\n\nexport const CHANGE_FIELD = \"CHANGE_FIELD\";\nexport type CHANGE_FIELD = typeof CHANGE_FIELD;\n\nexport const CLEAR_FORMDESIGN = \"CLEAR_FORMDESIGN\";\nexport type CLEAR_FORMDESIGN = typeof CLEAR_FORMDESIGN;\n\nexport const CLEAR_SIMULATOR_WRAP = \"CLEAR_SIMULATOR_WRAP\";\nexport type CLEAR_SIMULATOR_WRAP = typeof CLEAR_SIMULATOR_WRAP;\n","import {\n  IFieldVoInfo,\n  IFormDesignContextProps,\n  IPostionInfoProps,\n} from \"../module\";\nimport { createForm, FormPath } from \"@formily/core\";\nimport { Schema, SchemaKey } from \"@formily/react\";\nimport { observable } from \"@formily/reactive\";\nimport { Parser } from \"@formily/path/esm/parser\";\n// 内部使用属性key 数据还原时清除\nconst exteaAttrs = [\"parId\", \"splitDownKeys\"];\nconst cloneParams = (data: any) =>\n  data === undefined || data === null || typeof data !== \"object\"\n    ? data\n    : JSON.parse(JSON.stringify(data));\nconst isObject = (data: any) =>\n  Object.prototype.toString.call(data) === \"[object Object]\";\n// 字段路径查找方法\nexport const getFieldPath = (\n  currentFieldId: string,\n  fieldsMap: { [key: string]: any }\n) => {\n  if (!currentFieldId) {\n    return [];\n  }\n  const parIds: string[] = [currentFieldId];\n  let currentLayer = fieldsMap[parIds[parIds.length - 1]];\n  while (currentLayer.parId) {\n    parIds.push(currentLayer.parId);\n    currentLayer = fieldsMap[parIds[parIds.length - 1]];\n  }\n  return parIds;\n};\n/**\n * 字段还原\n */\nconst recoverField = function <T extends IFieldVoInfo>(\n  this: any,\n  originField: T\n): T | null {\n  const targetData: any = {};\n  if (!originField || !isObject(originField)) {\n    return null;\n  }\n  const curTemplate = this.fieldInfoTemplate[originField.type];\n  if (!curTemplate) {\n    console.error(`${originField.type} template is not found`);\n  }\n  const splitDownKeys = Array.from(curTemplate?.splitDownKeys || []);\n  for (const key in originField) {\n    if (\n      !exteaAttrs.includes(key) &&\n      Object.prototype.hasOwnProperty.call(originField, key)\n    ) {\n      const element =\n        originField[key] === \"\" ? null : cloneParams(originField[key]);\n      const keys = key.replace(/(\\\"|\\')/g, \"\").split(\">\");\n      const realKey = keys.pop();\n      if (keys.length >= 1) {\n        if (keys.every((el) => splitDownKeys.includes(el))) {\n          const operationData = keys.reduce((acc, next) => {\n            if (!acc[next]) {\n              acc[next] = {};\n            }\n            return acc[next];\n          }, targetData);\n          operationData[realKey!] = element;\n        }\n      } else {\n        targetData[key] = element;\n      }\n    }\n  }\n  return targetData;\n};\n\n/**\n * 单个字段值拆分转化\n * @params fieldInfo 单个字段的各个属性值集合\n */\nconst transformField = function <T extends IFieldVoInfo>(\n  this: any,\n  fieldInfo: T,\n  parId: string | null\n): T | null {\n  const targetData: any = {};\n  if (!fieldInfo || !isObject(fieldInfo)) {\n    return null;\n  }\n  if (parId !== undefined) {\n    targetData.parId = parId;\n  }\n  const curTemplate = this.fieldInfoTemplate[fieldInfo.type];\n  if (!curTemplate) {\n    console.error(`${fieldInfo.type} template is not found`);\n  }\n  const splitDownKeys = Array.from(curTemplate?.splitDownKeys || []);\n  const iterativeObject = (data: any = {}, perKey: string = \"\") => {\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        const newKey = perKey ? perKey + \">\" + key : key;\n        const element = data[key];\n        if (splitDownKeys.includes(key) && isObject(element)) {\n          iterativeObject(element, newKey);\n        } else {\n          targetData[newKey] = cloneParams(element);\n        }\n      }\n    }\n  };\n  iterativeObject(fieldInfo);\n  return targetData;\n};\n/* 对传入的formVo做数据包装以便渲染 */\nconst transformFormVo = function (\n  this: any,\n  formVo: IFieldVoInfo[],\n  supInfo: any\n): Omit<\n  IFormDesignContextProps,\n  \"fieldsInfo\" | \"changeField\" | \"formDesignId\" | \"selectedFieldId\"\n> {\n  const {\n    fieldFunctionContorl,\n    transformField: curTransformField,\n    fieldKey,\n  } = this;\n  let outerFieldPostions: IPostionInfoProps[] = [];\n  const nestedFieldPostions: { [key: string]: IPostionInfoProps[] } = {};\n  const fieldsMap: { [key: string]: IFieldVoInfo } = {};\n  const iterativeMethods = (\n    interativeData: IFieldVoInfo[],\n    parId: string | null = null\n  ) =>\n    interativeData?.map((el: IFieldVoInfo) => {\n      const uniqueId = \"\" + el[fieldKey];\n      const { canDrag, canDel, canCopy, visible } =\n        fieldFunctionContorl?.(el) || {};\n      const currentFunctionCode = {\n        id: uniqueId,\n        canDrag: canDrag ?? true,\n        canDel: canDel ?? true,\n        canCopy: canCopy ?? true,\n        visible: visible ?? true,\n      };\n      fieldsMap[uniqueId] = currentFunctionCode.visible\n        ? curTransformField(el, parId)\n        : { ...el, parId };\n      if (el.items) {\n        nestedFieldPostions[uniqueId] = iterativeMethods(\n          el.items || [],\n          uniqueId\n        );\n      }\n      return currentFunctionCode;\n    });\n  outerFieldPostions = iterativeMethods(formVo);\n  return {\n    outerFieldPostions,\n    nestedFieldPostions,\n    fieldsMap,\n  };\n};\n\nconst getKeyFormParser = (originData: any) => {\n  originData = Array.isArray(originData) ? originData : [originData];\n  return originData.reduce((acc: any, next: any) => {\n    if (next.type === \"Identifier\") {\n      acc.push(next.value);\n    } else if (next.type === \"DestructorExpression\") {\n      if (next.value?.type === \"ArrayPattern\") {\n        acc.push(...getKeyFormParser(next.value.elements));\n      } else {\n        console.warn(\"parserType\", next.type);\n        console.warn(\"afterType\", next.value.type);\n      }\n    } else {\n      console.warn(\"otherType\", next.type);\n    }\n    return acc;\n  }, []);\n};\n\nconst splitTemplates = (templates: any) => {\n  const fieldInfoTemplate: any = {};\n  const fieldSetterTemplate: any = {};\n  if (templates) {\n    templates.forEach((item: any) => {\n      for (const key in item) {\n        if (Object.prototype.hasOwnProperty.call(item, key)) {\n          const schemaTemplate = item[key];\n          if (schemaTemplate) {\n            fieldInfoTemplate[key] = {\n              splitDownKeys: new Set(),\n              ...(schemaTemplate.initialValue || {}),\n            };\n            fieldSetterTemplate[key] = schemaTemplate;\n            const newSchema = mapSchema(\n              schemaTemplate,\n              (fieldkey, element: Schema & { initialValue?: any }) => {\n                const parser = new Parser(fieldkey as string).parse();\n                const hasInitialValue =\n                  element.initialValue !== undefined &&\n                  element.initialValue !== null;\n                getKeyFormParser(parser).forEach(\n                  (parserResult: string, i: number) => {\n                    const keys = parserResult\n                      .replace(/(\\\"|\\')/g, \"\")\n                      .split(\">\");\n                    if (keys.length > 1) {\n                      keys.pop();\n                      keys.forEach((el) =>\n                        fieldInfoTemplate[key].splitDownKeys.add(el)\n                      );\n                    }\n                    if (\n                      hasInitialValue &&\n                      (!element.type ||\n                        [\"void\", \"array\", \"object\"].includes(element.type!))\n                    ) {\n                      if (Array.isArray(element.initialValue)) {\n                        fieldInfoTemplate[key][parserResult] =\n                          element.initialValue[i];\n                      } else {\n                        fieldInfoTemplate[key][parserResult] =\n                          element.initialValue;\n                      }\n                    }\n                  }\n                );\n                delete element.initialValue;\n              }\n            );\n            fieldSetterTemplate[key] = newSchema.toJSON();\n          }\n        }\n      }\n    });\n  }\n  return { fieldInfoTemplate, fieldSetterTemplate };\n};\n\nconst dealWithCustomData = function (this: any, props: any, field: any) {\n  let { contorlTrigger } = field.data || {};\n  if (contorlTrigger) {\n    contorlTrigger = Array.isArray(contorlTrigger)\n      ? contorlTrigger\n      : [contorlTrigger];\n    contorlTrigger.forEach((triggerKey: string) => {\n      const oldFunc = props[triggerKey];\n      props[triggerKey] = (...params: any[]) => {\n        Promise.resolve(\n          this[`${triggerKey}ValidateInSetter`]?.(\n            field.props.name,\n            params[0],\n            this.recoverField(field.form.values)\n          ) ?? true\n        ).then((validateResult) => {\n          if (validateResult) {\n            oldFunc(...params);\n          }\n        });\n      };\n    });\n  }\n  return { ...props };\n};\n\nexport const mapSchema = (\n  schema: any,\n  callback?: (\n    key: SchemaKey,\n    item: Schema,\n    basePath: FormPath,\n    perCBResult: any\n  ) => any\n) => {\n  schema = new Schema(Object.assign({ type: \"object\" }, schema));\n  const Schemaiterator = (\n    currentSchema: Schema,\n    basePath = new FormPath(\"\"),\n    perCBResult = {}\n  ) => {\n    currentSchema.mapProperties((item, key, index) => {\n      const address = basePath.concat(key);\n      if (key === undefined || key === null) {\n        Schemaiterator(item, basePath);\n      } else {\n        // 回调操作\n        const result = callback?.(key, item, basePath, perCBResult);\n        if (item.type && [\"object\", \"void\"].includes(item.type)) {\n          Schemaiterator(item, address, result);\n        }\n      }\n    });\n  };\n  Schemaiterator(schema);\n  return schema;\n};\n// 单个字段数据层面提交并校验\nexport const singleFieldValidate = (\n  fieldInfo: any,\n  schema: any,\n  supInfo: any\n) => {\n  const { createSchemaFieldParams: options } = supInfo;\n  schema = new Schema(schema);\n  const form = createForm({ initialValues: fieldInfo, validateFirst: true });\n  mapSchema(schema, (key, item, basePath) => {\n    const fieldProps = item.toFieldProps(options);\n    const createParams = Object.assign({}, fieldProps, { name: key, basePath });\n    let field;\n    if (item.type === \"object\") {\n      field = form.createObjectField(createParams);\n    } else if (item.type === \"array\") {\n      field = form.createArrayField(createParams);\n    } else if (item.type === \"void\") {\n      field = form.createVoidField(createParams);\n    } else {\n      field = form.createField(createParams);\n    }\n    if (field) {\n      if (field.display === \"none\") {\n        form.deleteValuesIn(key);\n        field.destroy();\n      }\n    }\n  });\n  form.onMount();\n  return form.submit().finally(() => {\n    form.onUnmount();\n  });\n};\n\nexport const getFieldsMap = (state: any, recoverFieldFunc: any) => {\n  const { outerFieldPostions, nestedFieldPostions, fieldsMap } = state;\n  const iterativeOperation = (operationArr: any[]) =>\n    operationArr.reduce((acc, { id, visible }) => {\n      let element = fieldsMap[id];\n      if (visible) {\n        element = recoverFieldFunc(element);\n        if (nestedFieldPostions[id]) {\n          element.items = iterativeOperation(nestedFieldPostions[id]);\n        }\n        acc.push(element);\n      }\n      return acc;\n    }, []);\n  return iterativeOperation(outerFieldPostions);\n};\n\nexport const validate = (\n  state: any,\n  supInfo: any,\n  returnSuccess: boolean = false\n) => {\n  const { fieldsMap, outerFieldPostions, nestedContainerFieldPostions } = state;\n  const { fieldSetterTemplate } = supInfo;\n  const result = Object.entries(fieldsMap).reduce(\n    (acc: any[], [key, fieldInfo]: any) => {\n      if (!fieldInfo) {\n        return acc;\n      } else {\n        const parId = fieldInfo?.parId;\n        const { visible } = (\n          parId ? nestedContainerFieldPostions[parId] : outerFieldPostions\n        ).filter((el: any) => el.id === key)[0];\n        const schema = fieldSetterTemplate[fieldInfo.type] ?? null;\n        if (!visible) {\n          acc.push([key, fieldInfo]);\n        } else if (schema) {\n          acc.push(\n            singleFieldValidate(fieldInfo, schema, supInfo).then(\n              (r) => [key, r],\n              (j) => {\n                throw [key, j];\n              }\n            )\n          );\n        } else {\n          acc.push(\n            Promise.reject([\n              key,\n              [\n                {\n                  code: \"schemaError\",\n                  messages: fieldInfo.type\n                    ? `${key}字段类型为不存在`\n                    : `${key}的类型为${fieldInfo.type}的schema缺失`,\n                },\n              ],\n            ])\n          );\n        }\n      }\n      return acc;\n    },\n    []\n  );\n  return Promise.allSettled(result).then((validateData) => {\n    const validateResult = validateData.reduce(\n      (acc: { error: any[]; success: any }, { status, value, reason }: any) => {\n        if (status === \"rejected\") {\n          acc.error.push({ [reason[0]]: reason[1] });\n        } else {\n          acc.success[value[0]] = value[1];\n        }\n        return acc;\n      },\n      { error: [], success: {} }\n    );\n    if (validateResult.error.length) {\n      throw validateResult.error;\n    } else if (returnSuccess) {\n      return validateResult.success;\n    }\n  });\n};\n\nexport const submit = (state: any, supInfo: any) =>\n  validate(state, supInfo, true).then((fieldsMap: any) => {\n    const { outerFieldPostions, nestedFieldPostions } = state;\n    const iterativeOperation = (operationArr: any[]) =>\n      operationArr.reduce((acc, { id, visible }) => {\n        const element = visible\n          ? supInfo.recoverField(fieldsMap[id])\n          : fieldsMap[id];\n        if (nestedFieldPostions[id]) {\n          element.items = iterativeOperation(nestedFieldPostions[id]);\n        }\n        acc.push(element);\n        return acc;\n      }, []);\n    return iterativeOperation(outerFieldPostions);\n  });\n\n// 前置操作添加唯一id\nexport const createNewFieldHandle = (innerField: any, supInfo: any) => {\n  const { fieldInfoTemplate, fieldKey } = supInfo;\n  const ids: string[] = [];\n  const fields = (Array.isArray(innerField) ? innerField : [innerField]).map(\n    (element: any) => {\n      const { items, ...otherProps } = element;\n      const id =\n        element[fieldKey] ?? Math.random().toString(36).slice(-8) + +new Date();\n      const { title } = fieldInfoTemplate[otherProps.type] || {};\n      // 创建的时候清除 title id\n      const targetData: any = {\n        ...otherProps,\n        id,\n        [fieldKey]: id,\n        title,\n      };\n      if (items && Array.isArray(items)) {\n        targetData.items = createNewFieldHandle(items, fieldInfoTemplate);\n      }\n      ids.push(id);\n      return targetData;\n    }\n  );\n  return [fields, ids];\n};\n\n\nexport class FormDesignSupInfo {\n  static [key:string]:any\n  static initSupInfo(formDesignId: string, supInfo: any = {}) {\n    const {\n      fieldFunctionContorl,\n      templates,\n      extendMaskLayers,\n      ...otherSupInfo\n    } = supInfo;\n    console.log('initSupInfo',templates)\n    const templateData = splitTemplates(templates);\n    this[formDesignId] = {\n      mounted: true,\n      fieldFunctionContorl,\n      ...otherSupInfo,\n      ...templateData,\n      dndMaskLayerTemplates: observable(extendMaskLayers || {}),\n      extendMaskLayers,\n    };\n    Object.assign(this[formDesignId], {\n      transformField: transformField.bind(this[formDesignId]),\n      recoverField: recoverField.bind(this[formDesignId]),\n      transformFormVo: transformFormVo.bind(this[formDesignId]),\n      dealWithCustomData: dealWithCustomData.bind(this[formDesignId]),\n    });\n  }\n  static changeSupInfo(formDesignId: string, newSupInfo: any = {}) {\n    if (this[formDesignId]) {\n      const { mounted, unMounted, ...otherData } = this[formDesignId];\n      // this[formDesignId].cache = (this[formDesignId].cache || []).concat(cloneDeep(otherData));\n      const newData = FormDesignSupInfo.diffChange(otherData, newSupInfo);\n      Object.assign(this[formDesignId], newData);\n    }\n  }\n\n  static deleteSupInfo(formDesignId: string) {\n    if (this[formDesignId]) {\n      Object.assign(this[formDesignId], { unMounted: true });\n    }\n  }\n\n  static diffChange(perData: any, newData: any) {\n    const { templates, splitDownKeys, dndMaskLayerTemplates, ...otherProps } =\n      newData;\n    const targetData: any = otherProps;\n    if (templates && perData.templates !== templates) {\n    console.log('diffChange',templates)\n      Object.assign(targetData, splitTemplates(templates));\n    }\n    return targetData;\n  }\n}\n","import React from 'react'\nimport { cloneDeep, uniqueId } from 'lodash'\nimport { observable } from '@formily/reactive'\nimport { IFormDesignContextProps, IFormDesignRootProps, IFormVoOperations, IFormDesignDataProps, IFormDesignOperationsProps, IDataDeliverProps, IFormDesignProps, ICommonProps, IFormDesignRef } from '../module'\nimport formDesignDataReducer, { defaultState } from './form-design-reducer'\nimport { createNewFieldHandle, FormDesignSupInfo } from './common'\nimport * as constants from '../constants'\n/* form design style ctx */\nconst defaultRootContext = { formDesignPerfixCls: \"mortale-form-design\", formDesignId: \"\" }\n\nexport const FormDesignRootContext = React.createContext<IFormDesignRootProps>(defaultRootContext)\n\nconst RootContextWrapper = (InnerComponent: React.ComponentType<IFormDesignRootProps>) => {\n  return React.forwardRef<IFormDesignRef, IFormDesignRootProps>((props, ref) => {\n    const { formDesignPerfixCls, ...otherProps } = props\n    const rootContextValue = React.useMemo(() => {\n      const targetData = { ...defaultRootContext }\n      if (formDesignPerfixCls) {\n        targetData.formDesignPerfixCls = formDesignPerfixCls\n      }\n      targetData.formDesignId = uniqueId(`${targetData.formDesignPerfixCls}-`)\n      return targetData\n    }, [formDesignPerfixCls])\n\n    return <FormDesignRootContext.Provider value={rootContextValue}>\n      <InnerComponent\n        {...otherProps}\n        {...rootContextValue}\n        ref={ref} />\n    </FormDesignRootContext.Provider>\n  })\n}\n\n/* form design data ctx */\nexport const FormDesignDataContext = React.createContext<IFormDesignContextProps>(defaultState as any)\n\nconst dataContextWrapper = (InnerComponent: React.ComponentType<Omit<IFormDesignDataProps, \"templates\"> & IDataDeliverProps>) => {\n  // 校验是否结束需要滚动到错误位置\n  return React.forwardRef<IFormDesignRef, IFormDesignDataProps & { formDesignId: string }>((props, ref) => {\n    const { formVo, templates, fieldFunctionContorl, formDesignId, customFieldAttrWithSetting, customFieldsRules, manualContorlSchema, onFormVoChange, onFieldChange, onChangeValidateInSetter, extendMaskLayers, fieldKey = \"id\", coustomPerview, ...otherProps } = props\n    // formDesign 状态\n    const [formDesignLifeStatus] = React.useState({ mounted: false, unMounted: false })\n    const [state, dispatch] = React.useReducer(formDesignDataReducer, cloneDeep(defaultState))\n\n    React.useEffect(() => {\n      formDesignLifeStatus.mounted = true\n      Promise.resolve().then(() => {\n        FormDesignSupInfo.initSupInfo(formDesignId, {\n          fieldFunctionContorl,\n          customFieldAttrWithSetting,\n          templates,\n          customFieldsRules,\n          validateWithScrollSign: observable.ref(\"\"),\n          manualContorlSchema,\n          onFormVoChange,\n          onFieldChange,\n          onChangeValidateInSetter,\n          fieldKey,\n          CoustomPerView: coustomPerview,\n          extendMaskLayers\n        })\n        dispatch({ type: constants.INIT_FORMDESIGN, formDesignId })\n      }).finally(() => {\n        // TODO mount\n        if (formVo?.length) {\n          dispatch({ type: constants.CHANGE_FORMVO, formVo })\n        }\n      })\n      return () => {\n        Promise.resolve().then(() => {\n          FormDesignSupInfo.deleteSupInfo(formDesignId)\n          formDesignLifeStatus.unMounted = true\n          dispatch({ type: constants.CLEAR_FORMDESIGN })\n        }).finally(() => {\n          // TODO unmount\n        })\n      }\n    }, [])\n    // 修改FormDesign对应formDesignId的静态数据（此类数据改变不需要引起视图的刷新，如果需要需要走其他操作）\n    React.useEffect(() => {\n      if (formDesignLifeStatus.mounted) {\n        FormDesignSupInfo.changeSupInfo(formDesignId, {\n          fieldFunctionContorl,\n          customFieldAttrWithSetting,\n          customFieldsRules,\n          templates,\n          manualContorlSchema,\n          onFormVoChange,\n          onFieldChange,\n          CoustomPerView: coustomPerview\n        })\n      }\n    }, [templates, fieldFunctionContorl, customFieldAttrWithSetting, customFieldsRules, manualContorlSchema, onFormVoChange, onFieldChange, coustomPerview])\n    // 设置formVo\n    React.useEffect(() => {\n      const supInfo = FormDesignSupInfo[formDesignId]\n      if (supInfo) {\n        dispatch({ type: constants.CHANGE_FORMVO, formVo })\n      }\n      if (state.selectedFieldId) {\n        if (supInfo?.resetSetterPaneValue) {\n          supInfo.resetSetterPaneValue.value = supInfo.resetSetterPaneValue.value + 1\n        }\n        if (supInfo?.resetSetterPaneSchema) {\n          supInfo.resetSetterPaneSchema.value = supInfo.resetSetterPaneSchema.value + 1\n        }\n      }\n    }, [formVo])\n    // 修改单个字段的属性\n    const changeField = React.useCallback((fieldId:string, newFieldInfo:string, cover:boolean = false) => {\n      dispatch({ type: constants.CHANGE_FIELD, fieldId, newFieldInfo, cover })\n    }, [])\n\n    const dataContextValue = React.useMemo(() => ({ ...state, changeField }), [state, changeField])\n\n    return <FormDesignDataContext.Provider value={dataContextValue}>\n      <InnerComponent {...otherProps}\n        formDesignDataDiepatch={dispatch}\n        formDesignState={state}\n        formDesignId={formDesignId}\n        ref={ref} />\n    </FormDesignDataContext.Provider>\n  })\n}\n\n/* field operations ctx */\nexport const FieldOperationsContext = React.createContext<IFormVoOperations>({\n  placeField: () => Promise.resolve([]),\n  moveField: () => { },\n  deleteField: () => Promise.resolve(true),\n  copyField: () => Promise.resolve([]),\n  selectField: () => { }\n})\n\nconst operationsContextWrapper = (InnerComponent: React.ComponentType<ICommonProps>) => {\n  return React.forwardRef<IFormDesignRef, IFormDesignOperationsProps & IDataDeliverProps>((props, ref) => {\n    const { formDesignState, formDesignDataDiepatch, placeFieldValidate, createInnerFieldInfo, moveFieldValidate, deleteFieldValidate, copyFieldValidate, createCopyFieldInfo, formDesignId, ...otherProps } = props\n\n    const validateOperation = React.useCallback((noValidate:any, contentInfo:any, operationInfo:any, validateFunc:any) => {\n      const supInfo = FormDesignSupInfo[formDesignId]\n      const operationField = supInfo.recoverField?.(formDesignState.fieldsMap[operationInfo.id])\n      const contentField = supInfo.recoverField?.(formDesignState.fieldsMap[contentInfo.id])\n      return Promise.resolve(noValidate || (validateFunc?.({ ...operationField, ...operationInfo }, { ...contentField, ...contentInfo }) ?? true)).then((validateResult) => ({\n        validateResult, operationField,\n        contentField\n      }))\n    }, [])\n\n    // 放置事件\n    const placeField = React.useCallback(({ type: dropType, ...placeLayerInfo }: any, { type: dragType, ...dragFieldInfo }: any, noValidate: boolean = false) => {\n      const supInfo = FormDesignSupInfo[formDesignId]\n      // 校验\n      return Promise.resolve(validateOperation(noValidate, placeLayerInfo, dragFieldInfo, placeFieldValidate)).then(({ validateResult, operationField, contentField }) => {\n        if (validateResult) {\n          console.log(supInfo,formDesignId,111)\n          // 创建新字段内容\n          const { splitDownKeys, ...templateField } = cloneDeep(supInfo.fieldInfoTemplate[dragFieldInfo.uniquelySign])\n          if (!templateField) {\n            console.error(`${dragFieldInfo.uniquelySign}类型字段不存在`);\n          }\n          return Promise.resolve(createInnerFieldInfo?.(templateField, contentField) || templateField).then((innerField) => {\n            const [fields, ids] = createNewFieldHandle(innerField, supInfo);\n            formDesignDataDiepatch({ type: constants.PLACE_FIELD, innerField: fields, placeLayerInfo, dragFieldInfo })\n            return ids\n          })\n        } else {\n          return []\n        }\n      })\n    }, [placeFieldValidate, createInnerFieldInfo])\n    // 移动事件\n    const moveField = React.useCallback(({ type: dropType, ...placeLayerInfo }: any, { type: dragType, ...dragFieldInfo }: any, noValidate: boolean = false) => {\n      Promise.resolve(validateOperation(noValidate, placeLayerInfo, dragFieldInfo, moveFieldValidate)).then(({ validateResult, operationField, contentField }) => {\n        if (validateResult) {\n          formDesignDataDiepatch({ type: constants.MOVE_FIELD, placeLayerInfo, dragFieldInfo })\n        }\n      })\n    }, [moveFieldValidate])\n    // 删除事件\n    const deleteField = React.useCallback((fieldId: string | string[], contentFieldId: string | null, deleteIndex: number | null, e: any, noValidate: boolean = false) => {\n      e?.stopPropagation()\n      return Promise.resolve(validateOperation(noValidate, { id: contentFieldId }, { id: fieldId }, deleteFieldValidate)).then(({ validateResult, operationField, contentField }) => {\n        let dispatchParams: any\n        let isBatchDel = false\n        if (Array.isArray(validateResult)) {\n          if (validateResult?.length) {\n            dispatchParams = { fieldId: validateResult }\n            isBatchDel = true\n          }\n        } else if (validateResult) {\n          // TODO 内置方法处理需要联动多个字段同时删除的情况\n          if (Array.isArray(fieldId) && fieldId?.length) {\n            dispatchParams = { deleteIds: fieldId }\n            isBatchDel = true\n          } else {\n            dispatchParams = { fieldId, deleteIndex, contentFieldId }\n          }\n        }\n        return { isBatchDel, dispatchParams }\n      }).then(({ isBatchDel, dispatchParams }) => {\n        let deleteResult = false\n        if (dispatchParams) {\n          if (isBatchDel) {\n            formDesignDataDiepatch({ type: constants.BATCH_DELETE_FIELD, ...dispatchParams })\n          } else {\n            formDesignDataDiepatch({ type: constants.DELETE_FIELD, ...dispatchParams })\n          }\n          deleteResult = true\n        }\n        return deleteResult\n      })\n    }, [deleteFieldValidate])\n    // 选中事件\n    const selectField = React.useCallback((selectId: string, e?: any) => {\n      e?.stopPropagation()\n      formDesignDataDiepatch({ type: constants.SELECT_FIELD, selectId })\n    }, [])\n    // 复制事件\n    const copyField = React.useCallback((copyFieldId: string, contentFieldId: string | null, innerIndex: number, e: any, noValidate: boolean = false) => {\n      e?.stopPropagation()\n      const supInfo = FormDesignSupInfo[formDesignId]\n      return Promise.resolve(validateOperation(noValidate, { id: contentFieldId }, { id: copyFieldId }, copyFieldValidate)).then(({ validateResult, operationField, contentField }) => {\n        if (validateResult) {\n          return Promise.resolve(createCopyFieldInfo?.(operationField, contentField) || operationField).then((field) => {\n            const [fields, ids] = createNewFieldHandle(field, supInfo);\n            formDesignDataDiepatch({\n              type: constants.COPY_FIELD,\n              contentFieldId,\n              innerIndex,\n              copyField: fields\n            })\n            return ids\n          })\n        } else {\n          return []\n        }\n      })\n    }, [validateOperation, copyFieldValidate, createCopyFieldInfo])\n    const operationsContextValue = React.useMemo(() => ({ placeField, moveField, deleteField, selectField, copyField }), [])\n    return <FieldOperationsContext.Provider value={operationsContextValue}>\n      <InnerComponent {...otherProps} ref={ref} />\n    </FieldOperationsContext.Provider>\n  })\n}\n\ntype FCType<T> = React.FC<T>\ntype FCwithCtxType<T> = T extends FCType<infer U> ? U : any\nconst ContextsWrapper = <T,>(ctxWraps: Array<(InnerComponent: React.ElementType) => React.FC>) => <P extends FCwithCtxType<T>,>(InnerComponent: React.ComponentType<P>) => ctxWraps.reduceRight((acc, ctxWrap) => ctxWrap(acc), InnerComponent)\n//@ts-ignore\nconst FormDesignProviderWrapper = ContextsWrapper<IFormDesignProps>([RootContextWrapper, dataContextWrapper, operationsContextWrapper])\n\nexport {\n  FormDesignProviderWrapper\n}","import * as  React from 'react'\nimport cs from 'classnames'\nimport memoized from 'memoize-one';\nimport { useDrag, useDrop } from 'react-dnd'\nimport { DeleteOutlined, CopyOutlined } from '@ant-design/icons'\nimport { FieldOperationsContext, FormDesignRootContext } from './context-wrapper'\nimport * as constants from '../constants'\nimport { IDropProps } from '../module'\n\n// memo\nconst funcMemo = memoized((targetFunc: any, ...params: any) => (...otherParams: any) => targetFunc(...params, ...otherParams)\n)\n\nenum postions {\n    top = \"top\",\n    bottom = \"bottom\",\n    left = \"left\",\n    right = \"right\",\n    none = \"\"\n}\n\nconst useDnd = (isDropContent: boolean, { placeField, moveField, selectField, type, accept, canDrag = true, formDesignPerfixCls }: {\n    placeField: (dragField: any, dropField: any, noValidate?: boolean) => Promise<string[]>,\n    moveField: (dragField: any, dropField: any, noValidate?: boolean) => void,\n    selectField: (fieldId: string) => void,\n    type: string,\n    accept: string | string[]\n    canDrag?: boolean,\n    formDesignPerfixCls?: string\n}, { contentFieldId, fieldId, index, }: any): [React.MutableRefObject<any>, boolean, { show: boolean, sign: postions }] => {\n\n    const [locationMarker, setLocationMarker] = React.useState<{ show: boolean, sign: postions }>({ show: false, sign: postions.none })\n\n    const ref = React.useRef<any>(null)\n\n    const [dragCollectData, connectDrag, connectDragPreview] = useDrag({\n        item: { type, id: fieldId, contentFieldId, dragIndex: index },\n        canDrag,\n        collect: monitor => ({\n            isDragging: monitor.isDragging(),\n        })\n    })\n\n    const getArea = React.useCallback((eventPostions: { [key in \"x\" | \"y\"]: number }, contentInfo: DOMRect) => {\n        const { top, height, bottom } = contentInfo\n        const { y } = eventPostions\n        if (y - top < 0 || bottom - y < 0) {\n            return\n        }\n        const newLocationMarker = { show: true, sign: y - top <= height / 2 ? postions.top : postions.bottom }\n        if (locationMarker.show !== newLocationMarker.show || locationMarker.sign !== newLocationMarker.sign) {\n            setLocationMarker(newLocationMarker)\n        }\n    }, [locationMarker])\n\n    const [dropCollectData, connectDrop] = useDrop({\n        accept,\n        drop: (item, monitor) => {\n            const dropResult = monitor.getDropResult()\n            const isOverCurrent = monitor.isOver({ shallow: false })\n\n            const { id: draggedId } = monitor.getItem()\n            if (!dropResult && isOverCurrent) {\n                if (!draggedId) { //收集到的dragItem无id说明是新字段\n                    const targetIndex = typeof index !== \"number\" || [postions.top, postions.left].includes(locationMarker.sign) ? index : index + 1\n                    placeField({ type, id: fieldId, contentFieldId, dropIndex: targetIndex }, item).then((ids) => {\n                        if (ids.length) {\n                            selectField(ids[0])\n                        }\n                    })\n                } else { //有id 说明是以生成的字段实例\n                    const targetIndex = typeof index !== \"number\" || [postions.bottom, postions.right].includes(locationMarker.sign) ? index : index - 1\n                    moveField?.({ type, id: fieldId, contentFieldId, dropIndex: targetIndex }, item)\n                }\n            }\n        },\n        hover: (item: any, monitor: any) => {\n\n            if ((item?.id !== fieldId || isDropContent) && monitor.isOver({ shallow: true }) && ref.current) {\n                const clientOffset = monitor.getClientOffset()\n                const contentInfo = ref.current.getBoundingClientRect()\n                /* \n                1.item?.parId !== parId 非同级不展示标记线\n                2. item.id && [item.index, item.index + 1].includes(clientOffset.y - contentInfo.top <= contentInfo.height / 2 ? index : index + 1))\n                移动事件结果在同一位置不展示标记线\n                */\n                if (item.id && [item.index, item.index + 1].includes(clientOffset.y - contentInfo.top <= contentInfo.height / 2 ? index : index + 1)) {\n                    return\n                }\n                getArea(clientOffset, contentInfo)\n            }\n        },\n        //经过可放下区域时触发\n        //收集函数  \n        collect: (monitor: any) => ({\n            isOver: monitor.isOver(),\n            isOverCurrent: monitor.isOver({ shallow: true }),\n            clientOffset: monitor.getClientOffset()\n        })\n    })\n\n    React.useEffect(() => {\n        if (!isDropContent) {\n            connectDrag(ref)\n            connectDragPreview(document.getElementById(`${formDesignPerfixCls}-faker-perview`))\n        }\n        connectDrop(ref)\n    }, [ref, isDropContent])\n\n    React.useEffect(() => {\n        let timeCount: any\n        if (locationMarker.show && !dropCollectData.isOverCurrent) {\n            timeCount = setTimeout(() => {\n                clearTimeout(timeCount)\n                setLocationMarker({ show: false, sign: postions.none })\n            }, 32)\n        }\n        return () => {\n            if (timeCount) {\n                clearTimeout(timeCount)\n            }\n        }\n    }, [locationMarker, dropCollectData.isOverCurrent])\n\n    return [ref, dragCollectData.isDragging, locationMarker]\n}\n\nconst ContentDrop = React.forwardRef<any, any>(({ children, contentFieldId, formDesignPerfixCls }, ref) => {\n    return <div className={`${formDesignPerfixCls}-drop-content`} style={{ zIndex: contentFieldId ? 11 : 1 }} ref={ref}>\n        {children}\n    </div>\n})\n\nconst FieldDragWithDrop = React.forwardRef<any, any>(({ children, contentFieldId, fieldId, isSelected, deleteField, selectField, copyField, canDel, canCopy, isDragging, isFirstField, isLastField, locationMarker, formDesignPerfixCls }, ref) => {\n\n    const hoverClassName = `${formDesignPerfixCls}-form-item-hover`\n    const MouseOver = (e: any) => {\n        e.stopPropagation()\n            ; (ref as any).current?.children[0].classList.add(hoverClassName)\n    }\n    const MouseOut = (e: any) => {\n        e.stopPropagation()\n            ; (ref as any).current?.children[0].classList.remove(hoverClassName)\n    }\n    const wrapperDeleteField = React.useCallback((e: any) => deleteField(e), [deleteField])\n    const wrappercopyField = React.useCallback((e: any) => copyField(e), [copyField])\n\n    return <div\n        id={fieldId}\n        ref={ref}\n        className={`${formDesignPerfixCls}-field-dnd-wrapper`}\n    >\n        <div\n            className={cs({\n                [`${formDesignPerfixCls}-field-active`]: isSelected,\n                [`${formDesignPerfixCls}-first-field`]: isFirstField,\n                [`${formDesignPerfixCls}-last-field`]: isLastField,\n                [`${formDesignPerfixCls}-field-dragging`]: isDragging,\n                [`${formDesignPerfixCls}-location-${locationMarker.sign}-marker`]: locationMarker.show && locationMarker.sign,\n            })}\n            onClick={selectField}\n            onMouseOver={MouseOver}\n            onMouseOut={MouseOut}\n        >\n            <div className={`${formDesignPerfixCls}-field-border`}>\n                <div className={`${formDesignPerfixCls}-field-operation-area`} >\n                    <span>\n                        {canCopy && <CopyOutlined onClick={wrappercopyField as any} />}\n                    </span>\n                    <span>\n                        {canDel && <DeleteOutlined onClick={wrapperDeleteField as any} />}\n                    </span>\n                </div>\n                {children}\n            </div>\n        </div>\n    </div>\n})\n\nconst Drop: React.FC<React.PropsWithChildren<IDropProps>> = ({ isDropContent = false, accept = constants.BASE, type = constants.BASE, children, fieldId, index, contentFieldId, ...props }) => {\n\n    const { formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n\n    const { placeField, moveField, selectField, deleteField, copyField } = React.useContext(FieldOperationsContext)\n\n    const newSelectField = funcMemo(selectField, fieldId)\n\n    const newDeleteField = funcMemo(deleteField, fieldId, contentFieldId, index)\n\n    const newCopyField = funcMemo(copyField, fieldId, contentFieldId, index)\n\n    const [ref, isDragging, locationMarker] = useDnd(isDropContent, { placeField, moveField, selectField, type, accept, canDrag: props.canDrag, formDesignPerfixCls }, {\n        contentFieldId,\n        fieldId,\n        index\n    })\n\n    const TargetComponent = React.useMemo(() => isDropContent ? ContentDrop : FieldDragWithDrop, [isDropContent])\n\n    return <TargetComponent\n        ref={ref}\n        {...props}\n        formDesignPerfixCls={formDesignPerfixCls}\n        fieldId={fieldId}\n        contentFieldId={contentFieldId}\n        selectField={newSelectField}\n        deleteField={newDeleteField}\n        copyField={newCopyField}\n        isDragging={isDragging}\n        locationMarker={locationMarker}\n    >\n        {children}\n    </TargetComponent>\n}\n\nexport default Drop\n","import { cloneDeep, findLastIndex } from \"lodash\";\nimport { getFieldPath, FormDesignSupInfo } from \"./common\";\nimport * as constants from \"../constants\";\nimport { IChangeTypeProps, IFormDesignDataReduceProps, IPostionInfoProps } from \"../module\";\n\nconst deleteObjectParams = (originData: { [key: string]: any }, key: string) => {\n  originData[key] = undefined;\n};\n\nexport const defaultState: IFormDesignDataReduceProps = {\n  formDesignId: \"\",\n  outerFieldPostions: [],\n  nestedFieldPostions: {},\n  fieldsMap: {},\n  selectedFieldId: null,\n};\n\n/* place */\n\n// 处理放置\nconst dealWithPlace = ({ innerField, placeLayerInfo, dragFieldInfo }: any, state: any, supInfo: any) => {\n  const { contentFieldId, dropIndex } = placeLayerInfo;\n  const operationData = contentFieldId\n    ? state.nestedFieldPostions[contentFieldId] ||\n      ((state.nestedFieldPostions[contentFieldId] = []), state.nestedFieldPostions[contentFieldId])\n    : state.outerFieldPostions;\n  const targetIndex = dropIndex || findLastIndex(operationData, (el: any) => el.visible) + 1;\n  const result = supInfo.transformFormVo?.(innerField);\n\n  operationData.splice(targetIndex, 0, ...result.outerFieldPostions);\n  contentFieldId\n    ? (state.nestedFieldPostions[contentFieldId] = [...operationData])\n    : (state.outerFieldPostions = [...operationData]);\n\n  Object.assign(state.fieldsMap, result.fieldsMap);\n\n  Object.assign(state.nestedFieldPostions, result.nestedFieldPostions);\n};\n\n/* copy */\nconst dealWithCopy = ({ contentFieldId, copyField, innerIndex }: any, state: any, supInfo: any) => {\n  // 执行创建新字段的统一操作\n  const result = supInfo.transformFormVo?.(copyField);\n\n  const operationData = contentFieldId ? state.nestedFieldPostions[contentFieldId] : state.outerFieldPostions;\n\n  operationData.splice(innerIndex + 1, 0, ...result.outerFieldPostions);\n  contentFieldId\n    ? (state.nestedFieldPostions[contentFieldId] = [...operationData])\n    : (state.outerFieldPostions = [...operationData]);\n\n  Object.assign(state.nestedFieldPostions, result.nestedFieldPostions);\n\n  Object.assign(state.fieldsMap, result.fieldsMap);\n};\n/* move */\nconst dealWithMoveOperationData = (\n  opreationData: any[],\n  innerField: { index?: number; id: string } = { id: \"\" },\n  removeField: { index?: number } = {}\n): any => {\n  const { index: innerIndex, id: innerFieldId } = innerField;\n  const { index: removeIndex } = removeField;\n  const initAcc: any[] = [];\n  const innerFieldInfo = opreationData.filter((el: any) => el.id === innerFieldId)[0];\n  // 操作数组是空数组 或者 判定落点在头部\n  if (!opreationData.length || innerIndex === -1) {\n    initAcc.push(innerFieldInfo);\n  }\n  const result = opreationData.reduce((acc: any[], next: any, i: number) => {\n    if (i !== removeIndex) {\n      acc.push(next);\n    }\n    if (i === innerIndex && innerFieldInfo) {\n      acc.push(innerFieldInfo);\n    }\n    return acc;\n  }, initAcc);\n  // 判定落点在可见数组的最后\n  if (innerFieldInfo && innerIndex === undefined) {\n    const targetIndex = findLastIndex(result, (el: any) => el.visible) + 1;\n    result.splice(targetIndex, 0, innerFieldInfo);\n  }\n  return result;\n};\nconst dealWithMove = (\n  { placeLayerInfo, dragFieldInfo }: any,\n  { nestedContainerFieldPostions, outerFieldPostions }: any\n) => {\n  const { id: dragId, contentFieldId: dragContentFieldId, dragIndex } = dragFieldInfo;\n  const { contentFieldId: dropContentFieldId, dropIndex } = placeLayerInfo;\n  let addOperationData = dropContentFieldId ? nestedContainerFieldPostions[dropContentFieldId] : outerFieldPostions;\n  let removeOperationData = dragContentFieldId ? nestedContainerFieldPostions[dragContentFieldId] : outerFieldPostions;\n  let changeParams: any[] = [];\n  if (addOperationData === removeOperationData) {\n    //操作同一个字段组\n    addOperationData = dealWithMoveOperationData(\n      addOperationData,\n      { index: dropIndex, id: dragId },\n      { index: dragIndex }\n    );\n    changeParams = [addOperationData];\n  } else {\n    //操作不同的字段组\n    //添加操作\n    addOperationData = dealWithMoveOperationData(addOperationData, {\n      index: dropIndex || addOperationData.length - 1,\n      id: dragId,\n    });\n    //移除操作\n    removeOperationData = dealWithMoveOperationData(removeOperationData, undefined, {\n      index: dragIndex,\n    });\n    changeParams = [addOperationData, removeOperationData];\n  }\n  switch (changeParams.length) {\n    case 1:\n      dropContentFieldId\n        ? (nestedContainerFieldPostions[dropContentFieldId] = changeParams[0])\n        : (outerFieldPostions = changeParams[0]);\n      return { nestedContainerFieldPostions, outerFieldPostions };\n    case 2:\n      dropContentFieldId\n        ? (nestedContainerFieldPostions[dropContentFieldId] = changeParams[0])\n        : (outerFieldPostions = changeParams[0]);\n      dragContentFieldId\n        ? (nestedContainerFieldPostions[dragContentFieldId] = changeParams[1])\n        : (outerFieldPostions = changeParams[1]);\n      return { nestedContainerFieldPostions, outerFieldPostions };\n    default:\n      return null;\n  }\n};\n/* delete */\nconst dealWithDelete = ({ fieldId, contentFieldId }: any, state: any) => {\n  const operationData = (contentFieldId ? state.nestedFieldPostions[contentFieldId] : state.outerFieldPostions).filter(\n    (el: IPostionInfoProps) => el.id !== fieldId\n  );\n  contentFieldId\n    ? (state.nestedFieldPostions[contentFieldId] = [...operationData])\n    : (state.outerFieldPostions = [...operationData]);\n  if (state.nestedFieldPostions[fieldId]) {\n    deleteObjectParams(state.nestedFieldPostions, fieldId);\n  }\n  const parIds = getFieldPath(state.selectedFieldId, state.fieldsMap);\n  const deleteFieldPostions = parIds.indexOf(fieldId);\n\n  if (deleteFieldPostions >= 0) {\n    state.selectedFieldId = parIds[deleteFieldPostions + 1] || null;\n  }\n\n  deleteObjectParams(state.fieldsMap, fieldId);\n};\n/* batch delete*/\nconst dealWithBatchDelete = ({ fieldId }: any, state: any) => {\n  const { nestedFieldPostions, fieldsMap } = state;\n  let outerFieldPostions = state.outerFieldPostions;\n  let selectedFieldId = state.selectedFieldId;\n  const selectFieldParIds = getFieldPath(state.selectedFieldId, state.fieldsMap);\n  let finalPosition = -1;\n  if (Array.isArray(fieldId)) {\n    fieldId.forEach((id) => {\n      const element = fieldsMap[id];\n      if (element) {\n        if (element.parId) {\n          nestedFieldPostions[element.parId] = nestedFieldPostions[element.parId].filter((el: any) => el.id !== id);\n          if (nestedFieldPostions[id]) {\n            deleteObjectParams(nestedFieldPostions, id);\n          }\n        } else {\n          outerFieldPostions = outerFieldPostions.filter((el: any) => el.id !== id);\n        }\n        deleteObjectParams(fieldsMap, id);\n        const deleteFieldPostion = selectFieldParIds.indexOf(id);\n        finalPosition = Math.max(deleteFieldPostion, finalPosition);\n      }\n    });\n    if (finalPosition >= 0) {\n      selectedFieldId = selectFieldParIds[finalPosition + 1] || null;\n    }\n  }\n  return { nestedFieldPostions, outerFieldPostions, fieldsMap, selectedFieldId };\n};\n/* change */\nconst dealWithChange = ({ fieldId, newFieldInfo = {}, cover }: any, state: any, supInfo: any) => {\n  fieldId = fieldId || state.selectedFieldId;\n  const changeField = state.fieldsMap[fieldId];\n  state.fieldsMap[fieldId] = cover\n    ? { ...newFieldInfo, parId: changeField.parId }\n    : Object.assign({ parId: changeField.parId }, changeField, cloneDeep(newFieldInfo));\n};\n/* clear */\nconst clearFieldsMap = (fieldsMap: any) => {\n  for (const key in fieldsMap) {\n    if (Object.prototype.hasOwnProperty.call(fieldsMap, key)) {\n      fieldsMap[key] = undefined;\n    }\n  }\n};\nconst FormDesignReducer = (\n  state: any = cloneDeep(defaultState),\n  { type, formDesignId, ...otherProps }: any\n): IFormDesignDataReduceProps => {\n  const supInfo = FormDesignSupInfo[state.formDesignId] || {};\n  switch (type) {\n    /* 初始化阶段 */\n    case constants.INIT_FORMDESIGN:\n      return { ...state, formDesignId };\n    /* 修改formVo */\n    case constants.CHANGE_FORMVO:\n      const { fieldsMap: newFieldsMap, ...newState } = supInfo.transformFormVo?.(otherProps.formVo || []) || {};\n      clearFieldsMap(state.fieldsMap);\n      Object.assign(state.fieldsMap, newFieldsMap || {});\n      return { ...state, ...newState };\n    /* 添加新字段 */\n    case constants.PLACE_FIELD:\n      dealWithPlace(otherProps, state, supInfo);\n      supInfo.onFormVoChange?.(IChangeTypeProps.add, otherProps.innerField);\n      return { ...state };\n    /* 复制一个新字段 */\n    case constants.COPY_FIELD:\n      dealWithCopy(otherProps, state, supInfo);\n      supInfo.onFormVoChange?.(IChangeTypeProps.copy, otherProps.copyField);\n      return { ...state };\n    /* 移动字段 重新排序 */\n    case constants.MOVE_FIELD:\n      const moveResult = dealWithMove(otherProps, state);\n      if (moveResult) {\n        const { placeLayerInfo, dragFieldInfo } = otherProps;\n        const moveField = state.fieldsMap[dragFieldInfo.id];\n        moveField.parId = placeLayerInfo.contentFieldId;\n        supInfo.onFormVoChange?.(IChangeTypeProps.move, moveField);\n        return { ...state, ...moveResult };\n      } else {\n        return state;\n      }\n    /* 删除一个字段 */\n    case constants.DELETE_FIELD:\n      dealWithDelete(otherProps, state);\n      supInfo.onFormVoChange?.(IChangeTypeProps.delete, otherProps.fieldId);\n      return { ...state };\n    /* 删除多个字段 */\n    case constants.BATCH_DELETE_FIELD:\n      const batchDelState = dealWithBatchDelete(otherProps, state);\n      supInfo.onFormVoChange?.(IChangeTypeProps.delete, otherProps.deleteIds);\n      return { ...state, ...batchDelState };\n    /* 选中一个字段 */\n    case constants.SELECT_FIELD:\n      supInfo.onFormVoChange?.(IChangeTypeProps.select, otherProps.selectId);\n      return { ...state, selectedFieldId: otherProps.selectId };\n    /* 修改选中字段的属性 */\n    case constants.CHANGE_FIELD:\n      dealWithChange(otherProps, state, supInfo);\n      return { ...state };\n    /* 数据恢复初始化阶段 */\n    case constants.CLEAR_FORMDESIGN:\n      return cloneDeep(defaultState);\n    default:\n      return state;\n  }\n};\n \nexport default FormDesignReducer;\n","import React from 'react'\nimport { useDrag } from 'react-dnd'\nimport cs from 'classnames'\n// import IrsBaseIcon from '@ant-design/icons'\nimport { IDragProps } from '../module'\nimport * as constants from '../constants'\nimport { FormDesignRootContext } from './context-wrapper'\nimport { FormDesignSupInfo } from './common'\n\nconst DragDiv: React.FC<IDragProps> = React.memo(({ type = constants.BASE, canDrag = true, formDesignPerfixCls, uniquelySign }) => {\n    const [, baseDrag, connectDragPreview] = useDrag({\n        item: { type, uniquelySign },\n        options: {\n            dropEffect: \"copy\"\n        },\n        canDrag: () => canDrag\n    })\n\n    React.useEffect(() => {\n        connectDragPreview(document.getElementById(`${formDesignPerfixCls}-faker-perview`))\n    }, [formDesignPerfixCls])\n\n    return <><div\n        ref={baseDrag}\n        className={cs(`${formDesignPerfixCls}-drag-layer`, { [`${formDesignPerfixCls}-drag-disable`]: !canDrag })}\n    />\n    </>\n})\n\nconst DragLayout: React.FC<React.PropsWithChildren<IDragProps & { formDesignId: string }>> = React.memo((props) => {\n    const { children, type = constants.BASE, uniquelySign, canDrag, title, style, className, formDesignPerfixCls, formDesignId, ...otherProps } = props\n    const supInfo = FormDesignSupInfo[formDesignId!]\n    const dragId = React.useMemo(() => `${type}_${uniquelySign}`, [type, uniquelySign])\n    React.useEffect(() => {\n        if (supInfo) {\n            supInfo.dndMaskLayerTemplates[uniquelySign] = { id: dragId, uniquelySign, type, name: title, ...otherProps }\n        }\n    }, [supInfo, dragId])\n    return <div className={cs(`${formDesignPerfixCls}-drag-range`, className)} id={dragId} title={title} style={style}>\n        <DragDiv type={type} uniquelySign={uniquelySign} canDrag={canDrag} formDesignPerfixCls={formDesignPerfixCls} />\n        {children}\n    </div>\n})\n\nconst Drag: React.FC<IDragProps & { info: { name: string, iconClass: string } }> = ({ info, ...dragProps }) => {\n    const { formDesignId, formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n\n    return <DragLayout {...info} {...dragProps} title={info.name} formDesignId={formDesignId!} formDesignPerfixCls={formDesignPerfixCls}>\n        <div className={`${formDesignPerfixCls}-single-widget-content`}>\n            {/* <IrsBaseIcon className={`${formDesignPerfixCls}-single-widget-icon`} type={info.iconClass} /> */}\n            <div className={`${formDesignPerfixCls}-single-widget-text`}>\n                {info.name}\n            </div>\n        </div>\n    </DragLayout>\n}\n\nexport const DragLayoutWithContext: React.FC<IDragProps> = (props) => {\n    const { formDesignId, formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n\n    return <DragLayout {...props} formDesignId={formDesignId!} formDesignPerfixCls={formDesignPerfixCls} />\n}\n\nexport default Drag\n","/* eslint-disable */\nvar __assign = (this && this.__assign) || function () {\n  __assign = Object.assign || function(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n      }\n      return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nimport { createContext, useContext } from 'react';\nexport var FormLayoutDeepContext = createContext(null);\nexport var FormLayoutShallowContext = createContext(null);\nexport var useFormDeepLayout = function () { return useContext(FormLayoutDeepContext); };\nexport var useFormShallowLayout = function () { return useContext(FormLayoutShallowContext); };\nexport var useFormLayout = function () { return (__assign(__assign({}, useFormDeepLayout()), useFormShallowLayout())); };","/* eslint-disable */\nvar __assign = (this && this.__assign) || function () {\n  __assign = Object.assign || function(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n      }\n      return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n};\nimport React, { useLayoutEffect, useRef, useState } from 'react';\nimport cls from 'classnames';\nimport { usePrefixCls, pickDataProps } from './__builtins__';\nimport { isVoidField } from '@formily/core';\nimport { connect, mapProps } from '@formily/react';\nimport { useFormLayout, FormLayoutShallowContext } from './form-layout';\n// import { useGridSpan } from '../form-grid';\nimport  Tooltip from 'antd/lib/tooltip';\nimport Popover from 'antd/lib/popover'\nimport { QuestionCircleOutlined, CloseCircleOutlined, CheckCircleOutlined, ExclamationCircleOutlined, } from '@ant-design/icons';\nvar useFormItemLayout = function (props) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z;\n    var layout = useFormLayout();\n    return __assign(__assign({}, props), { layout: (_b = (_a = props.layout) !== null && _a !== void 0 ? _a : layout.layout) !== null && _b !== void 0 ? _b : 'horizontal', colon: (_c = props.colon) !== null && _c !== void 0 ? _c : layout.colon, labelAlign: layout.layout === 'vertical'\n            ? (_e = (_d = props.labelAlign) !== null && _d !== void 0 ? _d : layout.labelAlign) !== null && _e !== void 0 ? _e : 'left' : (_g = (_f = props.labelAlign) !== null && _f !== void 0 ? _f : layout.labelAlign) !== null && _g !== void 0 ? _g : 'right', labelWrap: (_h = props.labelWrap) !== null && _h !== void 0 ? _h : layout.labelWrap, labelWidth: (_j = props.labelWidth) !== null && _j !== void 0 ? _j : layout.labelWidth, wrapperWidth: (_k = props.wrapperWidth) !== null && _k !== void 0 ? _k : layout.wrapperWidth, labelCol: (_l = props.labelCol) !== null && _l !== void 0 ? _l : layout.labelCol, wrapperCol: (_m = props.wrapperCol) !== null && _m !== void 0 ? _m : layout.wrapperCol, wrapperAlign: (_o = props.wrapperAlign) !== null && _o !== void 0 ? _o : layout.wrapperAlign, wrapperWrap: (_p = props.wrapperWrap) !== null && _p !== void 0 ? _p : layout.wrapperWrap, fullness: (_q = props.fullness) !== null && _q !== void 0 ? _q : layout.fullness, size: (_r = props.size) !== null && _r !== void 0 ? _r : layout.size, inset: (_s = props.inset) !== null && _s !== void 0 ? _s : layout.inset, asterisk: props.asterisk, bordered: (_t = props.bordered) !== null && _t !== void 0 ? _t : layout.bordered, feedbackIcon: props.feedbackIcon, feedbackLayout: (_v = (_u = props.feedbackLayout) !== null && _u !== void 0 ? _u : layout.feedbackLayout) !== null && _v !== void 0 ? _v : 'loose', tooltipLayout: (_x = (_w = props.tooltipLayout) !== null && _w !== void 0 ? _w : layout.tooltipLayout) !== null && _x !== void 0 ? _x : 'icon', tooltipIcon: (_z = (_y = props.tooltipIcon) !== null && _y !== void 0 ? _y : layout.tooltipIcon) !== null && _z !== void 0 ? _z : (React.createElement(QuestionCircleOutlined, null)) });\n};\nfunction useOverflow() {\n    var _a = __read(useState(false), 2), overflow = _a[0], setOverflow = _a[1];\n    var containerRef = useRef();\n    var contentRef = useRef();\n    useLayoutEffect(function () {\n        /* 2022-01-02 去掉对label宽度的计算展示方式控制 */\n        if (containerRef.current && contentRef.current) {\n            var contentWidth = contentRef.current.getBoundingClientRect().width;\n            var containerWidth = containerRef.current.getBoundingClientRect().width;\n            if (contentWidth && containerWidth && containerWidth < contentWidth) {\n                // if (!overflow) \n                    // setOverflow(true);\n            }\n            else {\n                if (overflow)\n                    setOverflow(false);\n            }\n        }\n    }, []);\n    return {\n        overflow: overflow,\n        containerRef: containerRef,\n        contentRef: contentRef,\n    };\n}\nvar ICON_MAP = {\n    error: React.createElement(CloseCircleOutlined, null),\n    success: React.createElement(CheckCircleOutlined, null),\n    warning: React.createElement(ExclamationCircleOutlined, null),\n};\nexport var BaseItem = function ({id,...props}) {\n    var _a, _b, _c, _d, _e;\n    var children = props.children, others = __rest(props, [\"children\"]);\n    var _f = __read(useState(false), 2), active = _f[0], setActice = _f[1];\n    var formLayout = useFormItemLayout(others);\n    // var gridSpan = useGridSpan(props.gridSpan);\n    var _g = useOverflow(), containerRef = _g.containerRef, contentRef = _g.contentRef, overflow = _g.overflow;\n    var label = formLayout.label, style = formLayout.style, layout = formLayout.layout, _h = formLayout.colon, colon = _h === void 0 ? true : _h, addonBefore = formLayout.addonBefore, addonAfter = formLayout.addonAfter, asterisk = formLayout.asterisk, feedbackStatus = formLayout.feedbackStatus, extra = formLayout.extra, feedbackText = formLayout.feedbackText, fullness = formLayout.fullness, feedbackLayout = formLayout.feedbackLayout, feedbackIcon = formLayout.feedbackIcon, inset = formLayout.inset, _j = formLayout.bordered, bordered = _j === void 0 ? true : _j, labelWidth = formLayout.labelWidth, wrapperWidth = formLayout.wrapperWidth, labelCol = formLayout.labelCol, wrapperCol = formLayout.wrapperCol, labelAlign = formLayout.labelAlign, _k = formLayout.wrapperAlign, wrapperAlign = _k === void 0 ? 'left' : _k, size = formLayout.size, labelWrap = formLayout.labelWrap, wrapperWrap = formLayout.wrapperWrap, tooltipLayout = formLayout.tooltipLayout, tooltip = formLayout.tooltip, tooltipIcon = formLayout.tooltipIcon;\n    // 2021-12-30 设置空格符占位标题在布局上的调整\n    label = labelCol ===24 && /^\\s+$/.test(label) ?null:label\n    \n    var labelStyle = __assign({}, formLayout.labelStyle);\n    var wrapperStyle = __assign({}, formLayout.wrapperStyle);\n    // 固定宽度\n    var enableCol = false;\n    if (labelWidth || wrapperWidth) {\n        if (labelWidth) {\n            labelStyle.width = labelWidth === 'auto' ? undefined : labelWidth;\n            labelStyle.maxWidth = labelWidth === 'auto' ? undefined : labelWidth;\n        }\n        if (wrapperWidth) {\n            wrapperStyle.width = wrapperWidth === 'auto' ? undefined : wrapperWidth;\n            wrapperStyle.maxWidth = wrapperWidth === 'auto' ? undefined : wrapperWidth;\n        }\n        // 栅格模式\n    }\n    if (labelCol || wrapperCol) {\n        if (!labelStyle.width && !wrapperStyle.width) {\n            enableCol = true;\n        }\n    }\n    var prefixCls = usePrefixCls('formily-item', props);\n    var formatChildren = feedbackLayout === 'popover' ? (React.createElement(Popover, { autoAdjustOverflow: true, placement: \"top\", content: React.createElement(\"div\", { className: cls((_a = {},\n                _a[prefixCls + \"-\" + feedbackStatus + \"-help\"] = !!feedbackStatus,\n                _a[prefixCls + \"-help\"] = true,\n                _a)) },\n            ICON_MAP[feedbackStatus],\n            \" \",\n            feedbackText), visible: !!feedbackText }, children)) : (children);\n    var gridStyles = {};\n    // if (gridSpan) {\n    //     gridStyles.gridColumnStart = \"span \" + gridSpan;\n    // }\n    var getOverflowTooltip = function () {\n        if (overflow) {\n            return (React.createElement(\"div\", null,\n                React.createElement(\"div\", null, label),\n                React.createElement(\"div\", null, tooltip)));\n        }\n        return tooltip;\n    };\n    var renderLabelText = function () {\n        var labelChildren = (React.createElement(\"div\", { className: cls(prefixCls + \"-label-content\"), ref: containerRef },\n            asterisk && (React.createElement(\"span\", { className: cls(prefixCls + \"-asterisk\") }, '*')),\n            React.createElement(\"label\", { ref: contentRef }, label)));\n        if ((tooltipLayout === 'text' && tooltip) || overflow) {\n            return (React.createElement(Tooltip, { placement: \"top\", align: { offset: [0, 10] }, title: getOverflowTooltip() }, labelChildren));\n        }\n        return labelChildren;\n    };\n    var renderTooltipIcon = function () {\n        if (tooltip && tooltipLayout === 'icon' && !overflow) {\n            return (React.createElement(\"span\", { className: cls(prefixCls + \"-label-tooltip-icon\") },\n                React.createElement(Tooltip, { placement: \"top\", align: { offset: [0, 2] }, title: tooltip }, tooltipIcon)));\n        }\n    };\n    var renderLabel = function () {\n        var _a;\n        if (!label)\n            return null;\n        return (React.createElement(\"div\", { className: cls((_a = {},\n                _a[prefixCls + \"-label\"] = true,\n                _a[prefixCls + \"-label-tooltip\"] = (tooltip && tooltipLayout === 'text') || overflow,\n                _a[prefixCls + \"-item-col-\" + labelCol] = enableCol && !!labelCol,\n                _a)), style: labelStyle },\n            renderLabelText(),\n            renderTooltipIcon(),\n            label !== ' ' && (React.createElement(\"span\", { className: cls(prefixCls + \"-colon\") }, colon ? ':' : ''))));\n    };\n\n    return (React.createElement(\"div\", __assign({}, pickDataProps(props), { style: __assign(__assign({}, style), gridStyles), className: cls((_b = {},\n            _b[\"\" + prefixCls] = true,\n            _b[prefixCls + \"-layout-\" + layout] = true,\n            _b[prefixCls + \"-\" + feedbackStatus] = !!feedbackStatus,\n            _b[prefixCls + \"-feedback-has-text\"] = !!feedbackText,\n            _b[prefixCls + \"-size-\" + size] = !!size,\n            _b[prefixCls + \"-feedback-layout-\" + feedbackLayout] = !!feedbackLayout,\n            _b[prefixCls + \"-fullness\"] = !!fullness || !!inset || !!feedbackIcon,\n            _b[prefixCls + \"-inset\"] = !!inset,\n            _b[prefixCls + \"-active\"] = active,\n            _b[prefixCls + \"-inset-active\"] = !!inset && active,\n            _b[prefixCls + \"-label-align-\" + labelAlign] = true,\n            _b[prefixCls + \"-control-align-\" + wrapperAlign] = true,\n            _b[prefixCls + \"-label-wrap\"] = !!labelWrap,\n            _b[prefixCls + \"-control-wrap\"] = !!wrapperWrap,\n            _b[prefixCls + \"-bordered-none\"] = bordered === false || !!inset || !!feedbackIcon,\n            _b[props.className] = !!props.className,\n            _b)), onFocus: function () {\n            if (feedbackIcon || inset) {\n                setActice(true);\n            }\n        }, onBlur: function () {\n            if (feedbackIcon || inset) {\n                setActice(false);\n            }\n        }, /* 向下传递id */\n        id:id\n    }),\n        renderLabel(),\n        React.createElement(\"div\", { className: cls((_c = {},\n                _c[prefixCls + \"-control\"] = true,\n                _c[prefixCls + \"-item-col-\" + wrapperCol] = enableCol && !!wrapperCol && label,\n                _c)) },\n            React.createElement(\"div\", { className: cls(prefixCls + \"-control-content\") },\n                addonBefore && (React.createElement(\"div\", { className: cls(prefixCls + \"-addon-before\") }, addonBefore)),\n                React.createElement(\"div\", { style: wrapperStyle, className: cls((_d = {},\n                        _d[prefixCls + \"-control-content-component\"] = true,\n                        _d[prefixCls + \"-control-content-component-has-feedback-icon\"] = !!feedbackIcon,\n                        _d)) },\n                    React.createElement(FormLayoutShallowContext.Provider, { value: undefined }, formatChildren),\n                    feedbackIcon && (React.createElement(\"div\", { className: cls(prefixCls + \"-feedback-icon\") }, feedbackIcon))),\n                addonAfter && (React.createElement(\"div\", { className: cls(prefixCls + \"-addon-after\") }, addonAfter))),\n            !!feedbackText &&\n                feedbackLayout !== 'popover' &&\n                feedbackLayout !== 'none' && (React.createElement(\"div\", { className: cls((_e = {},\n                    _e[prefixCls + \"-\" + feedbackStatus + \"-help\"] = !!feedbackStatus,\n                    _e[prefixCls + \"-help\"] = true,\n                    _e[prefixCls + \"-help-enter\"] = true,\n                    _e[prefixCls + \"-help-enter-active\"] = true,\n                    _e)) }, feedbackText)),\n            extra && React.createElement(\"div\", { className: cls(prefixCls + \"-extra\") }, extra))));\n};\n// 适配\nexport var FormItem = connect(BaseItem, mapProps({ validateStatus: true, title: 'label', required: true }, function (props, field) {\n    if (isVoidField(field))\n        return {\n            extra: props.extra || field.description,\n        };\n    if (!field)\n        return props;\n    var takeMessage = function () {\n        var split = function (messages) {\n            return messages.reduce(function (buf, text, index) {\n                if (!text)\n                    return buf;\n                return index < messages.length - 1\n                    ? buf.concat([text, ', '])\n                    : buf.concat([text]);\n            }, []);\n        };\n        if (field.validating)\n            return;\n        if (props.feedbackText)\n            return props.feedbackText;\n        if (field.selfErrors.length)\n            return split(field.selfErrors);\n        if (field.selfWarnings.length)\n            return split(field.selfWarnings);\n        if (field.selfSuccesses.length)\n            return split(field.selfSuccesses);\n    };\n    return {\n        feedbackText: takeMessage(),\n        extra: props.extra || field.description,\n    };\n}, function (props, field) {\n    var _a;\n    if (isVoidField(field))\n        return props;\n    if (!field)\n        return props;\n    return {\n        feedbackStatus: field.validateStatus === 'validating'\n            ? 'pending'\n            : ((_a = field.decorator[1]) === null || _a === void 0 ? void 0 : _a.feedbackStatus) || field.validateStatus,\n    };\n}, function (props, field) {\n    if (isVoidField(field))\n        return props;\n    if (!field)\n        return props;\n    var asterisk = false;\n    if (field.required && field.pattern !== 'readPretty') {\n        asterisk = true;\n    }\n    if ('asterisk' in props) {\n        asterisk = props.asterisk;\n    }\n    return {\n        asterisk: asterisk,\n    };\n},function(props,field){ // 改动1 传入id字段\n    const target = {}\n    if(field){\n        target.id = field.address.entire\n    }\n    return target\n}));\nFormItem.BaseItem = BaseItem;\nexport default FormItem;","/* eslint:disable */\nexport var usePrefixCls = function (tag, props) {\n  const antPrefixCls = props === null || props === void 0 ? \"ant\" : props.antPrefixCls;\n  const customizePrefixCls = props === null || props === void 0 ? void 0 : props.prefixCls;\n  if (customizePrefixCls) return customizePrefixCls;\n  return tag ? (antPrefixCls + \"-\").concat(tag) : antPrefixCls;\n};\n\nexport var pickDataProps = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return Object.keys(props).reduce(function (buf, key) {\n    if (key.includes(\"data-\")) {\n      buf[key] = props[key];\n    }\n    return buf;\n  }, {});\n};\n","import * as React from 'react'\n// import cs from 'classnames'\n// import { Ihr3ConfigConsumer } from 'ihr360-web-ui3/packages/config-provider'\nimport Col  from 'antd/lib/grid/col'\nimport BaseFormItem from './form-item.js'\nimport './style.js'\nclass FormItem extends React.Component<any, any> {\n  constructor(props: any) {\n    super(props)\n  }\n  render() {\n    const { span, labelCol, wrapperCol, className, ...otherProps } = this.props\n    return <Col span={span || 24}>\n      {/* <Ihr3ConfigConsumer> */}\n        {/* {(context: any) => { */}\n          <BaseFormItem\n            antPrefixCls={\"ant\"}\n            labelCol={labelCol}\n            wrapperCol={wrapperCol}\n            colon={labelCol !== 24}\n            labelAlign={labelCol !== 24 ? \"right\" : \"left\"}\n            // className={cs(`${context.antPrefixCls || \"ant4\"}-row ${context.ihrPrefixCls || \"ihr3\"}-row`, className)}\n            className={className}\n            {...otherProps} />\n        {/* }} */}\n      {/* </Ihr3ConfigConsumer> */}\n    </Col>\n  }\n}\n\nexport default FormItem","import * as React from 'react'\nimport cs from 'classnames'\nimport { reaction } from '@formily/reactive'\nimport Input from 'antd/lib/input'\nimport DatePicker from 'antd/lib/date-picker'\nimport FormItem from '../setter-pane/register-field/form-item'\nimport InputNumber from 'antd/lib/input-number'\nimport Select from 'antd/lib/select'\n// import IrsBaseIcon from 'ihr360-web-ui3/packages/base/irs-base-icon'\nimport { SimulatorWrapContext, SimulatorWrapLayoutContext } from './index'\nimport { FormDesignDataContext, FormDesignRootContext } from '../basic/context-wrapper'\nimport { FormDesignSupInfo } from '../basic/common'\n\nconst { TextArea } = Input\n\ninterface IFieldMarkProps {\n  formDesignPerfixCls: string\n  mode: string\n  supInfo: any\n  type: string\n}\n\nconst FieldMark = React.memo<IFieldMarkProps>(({ formDesignPerfixCls, supInfo, mode, type }) => {\n  const { dndMaskLayerTemplates } = supInfo\n  const [markLayerInfo, setMarkLayerInfo] = React.useState<any>(dndMaskLayerTemplates[type])\n  React.useEffect(() => {\n    reaction(() => {\n      if (!markLayerInfo) {\n        setMarkLayerInfo(dndMaskLayerTemplates[type])\n      }\n    })\n  }, [])\n  return <div className={`${formDesignPerfixCls}-field-mark`}>\n    {/* {markLayerInfo ? <><IrsBaseIcon type={markLayerInfo.iconClass} />{markLayerInfo.name}</> : null} */}\n  </div>\n})\n\nconst transformProps = (InnerComponents: React.ElementType) => {\n  return React.memo(({ fieldInfo }: any) => {\n    const { labelCol, wrapperCol } = React.useContext(SimulatorWrapLayoutContext)\n    const { mode, SuffixFieldDisplay, SuffixFieldWidth } = React.useContext(SimulatorWrapContext)\n    const { formDesignPerfixCls, formDesignId } = React.useContext(FormDesignRootContext)\n    const supInfo = FormDesignSupInfo[formDesignId!]\n    return <>\n      <FieldMark\n        formDesignPerfixCls={formDesignPerfixCls!}\n        supInfo={supInfo}\n        mode={mode}\n        type={fieldInfo.type}\n      />\n      <div style={{ flex: `0 0 ${SuffixFieldWidth}px` }} className={`${formDesignPerfixCls}-field-custom-area`}>\n        <SuffixFieldDisplay\n          fieldInfo={supInfo.recoverField(fieldInfo)}\n          mode={mode}\n        />\n      </div>\n      <FormItem\n        labelCol={labelCol}\n        wrapperCol={wrapperCol}\n        label={fieldInfo.title || \" \"}\n        asterisk={fieldInfo[\"statusInfo>statusType\"] === \"EDITABLE\" && fieldInfo.required}\n        extra={fieldInfo.description}\n        wrapperStyle={{ pointerEvents: \"none\" }}\n        style={{ marginBottom: \"0\" }}\n        mode={mode}\n      >\n        <InnerComponents\n          fieldInfo={fieldInfo}\n          placeholder={fieldInfo.placeholder}\n          disabled={fieldInfo[\"statusInfo>statusType\"] !== \"EDITABLE\"}\n          style={fieldInfo.style || {}}\n          className={cs(`${formDesignPerfixCls}-${fieldInfo.type?.replace(\"_\", \"-\")?.toLocaleLowerCase?.() || 'unknow'}-field`, fieldInfo.className)}\n          mode={mode}\n        />\n      </FormItem>\n    </>\n  })\n}\n\nconst TEXT: React.FC<any> = transformProps(({ fieldInfo, ...props }) => <Input {...props} />)\n\nconst TEXTAREA: React.FC<any> = transformProps(({ fieldInfo, ...props }) => <TextArea width=\"100%\"  {...props} />)\n\nconst DATE: React.FC<any> = transformProps((props) => {\n  return <DatePicker width=\"100%\" block={true} {...props} />\n})\n\nconst NUMBER: React.FC<any> = transformProps(({ fieldInfo, ...props }) => {\n  const className = cs('input-number-handler-wrap-contorl', props.className)\n  return <InputNumber  {...props} className={className} />\n})\n\n\nconst RADIO: React.FC<any> = transformProps(({ fieldInfo, ...props }) => <Select {...props} />)\n\nconst UIComponents: any = { TEXT, TEXTAREA, DATE, NUMBER,  RADIO }\n\nconst FieldUIComponent: React.FC<{ fieldId: string }> = ({ fieldId }) => {\n  const { fieldsMap } = React.useContext(FormDesignDataContext)\n  const fieldInfo = fieldsMap[fieldId]\n  const FieldDisplay = React.useMemo(() => UIComponents[fieldInfo.type], [fieldInfo.type])\n  return <FieldDisplay\n    fieldInfo={fieldInfo}\n  />\n}\nconst isObject = (data: any) => Object.prototype.toString.call(data) === \"[object Object]\";\n// 扩充字段模拟展示状态\nexport const expandHandle = (expandFieldsDisplay: { [key: string]: React.ComponentType }) => {\n  if (isObject(expandFieldsDisplay)) {\n    Object.entries(expandFieldsDisplay).forEach(([key, UIComponent]) => {\n      UIComponents[key] = transformProps(UIComponent)\n    })\n  }\n}\n\nexport default FieldUIComponent\n\n","import * as React from 'react'\nimport Row  from 'antd/lib/grid/row'\nimport Drop from '../basic/drop'\nimport { FormDesignDataContext, FormDesignRootContext } from '../basic/context-wrapper'\nimport FieldUIComponent, { expandHandle } from './field-display'\nimport './style.less'\nimport { ISimulatorWrapProps } from '../module'\n\nconst DefaultNoData = () => {\n  return <div style={{display:\"flex\",height:'100%',justifyContent:\"center\",alignItems:\"center\"}}>请从左边拖入一个组件</div>\n}\n\nconst FieldGroupContent: React.FC<any> = React.memo(({ fieldGroupData, contentFieldId, selectedFieldId }) => {\n  const groupLength = fieldGroupData.length - 1\n  return <Row>\n    {fieldGroupData.map(({ id: fieldId, ...functionContorl }: any, i: number) => {\n      if (typeof functionContorl.visible === \"boolean\" && !functionContorl.visible) {\n        return null\n      }\n      return <Drop\n        key={fieldId}\n        isFirstField={!i}\n        isLastField={i === groupLength}\n        index={i}\n        contentFieldId={contentFieldId}\n        fieldId={fieldId}\n        isSelected={selectedFieldId === fieldId}\n        {...functionContorl}\n      >\n        <FieldUIComponent fieldId={fieldId} />\n      </Drop>\n    })}\n  </Row>\n})\n\n/** \n * 字段组渲染\n * @param mode 移动端和web端展示的样式标记\n * @param groupId 当前字段组的id 最外层为null 嵌套层为自身id \n */\nconst DropFieldGroup: React.FC<any> = React.memo(({ contentFieldId, fieldGroupData, selectedFieldId, customNoData = null }) => {\n  return <Drop\n    isDropContent={true}\n    contentFieldId={contentFieldId}\n  >\n    {fieldGroupData?.length ?\n      <FieldGroupContent\n        contentFieldId={contentFieldId}\n        fieldGroupData={fieldGroupData}\n        selectedFieldId={selectedFieldId}\n      /> : customNoData}\n  </Drop>\n})\n\nexport const DropFieldGroupWithContext: React.FC<any> = ({ contentFieldId, customNoData }) => {\n  const { outerFieldPostions, nestedFieldPostions, selectedFieldId } = React.useContext(FormDesignDataContext)\n  const fieldGroupData = contentFieldId ? nestedFieldPostions[contentFieldId] : outerFieldPostions\n  return <DropFieldGroup\n    contentFieldId={contentFieldId}\n    selectedFieldId={selectedFieldId}\n    fieldGroupData={fieldGroupData}\n    customNoData={customNoData}\n  />\n}\n\nexport const SimulatorWrapContext = React.createContext({ mode: \"web\", SuffixFieldDisplay: (props: any) => <></>, SuffixFieldWidth: 84 })\n\nexport const SimulatorWrapLayoutContext = React.createContext({ labelCol: 8, wrapperCol: 16 })\n\nconst SimulatorWrap: React.FC<ISimulatorWrapProps> = (props) => {\n  const { formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n  const SimulatorWrapLayoutContextValue = React.useMemo(() => Object.assign({ labelCol: 8, wrapperCol: 16 }, props.layout), [props.layout])\n\n  const SimulatorWrapContextValue = React.useMemo(() => Object.assign({}, { mode: props.mode || \"web\", SuffixFieldDisplay: (props.SuffixFieldDisplay as any) || (() => <></>) as React.ComponentType, SuffixFieldWidth: props.SuffixFieldWidth || 84 }), [props.SuffixFieldWidth, props.SuffixFieldDisplay, props.mode])\n\n  React.useEffect(() => {\n    expandHandle(props.expendFieldSimulate!)\n  }, [props.expendFieldSimulate])\n\n  return <SimulatorWrapContext.Provider value={SimulatorWrapContextValue}>\n    <SimulatorWrapLayoutContext.Provider value={SimulatorWrapLayoutContextValue}>\n      <div className={`${formDesignPerfixCls}-simulator-content`}>\n        <DropFieldGroupWithContext\n          contentFieldId={null}\n          customNoData={props.noData || <DefaultNoData />}\n        />\n      </div>\n    </SimulatorWrapLayoutContext.Provider>\n  </SimulatorWrapContext.Provider>\n}\n\nexport default SimulatorWrap","import * as React from 'react'\nimport Row from 'antd/lib/row'\nimport { FormDesignRootContext } from '../../basic/context-wrapper'\n\ninterface IProps {\n  title: string\n  supContent: React.ComponentType\n}\n\nexport const FormGroup: React.FC<IProps> = ({ title, supContent: SupContent = () => null, children }) => {\n  const { formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n  return <>\n    <div className={`${formDesignPerfixCls}-form-group-title`}>\n      {title}\n      <SupContent />\n    </div>\n    <Row>\n      {children}\n    </Row>\n  </>\n}\n\nexport const SideLine: React.FC = () => {\n  const { formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n  return <div className={`${formDesignPerfixCls}-side-line`} />\n}\n","import * as React from 'react'\nimport Moment from 'moment'\nimport Input from 'antd/lib/input'\nimport DatePicker from 'antd/lib/date-picker'\nconst { RangePicker: AntdRangePicker } = DatePicker\n\ninterface ICommonProps {\n  type: string\n  value: string[]\n  onChange: (value: string[]) => void\n  decimal?: number\n  suffix?: string\n}\n\n// const percentValue = (type: string, v: string, decimal: number) => type === 'percent' && v ? \"\" + (+v * 100).toFixed(decimal - 2) : v\n\nconst transformValue = (v: string) => {\n  if (/^\\-$/.test(v)) {\n    return \"0\"\n  } else if (/\\.$/.test(v)) {\n    return v.slice(0, v.length - 1)\n  } else {\n    return null\n  }\n}\n\nconst RangeSetterWithInput: React.FC<ICommonProps> = (props) => {\n  const { type, value, onChange, decimal = 2, ...otherProps } = props\n\n  const [cacheValue, setCacheValue] = React.useState(props.value || [])\n\n  const rexExp = React.useMemo(() => new RegExp('^\\\\-?((0|[1-9][0-9]*)?$|(0|[1-9][0-9]*)(\\\\.\\\\d{0,' + decimal + '})?$)'), [decimal])\n\n  const dealWithValue = (index: number, newValue: string) => {\n    const targetValue = [...cacheValue]\n    if (rexExp.test(newValue)) {\n      targetValue[index] = newValue\n      return targetValue\n    } else {\n      return null\n    }\n  }\n\n  const wapperOnChange = (index: number, e: any) => {\n    const newValue = e.target.value\n    const targetValue = dealWithValue(index, newValue)\n    if (targetValue) {\n      const changeValue = [...targetValue]\n      setCacheValue(targetValue)\n      const correctionValue = transformValue(newValue)\n      if (correctionValue) {\n        changeValue[index] = correctionValue\n      }\n      onChange(changeValue)\n    }\n  }\n\n  const onBlur = () => {\n    let [minValue, maxValue] = cacheValue\n    minValue = transformValue(minValue) || minValue\n    maxValue = transformValue(maxValue) || maxValue\n    if (minValue && maxValue && +minValue > +maxValue) {\n      setCacheValue([maxValue, minValue])\n      onChange([maxValue, minValue])\n    }\n  }\n\n\n  return <div className=\"flex\">\n    <Input\n      // value={edit ? cacheValue[0] : percentValue(type, cacheValue[0], decimal)}\n      value={cacheValue[0]}\n      onChange={wapperOnChange.bind(null, 0)}\n      onBlur={onBlur}\n      {...otherProps} />\n    ~\n    <Input\n      // value={edit ? cacheValue[1] : percentValue(type, cacheValue[1], decimal)}\n      value={cacheValue[1]}\n      onChange={wapperOnChange.bind(null, 1)}\n      onBlur={onBlur}\n      {...otherProps} />\n  </div>\n}\n\n\nconst RangePicker: React.FC<ICommonProps & { format?: string }> = (props) => {\n  const { value, onChange, format, ...otherProps } = props\n  const [cacheValue, setCacheValue] = React.useState(Array.from({ length: 2 }, (el: any, i: number) => props.value[i] && Moment(props.value[i])))\n\n  const rangePickerConfig = React.useMemo(() => {\n    const staticConfigs: any = {\n      \"YYYY\": { type: \"rangepicker\", picker: \"year\" },\n      \"YYYY-MM\": { type: \"rangepicker\", picker: \"month\" },\n      \"YYYY-MM-DD HH:mm\": { type: \"rangepicker\", showTime: { format: \"HH:mm\" } },\n      \"YYYY-MM-DD HH:mm:ss\": { type: \"rangepicker\", showTime: { format: \"HH:mm:ss\" } }\n    }\n    const targetConfig = staticConfigs[format!] || { type: \"rangepicker\" }\n    const newValues = value.map((el) => el && Moment(el).format(format))\n    onChange(newValues)\n    setCacheValue(newValues.map((el: any) => el && Moment(el)))\n    return targetConfig\n  }, [format])\n\n  const onInputChange = (dates: any, dateStrings: [string, string]) => {\n    setCacheValue(dates)\n    onChange(dateStrings)\n  }\n\n  return <AntdRangePicker\n    {...otherProps}\n    {...rangePickerConfig}\n    block={true}\n    value={cacheValue}\n    isDefinedValue={true}\n    onCalendarChange={onInputChange}\n  />\n}\n\ninterface IProps {\n  type: \"number\" | \"rangepicker\"\n  onChange: (e: any) => void\n  onFocus: (e: any) => void\n  onBlur: (e: any) => void\n  value: string[]\n  [key: string]: any\n}\n\n// 自定义区间字段\nconst RangeSetter: React.FC<IProps> = ({ type, onBlur, onFocus, ...otherProps }) => {\n  const [RenderComponent] = React.useMemo(() => {\n    return [type === \"rangepicker\" ? RangePicker : RangeSetterWithInput]\n  }, [type])\n\n  return <>\n    <RenderComponent\n      type={type}\n      {...otherProps}\n    />\n  </>\n}\n\nexport default RangeSetter\n// 校验规则\nexport const rangeSetterValidateRules = (validateData: string[], rule: any, ctx: any) => {\n  const [minValue, maxValue] = validateData || []\n  if (!minValue || !maxValue) {\n    return \"该字段是必填字段\"\n  } else {\n    return \"\"\n  }\n}\n\nconst typeTitleMap: any = {\n  \"number\": \"数值\",\n  \"percent\": \"百分比\",\n  \"rangepicker\": \"日期\"\n}\n// 联动规则\nexport const rangeSetterEeactRangeErrorMsg = (field: any) => {\n  const [minValue, maxValue] = field.value || []\n  const fieldTitle = typeTitleMap[field.componentProps.type]\n  const suffix = field.componentProps.suffix || \"\"\n  let newValue = \"\"\n  if (minValue && !maxValue) {\n    newValue = `不能低于${fieldTitle}最小值${minValue}${suffix}`\n  } else if (!minValue && maxValue) {\n    newValue = `不能超出${fieldTitle}最大值${maxValue}${suffix}`\n  } else if (minValue && maxValue) {\n    newValue = `请输入${minValue}${suffix}~${maxValue}${suffix}的${fieldTitle}`\n  }\n  return newValue\n}","import React from 'react'\nimport Radio from 'antd/lib/radio'\nconst RadioGroup = Radio.Group\n\ninterface Iprops {\n    isCompose?: boolean\n    checkText?: string\n    options: string[] | number[] | Array<{ label: string, value: string, disabled?: boolean }>\n}\n\nconst RadioCombination: React.FC<Iprops> = (props) => {\n    const { isCompose, checkText, children, options, ...otherProps } = props\n    return isCompose ?\n        <RadioGroup options={options} {...otherProps} />\n        : <Radio {...otherProps}>\n            {checkText || children}\n        </Radio>\n}\n\nexport default RadioCombination","import * as React from 'react'\nimport { connect, mapProps, JSXComponent } from '@formily/react'\nimport { Field as FieldType, registerValidateRules } from '@formily/core'\nimport { SetterPaneLayoutContext } from '../index'\nimport BaseFormItem from './form-item'\nimport { FormGroup, SideLine } from './void-fields'\nimport RangeSetter, { rangeSetterValidateRules, rangeSetterEeactRangeErrorMsg } from './range-setting'\nimport Input from 'antd/lib/input'\nimport Select from 'antd/lib/select'\nimport InputNumber from 'antd/lib/input-number'\nimport Radio from '../../../radio'\nimport Checkbox from 'antd/lib/checkbox'\nconst { TextArea } = Input\n\nconst isObject = (data: any) => Object.prototype.toString.call(data) === \"[object Object]\";\n// statusType change effects\nconst statusTypeChangeEffect = (statusInfo: any, $self: FieldType, linkageFields: any, alisa: string) => {\n  const $form = $self.form\n  const cacheField = linkageFields[statusInfo.perStatusType || $self.initialValue] || []\n  Object.entries(cacheField).forEach(([key, linkageKeys]: [string, any]) => {\n    linkageKeys = Array.isArray(linkageKeys) ? linkageKeys : [linkageKeys]\n    statusInfo[key] = linkageKeys.reduce((acc: any, next: string) => {\n      const curValue = $form.getValuesIn(next)\n      if (isObject(curValue)) {\n        acc = acc || {}\n        Object.assign(acc, curValue)\n      } else {\n        acc = curValue\n      }\n      return acc\n    }, undefined)\n  })\n  statusInfo.perStatusType = $self.value\n}\n// 默认scope\nexport const createDefaultScope = (fieldInfo: any) => {\n  const statusInfo: any = {}\n  return { rangeSetterEeactRangeErrorMsg, statusTypeChangeEffect: statusTypeChangeEffect.bind(null, statusInfo), statusInfo }\n}\n// 默认注册规则 \nregisterValidateRules({ rangeSetterValidateRules })\n\ntype IStateMapper<Props> = {\n  [key in keyof FieldType]?: keyof Props | boolean;\n} | ((props: Props, field: any) => Props);\n\nconst FormItem = React.memo((props) => {\n  const layout = React.useContext(SetterPaneLayoutContext)\n  return <BaseFormItem {...layout} {...props} />\n})\n\nconst WrapperComponent = <T extends JSXComponent>(supInfo: any, InnerComponent: T, ...mapPropsParams: Array<IStateMapper<React.ComponentProps<T>>>) => {\n\n  if (mapPropsParams.length) {\n    const func = mapPropsParams[mapPropsParams.length - 1]\n    if (typeof func === \"function\") {\n      mapPropsParams[mapPropsParams.length - 1] = (props, field) => {\n        const result = supInfo.dealWithCustomData?.(props, field)\n        return ({ ...func(result, field), ...result })\n      } \n    }\n  } else {\n    mapPropsParams = [(props, field) => supInfo.dealWithCustomData?.(field.data || {}, props)]\n  }\n  return connect(InnerComponent, mapProps(...mapPropsParams))\n}\n\nexport const expandField = (supInfo: any = {}, originData: { [key: string]: React.ComponentType }) => {\n  //@ts-ignore\n  const WrapperComponentBindSupInfo: <T extends JSXComponent>(InnerComponent: T, ...mapPropsParams: Array<IStateMapper<React.ComponentProps<T>>>) => T = WrapperComponent.bind(null, supInfo)\n\n  if (originData && isObject(originData)) {\n    return Object.entries(originData).reduce((acc: any, [key, element]) => {\n      acc[key] = WrapperComponentBindSupInfo(element)\n      return acc\n    }, {})\n  }\n  return {}\n}\n\nconst createCommonField = (supInfo: any = {}, formDesignPerfixCls: string) => {\n  //@ts-ignore\n  const WrapperComponentBindSupInfo: <T extends JSXComponent>(InnerComponent: T, ...mapPropsParams: Array<IStateMapper<React.ComponentProps<T>>>) => T = WrapperComponent.bind(null, supInfo)\n\n  const InputWithFormily = WrapperComponentBindSupInfo(Input)\n\n  const SelectWithFormily = WrapperComponentBindSupInfo(({ id, ...props }) => <div id={id}><Select {...props} /></div>, (props, field): any => {\n    const id = formDesignPerfixCls + \"-\" + field.address.entire\n    return { options: field.dataSource, id, getPopupContainer: () => document.getElementById(id) }\n  })\n\n  const InputNumberWithFormily = WrapperComponentBindSupInfo(({ correctionNumber, ...props }) => <InputNumber {...props} />, (props: any): any => {\n    const correctionNumber = props.correctionNumber\n    const baseConfig = { className: 'input-number-handler-wrap-contorl' }\n    return correctionNumber ? {\n      ...baseConfig,\n      formatter: (v: string) => +v - correctionNumber, parser: (v: string) => +v + correctionNumber\n    } : baseConfig\n  })\n\n  const RadioWithFormily = WrapperComponentBindSupInfo(Radio, (props: any, field): any => props.isCompose && { options: field.dataSource })\n\n  const CheckboxWithFormily = WrapperComponentBindSupInfo(Checkbox, { value: \"checked\" }, (props: any, field): any => props.isCompose ? {} : { composeOpts: field.dataSource, checkedOpts: props.value })\n\n  const TextAreaWithFormily = WrapperComponentBindSupInfo(TextArea)\n\n  const RangeSetterWithFormily = WrapperComponentBindSupInfo(RangeSetter)\n\n  const FormGroupWithFormily = connect(FormGroup)\n\n  const SideLineWithFormily = connect(SideLine)\n  return {\n    Input: InputWithFormily,\n    TextArea: TextAreaWithFormily,\n    Select: SelectWithFormily,\n    InputNumber: InputNumberWithFormily,\n    Radio: RadioWithFormily,\n    Checkbox: CheckboxWithFormily,\n    FormGroup: FormGroupWithFormily,\n    RangeSetter: RangeSetterWithFormily,\n    SideLine: SideLineWithFormily,\n    FormItem\n  }\n}\n\nexport default createCommonField","import * as React from 'react'\nimport { createForm, Form, onFormInputChange, registerValidateRules, onFieldInputValueChange, onFormMount, Field } from '@formily/core'\nimport { createSchemaField, FormProvider } from '@formily/react'\nimport { observable, reaction } from '@formily/reactive'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport createCommonField, { expandField, createDefaultScope } from './register-field'\nimport { FormDesignSupInfo, mapSchema } from '../basic/common'\nimport { FormDesignDataContext, FormDesignRootContext } from \"../basic/context-wrapper\"\nimport './style.less'\nimport { ISetterPaneInteralProps, ISetterPaneOuterProps } from '../module'\n\nconst resetSetterPaneSchema = observable.ref(0)\nconst resetSetterPaneValue = observable.ref(0)\n\nconst validateWithScroll = (form: Form) => {\n  form.validate().catch(\n    ((j: any) => {\n      scrollIntoView(document.getElementById(j[0].address) as HTMLElement, {\n        scrollMode: \"if-needed\",\n        block: 'nearest',\n        inline: 'nearest',\n        behavior: \"smooth\"\n      })\n    })\n  )\n}\n\nconst DefaultNoData = () => {\n  return <div style={{ height: '100%', display: 'flex', alignItems: \"center\", justifyContent: \"center\" }}>请选择需要设置的组件</div>\n}\n\nconst useFormCoreData = (selectedFieldId: string, fieldsMap: any, supInfo: any, changeField: any) => {\n  const fieldInfo = fieldsMap[selectedFieldId] || {}\n  const type = fieldInfo?.type\n  const [formCore, setFormCore] = React.useState<[any, Form | null]>([{ type: \"object\", properties: {} }, null])\n  const [cacheCite] = React.useState<any>({ selectedFieldId: null })\n  const createSchema = React.useCallback((schemaType, curSupInfo, controlFieldsKey: string[] = []) => {\n    if (!cacheCite.selectedFieldId || !fieldsMap[cacheCite.selectedFieldId]) {\n      return { type: \"object\", properties: {} }\n    }\n    const curFieldInfo = curSupInfo.recoverField(cacheCite.formAction.values)\n    return mapSchema(curSupInfo.fieldSetterTemplate[schemaType], (key, item, basePath) => {\n      if (item.type || item['x-component']) {\n        controlFieldsKey.push(basePath.concat(key).toString())\n        const contorlParams = { componentProps: item['x-component-props'], enum: item.enum, visible: item[\"x-visible\"] }\n        const result = curSupInfo.manualContorlSchema?.(key, contorlParams, curFieldInfo)\n        if (result && result !== contorlParams) {\n          if (result.enum && Array.isArray(result.enum)) {\n            item.enum = result.enum\n          }\n          if (result.componentProps) {\n            item['x-component-props'] = result.componentProps\n          }\n          if (typeof result.visible === \"boolean\") {\n            item['x-visible'] = result.visible\n          }\n        }\n      }\n    })\n  }, [])\n\n  const createFormAction = React.useCallback((initialValues, curSupInfo) => createForm({\n    initialValues,\n    validateFirst: true,\n    effects: () => {\n      onFormMount((f) => {\n        if (curSupInfo.validateWithScrollSign.value === cacheCite.selectedFieldId) {\n          curSupInfo.validateWithScrollSign.value = \"\"\n          validateWithScroll(f)\n        }\n      })\n      onFieldInputValueChange(\"*\", (field) => {\n        curSupInfo.onFieldChange?.(field.props.name, field.value)\n      })\n      onFormInputChange((f) => {\n        changeField(cacheCite.selectedFieldId, f.values)\n      })\n    },\n  }), [changeField])\n\n  React.useEffect(() => {\n    if (supInfo) {\n      reaction(() => supInfo.resetSetterPaneSchema.value, () => {\n        const controlFieldsKey: string[] = []\n        const newSchema = createSchema(cacheCite.type, cacheCite.supInfo, controlFieldsKey)\n        cacheCite.formAction.setFormState((f: any) => {\n          controlFieldsKey.forEach((key) => {\n            delete f.fields[key]\n          })\n          setFormCore([newSchema, cacheCite.formAction])\n        })\n      }, {\n        fireImmediately: false\n      })\n    }\n  }, [supInfo])\n\n  React.useEffect(() => {\n    if (supInfo) {\n      cacheCite.selectedFieldId = selectedFieldId\n      cacheCite.type = type\n      cacheCite.supInfo = supInfo\n      const newFormAction = createFormAction(fieldInfo, supInfo)\n      cacheCite.formAction = newFormAction\n      const newSchema = createSchema(type, supInfo)\n      setFormCore([newSchema, newFormAction])\n    }\n  }, [selectedFieldId, type, supInfo])\n\n  return formCore\n}\n\nconst SetterPane: React.FC<ISetterPaneInteralProps> = React.memo(({ createSchemaFieldParams, selectedFieldId, fieldType, fieldsMap, NoData = DefaultNoData, changeField, formDesignId }) => {\n  const fieldInfo = fieldsMap[selectedFieldId] || {}\n\n  const supInfo = FormDesignSupInfo[formDesignId]\n\n  const [fakeThisAttr] = React.useState<{ form: any, selectedFieldId: string }>({ form: {}, selectedFieldId })\n\n  const [schema, formAction] = useFormCoreData(selectedFieldId, fieldsMap, supInfo, changeField)\n\n  const FieldSchemaField = React.useMemo(() => {\n    Object.assign(createSchemaFieldParams.scope, createDefaultScope(fieldInfo))\n    createSchemaFieldParams.scope.$published = fieldInfo.published || false\n    return createSchemaField(createSchemaFieldParams)\n  }, [createSchemaFieldParams, schema])\n\n\n  React.useEffect(() => {\n    fakeThisAttr.form = formAction\n    fakeThisAttr.selectedFieldId = selectedFieldId\n  }, [formAction])\n\n  React.useEffect(() => {\n    if (supInfo) {\n      reaction(() => supInfo.validateWithScrollSign.value, (newValue) => {\n        if (newValue === fakeThisAttr.selectedFieldId) {\n          supInfo.validateWithScrollSign.value = \"\"\n          validateWithScroll(fakeThisAttr.form)\n        }\n      })\n      // value need change\n      reaction(() => supInfo.resetSetterPaneValue.value, (newValue, oldValue) => {\n        if (fakeThisAttr.form?.id) {\n          fakeThisAttr.form.setValues(fieldsMap[fakeThisAttr.selectedFieldId], \"overwrite\")\n        }\n      }, {\n        fireImmediately: false\n      })\n    }\n\n  }, [supInfo])\n\n  return <>\n    {fieldType && formAction ?\n      <FormProvider form={formAction}>\n        <FieldSchemaField schema={schema} />\n      </FormProvider>\n      : <NoData />}\n  </>\n}, (pp, np) => {\n  return pp.selectedFieldId === np.selectedFieldId && pp.fieldType === np.fieldType && pp.changeField === np.changeField && pp.createSchemaFieldParams === np.createSchemaFieldParams\n})\n\nexport const SetterPaneLayoutContext = React.createContext({\n  labelCol: 8,\n  wrapperCol: 16,\n  span: 24\n})\n\nconst SetterPaneWithContext: React.FC<ISetterPaneOuterProps> = (props) => {\n  const { expandFields = {}, layout = {}, scope, ...otherProps } = props\n  const { formDesignPerfixCls } = React.useContext(FormDesignRootContext)\n  const { selectedFieldId, fieldsMap, formDesignId, changeField } = React.useContext(FormDesignDataContext)\n\n  const supInfo = FormDesignSupInfo[formDesignId]\n\n  const createSchemaFieldParams = React.useMemo(() => {\n    const options = {\n      components: { ...createCommonField(supInfo, formDesignPerfixCls!), ...expandField(supInfo, expandFields) },\n      scope: {\n        typeEffect(field: Field) {\n          const { value } = field\n          const values = field.form.values || {}\n          const fieldKey = supInfo.fieldKey\n          const { title, description, placeholder,  id, parId } = values\n          const base = {}\n          const { splitDownKeys, ...template } = (supInfo.fieldInfoTemplate || {})[value]\n          const newValue = { ...base, ...template, title, description, [fieldKey]: values[fieldKey], placeholder, id, parId }\n          changeField(\"\", newValue, true)\n        },\n        customScope: scope\n      }\n    }\n    // 缓存到supInfo\n    FormDesignSupInfo.changeSupInfo(formDesignId, { createSchemaFieldParams: options, resetSetterPaneSchema, resetSetterPaneValue })\n    return options\n  }, [expandFields, scope, supInfo])\n\n  React.useEffect(() => {\n    // 注册自定义检验规则\n    registerValidateRules({\n      customFieldsRules: (v, r, c) => {\n        const curfieldInfo = supInfo.recoverField?.(c.form.values);\n        return supInfo.customFieldsRules?.(curfieldInfo, c?.props?.name, v)\n      }\n    })\n  }, [supInfo])\n\n  const SetterPaneLayoutContextValue = React.useMemo(() => Object.assign({\n    labelCol: 8,\n    wrapperCol: 16,\n    span: 24\n  }, layout), [layout])\n\n  const fieldType = fieldsMap[selectedFieldId || \"\"]?.type\n\n  return <SetterPaneLayoutContext.Provider value={SetterPaneLayoutContextValue}>\n    <SetterPane\n      {...otherProps}\n      formDesignId={formDesignId}\n      selectedFieldId={selectedFieldId || \"\"}\n      fieldsMap={fieldsMap}\n      fieldType={fieldType}\n      createSchemaFieldParams={createSchemaFieldParams}\n      changeField={changeField}\n    />\n  </SetterPaneLayoutContext.Provider>\n}\nexport default SetterPaneWithContext","import React from 'react'\n// import cs from 'classnames'\nimport { useDragLayer } from 'react-dnd'\nimport { FormDesignSupInfo } from './common'\n\nconst layerStyles: React.CSSProperties = {\n  position: \"fixed\",\n  pointerEvents: \"none\",\n  zIndex: -1,\n  left: 0,\n  top: 0,\n  height: \"0px\",\n  visibility: \"hidden\"\n};\n\nfunction getItemStyles(currentOffset: any, clientOffset: any, { contentHeight, contentWidth }: { contentHeight: number, contentWidth: number }, fieldId: string): any {\n  if (!currentOffset || !clientOffset) {\n    return {}\n  }\n  const { x: currentX, y: currentY } = currentOffset;\n  const { x: clientX, y: clientY } = clientOffset\n  const targetStyle: any = {\n    background: \"#fff\",\n    position: \"relative\",\n    left: `${currentX}px`,\n    top: `${currentY}px`,\n    // height: `${contentHeight}px`,\n    // width: `${contentWidth}px`\n  }\n  if (fieldId) {\n    Object.assign(targetStyle, {\n      transform: 'translate(-50%, -50%)',\n      left: `${clientX}px`,\n      top: `${clientY}px`\n    })\n    // targetStyle.transform = 'translate(-50%, -50%)'\n    // targetStyle.left = `${clientX}px`,\n    //   targetStyle.top = `${clientY}px`\n  }\n\n  return targetStyle\n}\n\nconst DragPerview: React.FC<any> = ({ formDesignId, fieldsMap, formDesignPerfixCls }) => {\n  const { dndMaskLayerTemplates, CoustomPerView } = FormDesignSupInfo[formDesignId] || {}\n  const {\n    isDragging,\n    dragItem,\n    currentOffset,//当前dragSource拖动之后的坐标距离页面左上角的偏移\n    clientOffset,//当前鼠标的坐标（即在dragSource上点击的位置在拖动之后的坐标）距离页面的左上角的偏移\n  } = useDragLayer(monitor => ({\n    dragItem: monitor.getItem(),\n    currentOffset: monitor.getSourceClientOffset(),\n    clientOffset: monitor.getClientOffset(),\n    isDragging: monitor.isDragging()\n  }))\n  const [item, customPerviewProps] = React.useMemo(() => {\n    if (dragItem?.id) {\n      const { type: uniquelySign, title: fieldName } = fieldsMap[dragItem.id]\n      const { id: dragId, iconClass } = dndMaskLayerTemplates[uniquelySign] || {}\n      const targetData = { ...dragItem, uniquelySign, fieldName, iconClass, }\n      return [{ ...targetData, dragId }, targetData]\n    } else if (dragItem?.uniquelySign) {\n      const { iconClass, id: dragId, name } = dndMaskLayerTemplates[dragItem?.uniquelySign]\n      const targetData = { ...dragItem, iconClass, fieldName: name }\n      return [{ ...targetData, dragId }, targetData]\n    } else {\n      return [dragItem, dragItem]\n    }\n  }, [dragItem, fieldsMap, dndMaskLayerTemplates])\n\n  const [fakeThisAttr] = React.useState({ contentHeight: 40, contentWidth: 0 })\n\n  React.useEffect(() => {\n    if (item) {\n      const domId = item.dragId || (Object.values(dndMaskLayerTemplates)[0] as any)?.id\n      const contentWidth = document.getElementById(domId)?.offsetWidth\n      fakeThisAttr.contentWidth = contentWidth || 200\n    }\n  }, [item])\n\n  const postionStyle = getItemStyles(currentOffset, clientOffset, fakeThisAttr, item?.id)\n  // const iconType = item?.iconClass\n  return <>\n    <div style={isDragging && item?.uniquelySign ? { ...layerStyles, zIndex: 999, visibility: \"visible\" } : layerStyles}>\n      <div style={postionStyle}>\n        {CoustomPerView ? <CoustomPerView {...customPerviewProps} /> : <div className={`${formDesignPerfixCls}-drag-perview`} style={{ width: fakeThisAttr.contentWidth, height: fakeThisAttr.contentHeight }}>\n          {/* {iconType && <IrsBaseIcon className={`${formDesignPerfixCls}-single-widget-icon`} type={iconType} />} */}\n          <div className={`${formDesignPerfixCls}-single-widget-text`}>\n            {item?.fieldName}\n          </div>\n        </div>}\n      </div>\n    </div>\n    <div id={`${formDesignPerfixCls}-faker-perview`} style={{ position: 'fixed', top: \"-1000px\" }}>&nbsp;</div>\n  </>\n}\n\nexport default DragPerview","import * as React from 'react'\nimport cs from 'classnames'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { validate, submit, getFieldsMap, FormDesignSupInfo } from './common'\nimport { FormDesignProviderWrapper, FormDesignDataContext, FieldOperationsContext, FormDesignRootContext } from './context-wrapper'\nimport DragPerview from './perview'\nimport * as constants from '../constants'\nimport './index.less'\nimport { IFormDesignProps } from '../module';\n\n\nconst FormDesignProvider: React.FC<IFormDesignProps> = React.forwardRef((props, ref) => {\n  const rootState = React.useContext(FormDesignRootContext)\n  const dataState = React.useContext(FormDesignDataContext)\n  const operationFuncs = React.useContext(FieldOperationsContext)\n  const canRender = React.useMemo(() => FormDesignSupInfo[dataState.formDesignId]?.mounted, [dataState.formDesignId])\n  React.useImperativeHandle(ref, () => {\n    const supInfo = FormDesignSupInfo[dataState.formDesignId] || {}\n    const { recoverField, resetSetterPaneSchema, resetSetterPaneValue } = supInfo\n    /** \n     * add field \n     */\n    const addField = (uniquelySign: string, depandFieldId: string | null = dataState.selectedFieldId, noValidate: boolean = true) => {\n      const dragFieldInfo = { type: constants.BASE, uniquelySign }\n      const depandField = dataState.fieldsMap[depandFieldId || \"\"]\n      let placeLayerInfo: any = {\n        contentFieldId: null,\n        dropIndex: null,\n        id: \"\",\n        type: \"BASE\"\n      }\n      if (depandField) {\n        const contentFieldId = depandField.parId\n        const operationContent = contentFieldId ? (dataState.nestedFieldPostions[contentFieldId] || []) : dataState.outerFieldPostions\n        let dropIndex = operationContent.findIndex((el: any) => el.id === depandFieldId)\n        dropIndex = dropIndex > -1 ? dropIndex + 1 : operationContent.length\n        placeLayerInfo = {\n          contentFieldId,\n          dropIndex,\n          id: depandFieldId,\n          type: \"BASE\"\n        }\n      }\n      return operationFuncs.placeField(placeLayerInfo, dragFieldInfo, noValidate)\n    }\n    /**\n     * delete fields \n     */\n    const deleteField = (deleteFieldId: string | string[], noValidate: boolean = true) => {\n      const params: [string | string[], string | null, number | null] = [deleteFieldId, null, null]\n      if (typeof deleteFieldId === \"string\") {\n        const contentFieldId = dataState.fieldsMap[deleteFieldId]?.parId || null\n        // const operationContent = contentFieldId ? (state.nestedFieldPostions[contentFieldId] || []) : state.outerFieldPostions\n        // let deleteIndex = operationContent.findIndex((el: any) => el.id === deleteFieldId)\n        // deleteIndex = deleteIndex > -1 ? deleteIndex + 1 : operationContent.length\n        params[1] = contentFieldId\n        // params[2] = deleteIndex\n      }\n      return operationFuncs.deleteField(...params, null, noValidate)\n    }\n    // 获取当前选中字段id\n    const getSelectFieldId = () => dataState.selectedFieldId\n\n    const resetSetterPane = () => {\n      resetSetterPaneValue.value = resetSetterPaneValue.value + 1\n      resetSetterPaneSchema.value = resetSetterPaneSchema.value + 1\n    }\n\n    const changeFieldInfo = (fieldId: string, newField: any, cover?: boolean) => {\n      if (fieldId) {\n        const { outerFieldPostions, nestedFieldPostions, fieldsMap } = dataState\n        const parId = fieldsMap[fieldId]?.parId\n        const { visible } = (parId ? nestedFieldPostions[parId] : outerFieldPostions).filter((el: any) => el.id === fieldId)[0] || {}\n        newField = visible ? supInfo.transformField(newField) : newField\n      }\n      dataState.changeField(fieldId, newField, cover || false)\n      if (!fieldId || fieldId === dataState.selectedFieldId) {\n        resetSetterPaneValue.value = resetSetterPaneValue.value + 1\n      }\n    }\n\n    const getSelectField = () => recoverField(dataState.fieldsMap[dataState.selectedFieldId || \"\"])\n\n    const scrollToErrorParams = (rejectPromise: any) => {\n      let firstErrorFlieldId = \"\"\n      return rejectPromise.catch((j: any[]) => {\n        const [[key]]: Array<[string, any]> = Object.entries(j[0])\n        firstErrorFlieldId = key\n        throw j\n      }).finally(() => {\n        if (firstErrorFlieldId) {\n          operationFuncs.selectField?.(firstErrorFlieldId)\n          supInfo.validateWithScrollSign.value = firstErrorFlieldId\n        }\n      })\n    }\n\n    return {\n      validate: () => scrollToErrorParams(validate(dataState, supInfo)),\n      submit: () => scrollToErrorParams(submit(dataState, supInfo)),\n      getFieldsMap: getFieldsMap.bind(null, dataState, recoverField),\n      setSelectFieldId: operationFuncs.selectField,\n      getSelectFieldId,\n      getSelectField,\n      deleteField,\n      addField,\n      changeFieldInfo,\n      resetSetterPane\n    }\n  }, [dataState, operationFuncs])\n\n  return <DndProvider backend={HTML5Backend}>\n    <div className={cs(rootState.formDesignPerfixCls, props.className)} style={props.style}>\n      {canRender && props.children}\n    </div>\n    <DragPerview\n      formDesignPerfixCls={rootState.formDesignPerfixCls}\n      formDesignId={dataState.formDesignId}\n      fieldsMap={dataState.fieldsMap}\n    />\n  </DndProvider>\n})\n\nexport default FormDesignProviderWrapper(React.memo(FormDesignProvider))","import React from \"react\";\ninterface IProps {\n  prefix?: string;\n}\nconst rootContext = React.createContext<IProps>({});\nconst formDesignContext = React.createContext<any>({});\nexport { rootContext, formDesignContext };\n","import {createFromIconfontCN} from '@ant-design/icons'\n\nconst Icon = createFromIconfontCN({\n    scriptUrl:\"//at.alicdn.com/t/font_3381042_lt1lqf512ec.js\"\n})\n\nexport default Icon","import React from 'react'\nimport {rootContext} from './context'\nimport Icon from '../../components/icon'\nimport { Button, Space } from 'antd'\ninterface IButtonGroupProps {\n    dataSource: any[]\n    buttonSize?: 'small' | 'middle' | 'large'\n    size?: 'small' | 'middle' | 'large' | number\n    onChange?: (sign: string) => any\n}\nconst ButtonGroup: React.FC<IButtonGroupProps> = React.memo(({ onChange, dataSource, size, buttonSize }) => {\n    const [selectId, setSelectId] = React.useState(0)\n    const onClick = (id: number, sign: string) => {\n        setSelectId(id)\n        onChange?.(sign)\n    }\n    return <Space size={size || 0}>\n        {\n            dataSource.map(({ children, sign, ...props }, i) => <Button\n                size={buttonSize}\n                key={sign}\n                {...props}\n                style={i === selectId ? { cursor: \"default\" } : {}}\n                disabled={i === selectId}\n                onClick={onClick.bind(null, i, sign)}\n            >\n                {children}\n            </Button>)\n        }\n    </Space>\n})\n\ninterface IProps {\n    onChange: (sign: string) => void\n}\n\nconst dataSource = [{ children: <Icon type=\"icon-design\" />, sign: 'design' }, \n{ children: <Icon type=\"icon-json\" />, sign: \"json\" },\n{children: <Icon type=\"icon-yunhang\"/>,sign: 'run'}]\n\nconst ContentHeader: React.FC<IProps> = ({ onChange }) => {\n    const { prefix } = React.useContext(rootContext)\n\n    return <div className={`flex ${prefix}-content-header`}>\n        <ButtonGroup\n            buttonSize='small'\n            dataSource={dataSource}\n            onChange={onChange}\n        />\n    </div>\n}\n\nexport default ContentHeader","// 使用\nconst fieldsMap: any = {\n  TEXT: { type: \"string\", \"x-decorator\": \"FormItem\", \"x-component\": \"Input\" },\n  TEXTAREA: { type: \"string\", \"x-decorator\": \"FormItem\", \"x-component\": \"Input.TextArea\" },\n  DATE: { type: \"string\", \"x-decorator\": \"FormItem\", \"x-component\": \"DatePicker\" },\n  NUMBER: { type: \"string\", \"x-decorator\": \"FormItem\", \"x-component\": \"NumberPicker\" },\n  SELECT: {  type: \"string\",\"x-decorator\": \"FormItem\", \"x-component\": \"Select\" },\n};\n\nconst validatorMap:any = {\n  DATE: (\n    minDate: string = \"1980-01-01\",\n    maxDate: string = \"9999-01-01\",\n    minDateErrorMsg: string = \"请大于最小值\",\n    maxDateErrorMsg: string = \"请小于最大值\"\n  ) => {\n    return (v: any) => {\n      if (!v) {\n        return \"\";\n      } else if (+new Date(v) >= +new Date(maxDate)) {\n        return maxDateErrorMsg;\n      } else if (+new Date(v) <= +new Date(minDate)) {\n        return minDateErrorMsg;\n      }\n    };\n  },\n};\n\nconst dealWithStatusInfo = (statusInfo: any) => {\n  const { statusType } = statusInfo;\n  switch (statusType) {\n    case \"EDITABLE\":\n      return { editable: true };\n    case \"READONLY\":\n      return { editable: false };\n    case \"HIDDEN\":\n      return { visible: false };\n  }\n};\n\nconst dealWithValueRule = (valueRule: any,supInfo:any = {}) => {\n    const {type} = supInfo\n    const speicalHandle = ['DATE'].includes(type)\n  return Object.entries(valueRule).reduce(\n    (acc: any, [key, value]) => {\n      if ([\"minLength\", \"maxLength\", \"minimum\", \"maximum\"].includes(key)) {\n        acc[key] = Number(value);\n      } else if (key === \"required\" && value) {\n          acc[\"x-validator\"].push({required:value,message:valueRule.requiredErrorMsg})\n      }else if(key === 'range' && value && speicalHandle){\n        acc['x-validator'].push(validatorMap[type](valueRule.minDate,valueRule.maxDate))\n      }\n      return acc;\n    },\n    { \"x-validator\": [] }\n  );\n};\n\nclass BaseField {\n  static initData = (props: any) => {\n    const { type, description, title, statusInfo, valueRule, ...otherProps } =\n      props;\n    if (!fieldsMap[type]) {\n      throw new Error(`${type} 类型不存在`);\n    }\n    const status = dealWithStatusInfo(statusInfo);\n    const rules = dealWithValueRule(valueRule,{type});\n    return Object.assign(\n      { title, description },\n      fieldsMap[type],\n      { status },\n      rules,\n      { \"x-component-props\": otherProps }\n    );\n  };\n}\n\nclass FormilyField extends BaseField {\n  constructor(props: any) {\n    super();\n    const targetData = FormilyField.initData(props);\n    Object.assign(this, targetData);\n  }\n}\n \n\n\nexport default FormilyField","import FormilyField from './formily-field'\nconst transformSchema = (originData: any[],manualContorlField:(field:FormilyField)=>FormilyField =(f)=>f) => {\n    const properties = originData.reduce((acc, originInfo) => {\n        try {\n            const { id, ...props } = originInfo\n            let formilyField = new FormilyField(props)\n            formilyField = manualContorlField(formilyField)\n            acc[id] = formilyField\n        } catch (err) {\n            console.error(err)\n        }\n        return acc\n    }, {})\n    return { type: 'object', properties }\n}\n\nexport default transformSchema","import React from 'react'\nimport {\n    FormItem,\n    Input,\n    Select,\n    DatePicker,\n    NumberPicker\n  } from '@formily/antd'\n\n  import { createForm } from '@formily/core'\nimport { FormProvider, createSchemaField } from '@formily/react'\n\nconst SchemaField = createSchemaField({\n    components: {\n      FormItem,\n      Input,\n      Select,\n      DatePicker,\n      NumberPicker\n    },\n  })\n  \n  const form = createForm()\n\n  const Form:React.FC<any> = ({schema}) => {\n      return <FormProvider form={form}>\n      <SchemaField schema={schema} />\n    </FormProvider>\n  }\n\n  export default Form","import React from 'react'\nimport { Layout, Input, Select } from 'antd'\nimport { Drag, SimulatorWrap, SetterPane } from '../../components/formily'\nimport { rootContext, formDesignContext } from './context'\nimport ContentHeader from './content-header'\nimport transformSchema from '../../components/formily-example/schema'\nimport Form from '../../components/formily-example'\nconst { Content, Sider } = Layout\nconst { TextArea } = Input\n\nconst expandFields = {\n    CustomDataSourceSetter: Input,\n    AssociateDataSourceSetter: () => \"AssociateDataSourceSetter\",\n    NonEditableInfoSetter: (props: any) => <Select options={[{ key: \"1\", value: \"1\" }, { key: \"2\", value: \"2\" }]} {...props} />,\n}\ninterface IDragGroupProps {\n    dataSource: Array<{ name: string, uniquelySign: string }>\n}\n\nconst DragGroup: React.FC<IDragGroupProps> = ({ dataSource }) => {\n    return <div style={{ display: \"flex\", flexDirection: \"column\", padding: \"8px 16px\" }}>\n        {dataSource.map((el: any) => {\n            return <Drag key={el.uniquelySign} uniquelySign={el.uniquelySign} info={el} style={{ marginBottom: \"8px\" }} />\n        })}\n    </div>\n}\n\nconst FormContent: React.FC<any> = ({ json }) => {\n    const schema = React.useMemo(() => transformSchema(json), [json])\n    return <div style={{width:800,margin:\"0 auto\"}}>\n        <Form schema={schema} />\n    </div> \n}\n\nconst manualContorlField = (formilyField: any) => {\n    const dealWith = (value: any): any => {\n        if (Array.isArray(value)) {\n            return value.map(dealWith)\n        } else if (typeof value === 'object') {\n            const targetData: any = {}\n            for (var key in value) {\n                targetData[key] = dealWith(value[key])\n            }\n            return targetData\n        } else if (typeof value === 'function') {\n            return value.toString()\n        } else {\n            return value\n        }\n    }\n\n    for (var key in formilyField) {\n        formilyField[key] = dealWith(formilyField[key])\n    }\n    return formilyField\n}\ninterface IDisplayJsonProps {\n    prefix: string\n    json: any[]\n}\n\nconst DisplayJson: React.FC<IDisplayJsonProps> = ({ prefix, json }) => {\n    const [data, setData] = React.useState<any>(json)\n\n    const onChange = React.useCallback((key: string) => {\n        if (key === \"origin\") {\n            setData(json)\n        } else {\n            const schema = transformSchema(json, manualContorlField)\n            setData(schema)\n        }\n    }, [])\n\n    return <div className={`${prefix}-json-show`}>\n        <Select\n            style={{ width: 200 }}\n            defaultValue='origin'\n            options={[{ label: \"原始数据\", value: \"origin\" }, { label: \"schema格式\", value: \"schema\" }]}\n            onChange={onChange}\n        />\n        <TextArea\n            className={`${prefix}-json-show-main`}\n            value={JSON.stringify(data, undefined, '\\t')}\n            bordered={false}\n            autoSize={true}\n        />\n    </div>\n}\n\n\nconst reducer = (state: any, actions: any) => {\n    switch (actions.type) {\n        case 'design':\n            return { ...state, selectId: actions.type }\n        case 'json':\n            return { ...state, selectId: actions.type, json: actions.json }\n        case \"run\":\n            return { ...state, selectId: actions.type, json: actions.json }\n        default:\n            return state\n    }\n}\n\nconst defaultState = {\n    selectId: \"design\",\n    json: {}\n}\n\nconst ContentMain: React.FC<IDragGroupProps> = ({ dataSource }) => {\n    const { formDesignRef } = React.useContext(formDesignContext)\n    const { prefix } = React.useContext(rootContext)\n    const [{ selectId, json }, dispatch] = React.useReducer(reducer, { ...defaultState })\n\n    const onChange = React.useCallback((sign) => {\n        const task = ['json', 'run'].includes(sign) ? formDesignRef.current.submit().then((json: any) => ({ json })) : Promise.resolve()\n        task.then((result: any) => {\n            dispatch({ type: sign, ...result })\n        })\n    }, [])\n\n    return <Layout style={{ height: \"100%\" }}>\n        <Sider theme=\"light\" width={300}>\n            <DragGroup dataSource={dataSource} />\n        </Sider>\n        <Content className={`flex ${prefix}-content-main`}   >\n            <ContentHeader onChange={onChange} />\n            <div className={`${prefix}-operation-content`}>\n                {selectId === 'design' && <SimulatorWrap />}\n                {selectId === 'json' && <DisplayJson prefix={prefix!} json={json} />}\n                {selectId === 'run' && <FormContent prefix={prefix!} json={json} />}\n            </div>\n        </Content>\n        {selectId === 'design' && <Sider theme=\"light\" width={360} style={{ padding: \"8px 16px\", height: \"100%\", overflow: \"overlay\" }} >\n            <SetterPane\n                expandFields={expandFields}\n            />\n        </Sider>}\n    </Layout>\n}\nexport default ContentMain","import * as React from 'react'\n// import { uniqueId } from 'lodash'\nimport { FormDesignProvider, } from '../../components/formily'\n//@ts-ignore\nimport { Layout, } from 'antd'\nimport { IFormDesignRef } from '../../components/formily/module'\nimport ContentMain from './content-main'\nimport './index.less'\nimport {rootContext,formDesignContext} from './context'\nconst textSchema = require('./field-json/text.json')\nconst textareaSchema = require('./field-json/textarea.json')\nconst dateSchema = require('./field-json/date.json')\nconst numberSchema = require('./field-json/number.json')\nconst selectSchema = require('./field-json/select.json')\n\n\n\nconst templates = [\n  { TEXT: textSchema },\n  { TEXTAREA: textareaSchema },\n  { DATE: dateSchema },\n  { NUMBER: numberSchema },\n  { SELECT: selectSchema }\n]\n\nconst dataSource = [{\n  name: \"文本\",\n  uniquelySign: \"TEXT\",\n}, {\n  name: \"文本域\",\n  uniquelySign: \"TEXTAREA\",\n}, {\n  name: \"日期\",\n  uniquelySign: \"DATE\",\n}, {\n  name: \"数值\",\n  uniquelySign: \"NUMBER\",\n}, {\n  name: \"选择\",\n  uniquelySign: \"SELECT\",\n}]\n\n\n// const CustomArea = (count: any, { fieldInfo }: any) => {\n//   const statusInfo = fieldInfo.statusInfo || {}\n//   return <>{`statusInfo>statusType:`}{statusInfo['statusType']}<br />\n//     {`statusInfo>readonlyInfo:`}{statusInfo['readonlyInfo']}<br />\n//     {`statusInfo>hiddenInfo:`}{statusInfo['hiddenInfo']}\n//   </>\n// }\n\n\n\n// const fakeAttr = { reset: 0 }\nconst Main: React.FC<any> = () => {\n  const formDesignRef = React.useRef<IFormDesignRef>({} as IFormDesignRef)\n  //@ts-ignore\n  const [formVo, setFormVo] = React.useState([])\n\n  const [curTemplates, setCurTemplates] = React.useState<any[]>([])\n\n  React.useEffect(() => {\n    console.log('mounted')\n    setCurTemplates(templates)\n    return () => {\n      console.log('unmounted')\n      setCurTemplates([])\n    }\n  }, [])\n\n\n  return <>\n    <Layout style={{ height: \"100%\", borderBottom: \"1px solid #d9d9d9\" }}>\n      {/* <Header style={{ background: \"#fff\", borderBottom: \"1px solid #d9d9d9\" }}>\n      </Header> */}\n      <formDesignContext.Provider value={{ formDesignRef }}>\n        <FormDesignProvider\n          templates={curTemplates}\n          style={{ flex: 1, overflow: \"hidden\" }}\n          ref={formDesignRef}\n          formVo={formVo}\n          // fieldKey=\"inheritCode\"\n          // createInnerFieldInfo={createInnerFieldInfo}\n          // createCopyFieldInfo={createCopyFieldInfo}\n        // fieldFunctionContorl={fieldFunctionContorl}\n        // customFieldsRules={customFieldsRules}\n        // deleteFieldValidate={deleteFieldValidate}\n        // manualContorlSchema={manualContorlSchema}\n        // onFormVoChange={onFormVoChange}\n        // onFieldChange={onFieldChange}\n        // onChangeValidateInSetter={onChangeValidateInSetter}\n        // extendMaskLayers={{\n        //   SA_STAFF_NO: { name: \"工号\", iconClass: \"icon-file-copy\", uniquelySign: \"SA_STAFF_NO\" }\n        // }}\n        >\n          <ContentMain dataSource={dataSource} />\n        </FormDesignProvider>\n      </formDesignContext.Provider>\n    </Layout>\n  </>\n}\n\nconst contextValue = {\n  prefix: 'custom-form'\n}\n\nconst Page: React.FC = () => {\n  return <rootContext.Provider value={contextValue}>\n    <Main />\n  </rootContext.Provider>\n}\n\nexport default Page;\n\n// const createInnerFieldInfo = (field: any) => {\n//   const inheritCode = uniqueId(`A-${Math.random().toString(36).slice(-8)}-`)\n//   return { ...field, inheritCode }\n// }\n\n// const createCopyFieldInfo = (copyTemplate: any) => {\n//   const inheritCode = uniqueId(`a-${Math.random().toString(36).slice(-8)}-`)\n//   return { ...copyTemplate, inheritCode }\n// }\n\n  // const fakerUnquiely = (fieldsMap: any) => {\n  //   setCount(count + 1)\n  // }\n\n  // const changeSetterPaneLayout = () => {\n  //   const newLayout = layout.labelCol === 24 ? { span: 24, labelCol: 8, wrapperCol: 16 } : { span: 12 }\n  //   setLayout(newLayout)\n  // }\n\n  // const validate = () => {\n  //   formDesignRef.current.validate().then((validatorResult: any) => {\n  //     console.log(validatorResult);\n  //   })\n  // }\n\n\n\n\n  // const setFormVoHandle = () => {\n  //   setFormVo(JSON.parse(sessionStorage.getItem(\"perFormVo\") || \"[]\"))\n  // }\n\n// const customFieldsRules = (f: any, key: any, v: any) => {\n//   console.log(f, key, v);\n//   // if (key === \"statusInfo>editableInfo>customInfo\") {\n//   //   return v === \"123\" ? \"custom error\" : \"\"\n//   // }\n//   return \"\"\n// }\n\n// const fieldFunctionContorl = (el: any) => {\n//   const obj = {\n//     canDrag: true,\n//     canDel: true,\n//     canCopy: true,\n//     visible: !el.hidden\n//   }\n//   return obj;\n// }\n\n// const deleteFieldValidate = (operationField: any) => {\n//   return [operationField.id]\n// }\n\n// const changeFieldInfo = () => {\n//   formDesignRef.current.changeFieldInfo(\"\", { title: \"111\" })\n// }\n\n\n// const onFormVoChange = (type: string) => {\n//   // console.log(type);\n// }\n\n// const onFieldChange = (key: any, value: any) => {\n//   // console.log(key, value);\n// }\n\n// const resetSetterPane = () => {\n//   ++fakeAttr.reset\n//   formDesignRef.current.resetSetterPane()\n// }\n\n// const getSelectField = () => {\n//   const result = formDesignRef.current.getSelectField()\n//   console.log(result);\n// }\n\n// const onChangeValidateInSetter = (...params: any) => {\n//   return true\n// }\n// const getFieldsMap = () => {\n//   console.log(formDesignRef.current.getFieldsMap());\n// }"],"sourceRoot":""}