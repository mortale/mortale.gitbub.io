(this["webpackJsonpchild-react17"]=this["webpackJsonpchild-react17"]||[]).push([[4],{419:function(e,t,n){},463:function(e,t,n){},476:function(e,t,n){},477:function(e,t,n){},492:function(e,t,n){},493:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c","x-component-props":{"maxLength":20},"x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"maxLength":100,"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXT","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"20"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","initialValue":"EDITABLE","x-component-props":{"isCompose":true},"enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},494:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c\u57df","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXTAREA","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"100"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},495:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u65e5\u671f","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"DATE","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u9009\u62e9\u65e5\u671f","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"format":{"title":"\u65e5\u671f\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","initialValue":"YYYY-MM-DD","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"target":"[valueRule>minDate,valueRule>maxDate]","fulfill":{"state":{"component[1].format":"{{$self.value}}"}}},"enum":[{"value":"YYYY","label":"\u5e74"},{"value":"YYYY-MM","label":"\u5e74-\u6708"},{"value":"YYYY-MM-DD","label":"\u5e74-\u6708-\u65e5"},{"value":"YYYY-MM-DD HH:mm","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206"},{"value":"YYYY-MM-DD HH:mm:ss","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2"}]}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minDate,valueRule>maxDate]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","initialValue":["2000","2025"],"x-component-props":{"type":"rangepicker"},"x-hidden":"{{!$values[\'valueRule>range\']}}","x-validator":[{"rangeSetterValidateRules":true}]}}}}}')},496:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6570\u503c","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"NUMBER","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165\u6570\u503c","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"carryRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u8fdb\u4f4d\u89c4\u5219"},"properties":{"valueRule>decimal":{"title":"\u5c0f\u6570\u4f4d","x-decorator":"FormItem","x-component":"InputNumber","initialValue":2,"x-component-props":{"width":"100%","min":0,"max":20}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minimum,valueRule>maximum]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","x-visible":"{{!!$values[\'valueRule>range\']}}","initialValue":["0","100"],"x-component-props":{"type":"number","placeholder":"\u4e0d\u9650"},"x-validator":[{"rangeSetterValidateRules":true}],"x-reactions":{"dependencies":["valueRule>decimal"],"fulfill":{"state":{"component[1].decimal":"{{$deps[0]}}"}}}}}}}}')},497:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u5355\u9009","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"SELECT","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}]}}},"associateSetterGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u5173\u8054\u8bcd\u5178\u8868"},"properties":{"statusInfo>editableInfo>associateInfo":{"x-decorator":"FormItem","x-component":"AssociateDataSourceSetter","x-decorator-props":{"span":24},"x-validator":{"customFieldsRules":true}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},511:function(e,t,n){"use strict";n.r(t);var o,i=n(39),r=n(0),a=n.n(r),l=n(11),c=n(42),s=n(16),u=n(516),d=n(37),f=n.n(d),p="BASE",m="CHANGE_FORMVO",v="INIT_FORMDESIGN",b="PLACE_FIELD",x="DELETE_FIELD",j="BATCH_DELETE_FIELD",h="MOVE_FIELD",g="SELECT_FIELD",I="COPY_FIELD",O="CHANGE_FIELD",y="CLEAR_FORMDESIGN",F=n(170),E=n(59),D=n(54),C=n(49),S=n(50),T=n(70),w=n(62),P=n(234),R=["items"],A=["fieldFunctionContorl","templates","extendMaskLayers"],N=["mounted","unMounted"],M=["templates","splitDownKeys","dndMaskLayerTemplates"],V=["parId","splitDownKeys"],k=function(e){return void 0===e||null===e||"object"!==typeof e?e:JSON.parse(JSON.stringify(e))},L=function(e){return"[object Object]"===Object.prototype.toString.call(e)},$=function(e,t){if(!e)return[];for(var n=[e],o=t[n[n.length-1]];o.parId;)n.push(o.parId),o=t[n[n.length-1]];return n},q=function(e){var t={};if(!e||!L(e))return null;var n=this.fieldInfoTemplate[e.type];n||console.error("".concat(e.type," template is not found"));var o=Array.from((null===n||void 0===n?void 0:n.splitDownKeys)||[]);for(var i in e)if(!V.includes(i)&&Object.prototype.hasOwnProperty.call(e,i)){var r=""===e[i]?null:k(e[i]),a=i.replace(/(\"|\')/g,"").split(">"),l=a.pop();if(a.length>=1){if(a.every((function(e){return o.includes(e)})))a.reduce((function(e,t){return e[t]||(e[t]={}),e[t]}),t)[l]=r}else t[i]=r}return t},Y=function(e,t){var n={};if(!e||!L(e))return null;void 0!==t&&(n.parId=t);var o=this.fieldInfoTemplate[e.type];o||console.error("".concat(e.type," template is not found"));var i=Array.from((null===o||void 0===o?void 0:o.splitDownKeys)||[]);return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=o?o+">"+r:r,l=t[r];i.includes(r)&&L(l)?e(l,a):n[a]=k(l)}}(e),n},B=function(e,t){var n,o=this.fieldFunctionContorl,i=this.transformField,r=this.fieldKey,a={},c={};return n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t||void 0===t?void 0:t.map((function(t){var s=""+t[r],u=(null===o||void 0===o?void 0:o(t))||{},d=u.canDrag,f=u.canDel,p=u.canCopy,m=u.visible,v={id:s,canDrag:null===d||void 0===d||d,canDel:null===f||void 0===f||f,canCopy:null===p||void 0===p||p,visible:null===m||void 0===m||m};return c[s]=v.visible?i(t,n):Object(l.a)(Object(l.a)({},t),{},{parId:n}),t.items&&(a[s]=e(t.items||[],s)),v}))}(e),{outerFieldPostions:n,nestedFieldPostions:a,fieldsMap:c}},G=function e(t){return(t=Array.isArray(t)?t:[t]).reduce((function(t,n){if("Identifier"===n.type)t.push(n.value);else if("DestructorExpression"===n.type){var o;"ArrayPattern"===(null===(o=n.value)||void 0===o?void 0:o.type)?t.push.apply(t,Object(D.a)(e(n.value.elements))):(console.warn("parserType",n.type),console.warn("afterType",n.value.type))}else console.warn("otherType",n.type);return t}),[])},W=function(e){var t={},n={};return e&&e.forEach((function(e){var o=function(o){if(Object.prototype.hasOwnProperty.call(e,o)){var i=e[o];if(i){t[o]=Object(l.a)({splitDownKeys:new Set},i.initialValue||{}),n[o]=i;var r=z(i,(function(e,n){var i=new P.a(e).parse(),r=void 0!==n.initialValue&&null!==n.initialValue;G(i).forEach((function(e,i){var a=e.replace(/(\"|\')/g,"").split(">");a.length>1&&(a.pop(),a.forEach((function(e){return t[o].splitDownKeys.add(e)}))),!r||n.type&&!["void","array","object"].includes(n.type)||(Array.isArray(n.initialValue)?t[o][e]=n.initialValue[i]:t[o][e]=n.initialValue)})),delete n.initialValue}));n[o]=r.toJSON()}}};for(var i in e)o(i)})),{fieldInfoTemplate:t,fieldSetterTemplate:n}},H=function(e,t){var n=this,o=(t.data||{}).contorlTrigger;return o&&(o=Array.isArray(o)?o:[o]).forEach((function(o){var i=e[o];e[o]=function(){for(var e,r,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];Promise.resolve(null===(e=null===(r=n["".concat(o,"ValidateInSetter")])||void 0===r?void 0:r.call(n,t.props.name,l[0],n.recoverField(t.form.values)))||void 0===e||e).then((function(e){e&&i.apply(void 0,l)}))}})),Object(l.a)({},e)},z=function(e,t){return function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T.a(""),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mapProperties((function(n,r,a){var l=o.concat(r);if(void 0===r||null===r)e(n,o);else{var c=null===t||void 0===t?void 0:t(r,n,o,i);n.type&&["object","void"].includes(n.type)&&e(n,l,c)}}))}(e=new w.b(Object.assign({type:"object"},e))),e},X=function(e,t,n){var o=n.createSchemaFieldParams;t=new w.b(t);var i=Object(T.b)({initialValues:e,validateFirst:!0});return z(t,(function(e,t,n){var r,a=t.toFieldProps(o),l=Object.assign({},a,{name:e,basePath:n});(r="object"===t.type?i.createObjectField(l):"array"===t.type?i.createArrayField(l):"void"===t.type?i.createVoidField(l):i.createField(l))&&"none"===r.display&&(i.deleteValuesIn(e),r.destroy())})),i.onMount(),i.submit().finally((function(){i.onUnmount()}))},K=function(e,t){var n=e.outerFieldPostions,o=e.nestedFieldPostions,i=e.fieldsMap;return function e(n){return n.reduce((function(n,r){var a=r.id,l=r.visible,c=i[a];return l&&(c=t(c),o[a]&&(c.items=e(o[a])),n.push(c)),n}),[])}(n)},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.fieldsMap,r=e.outerFieldPostions,a=e.nestedContainerFieldPostions,l=t.fieldSetterTemplate,c=Object.entries(o).reduce((function(e,n){var o=Object(i.a)(n,2),c=o[0],s=o[1];if(!s)return e;var u,d=null===s||void 0===s?void 0:s.parId,f=(d?a[d]:r).filter((function(e){return e.id===c}))[0].visible,p=null!==(u=l[s.type])&&void 0!==u?u:null;return f?p?e.push(X(s,p,t).then((function(e){return[c,e]}),(function(e){throw[c,e]}))):e.push(Promise.reject([c,[{code:"schemaError",messages:s.type?"".concat(c,"\u5b57\u6bb5\u7c7b\u578b\u4e3a\u4e0d\u5b58\u5728"):"".concat(c,"\u7684\u7c7b\u578b\u4e3a").concat(s.type,"\u7684schema\u7f3a\u5931")}]])):e.push([c,s]),e}),[]);return Promise.allSettled(c).then((function(e){var t=e.reduce((function(e,t){var n=t.status,o=t.value,i=t.reason;return"rejected"===n?e.error.push(Object(s.a)({},i[0],i[1])):e.success[o[0]]=o[1],e}),{error:[],success:{}});if(t.error.length)throw t.error;if(n)return t.success}))},U=function e(t,n){var o=n.fieldInfoTemplate,i=n.fieldKey,r=[];return[(Array.isArray(t)?t:[t]).map((function(t){var n,a,u=t.items,d=Object(c.a)(t,R),f=null!==(n=t[i])&&void 0!==n?n:Math.random().toString(36).slice(-8)+ +new Date,p=(o[d.type]||{}).title,m=Object(l.a)(Object(l.a)({},d),{},(a={id:f},Object(s.a)(a,i,f),Object(s.a)(a,"title",p),a));return u&&Array.isArray(u)&&(m.items=e(u,o)),r.push(f),m})),r]},J=function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,null,[{key:"initSupInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldFunctionContorl,o=t.templates,i=t.extendMaskLayers,r=Object(c.a)(t,A);console.log("initSupInfo",o);var a=W(o);this[e]=Object(l.a)(Object(l.a)(Object(l.a)({mounted:!0,fieldFunctionContorl:n},r),a),{},{dndMaskLayerTemplates:Object(E.i)(i||{}),extendMaskLayers:i}),Object.assign(this[e],{transformField:Y.bind(this[e]),recoverField:q.bind(this[e]),transformFormVo:B.bind(this[e]),dealWithCustomData:H.bind(this[e])})}},{key:"changeSupInfo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this[t]){var o=this[t],i=(o.mounted,o.unMounted,Object(c.a)(o,N)),r=e.diffChange(i,n);Object.assign(this[t],r)}}},{key:"deleteSupInfo",value:function(e){this[e]&&Object.assign(this[e],{unMounted:!0})}},{key:"diffChange",value:function(e,t){var n=t.templates,o=(t.splitDownKeys,t.dndMaskLayerTemplates,Object(c.a)(t,M));return n&&e.templates!==n&&(console.log("diffChange",n),Object.assign(o,W(n))),o}}]),e}();!function(e){e.add="add",e.move="move",e.delete="delete",e.copy="copy",e.select="select"}(o||(o={}));var Q,Z,ee=["type","formDesignId"],te=["fieldsMap"],ne=function(e,t){e[t]=void 0},oe={formDesignId:"",outerFieldPostions:[],nestedFieldPostions:{},fieldsMap:{},selectedFieldId:null},ie=function(e,t,n){var o,i=e.innerField,r=e.placeLayerInfo,a=(e.dragFieldInfo,r.contentFieldId),l=r.dropIndex,c=a?t.nestedFieldPostions[a]||(t.nestedFieldPostions[a]=[],t.nestedFieldPostions[a]):t.outerFieldPostions,s=l||Object(F.findLastIndex)(c,(function(e){return e.visible}))+1,u=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,i);c.splice.apply(c,[s,0].concat(Object(D.a)(u.outerFieldPostions))),a?t.nestedFieldPostions[a]=Object(D.a)(c):t.outerFieldPostions=Object(D.a)(c),Object.assign(t.fieldsMap,u.fieldsMap),Object.assign(t.nestedFieldPostions,u.nestedFieldPostions)},re=function(e,t,n){var o,i=e.contentFieldId,r=e.copyField,a=e.innerIndex,l=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,r),c=i?t.nestedFieldPostions[i]:t.outerFieldPostions;c.splice.apply(c,[a+1,0].concat(Object(D.a)(l.outerFieldPostions))),i?t.nestedFieldPostions[i]=Object(D.a)(c):t.outerFieldPostions=Object(D.a)(c),Object.assign(t.nestedFieldPostions,l.nestedFieldPostions),Object.assign(t.fieldsMap,l.fieldsMap)},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:""},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.index,i=t.id,r=n.index,a=[],l=e.filter((function(e){return e.id===i}))[0];e.length&&-1!==o||a.push(l);var c=e.reduce((function(e,t,n){return n!==r&&e.push(t),n===o&&l&&e.push(l),e}),a);if(l&&void 0===o){var s=Object(F.findLastIndex)(c,(function(e){return e.visible}))+1;c.splice(s,0,l)}return c},le=function(e,t){var n=e.placeLayerInfo,o=e.dragFieldInfo,i=t.nestedContainerFieldPostions,r=t.outerFieldPostions,a=o.id,l=o.contentFieldId,c=o.dragIndex,s=n.contentFieldId,u=n.dropIndex,d=s?i[s]:r,f=l?i[l]:r,p=[];switch((p=d===f?[d=ae(d,{index:u,id:a},{index:c})]:[d=ae(d,{index:u||d.length-1,id:a}),f=ae(f,void 0,{index:c})]).length){case 1:return s?i[s]=p[0]:r=p[0],{nestedContainerFieldPostions:i,outerFieldPostions:r};case 2:return s?i[s]=p[0]:r=p[0],l?i[l]=p[1]:r=p[1],{nestedContainerFieldPostions:i,outerFieldPostions:r};default:return null}},ce=function(e,t){var n=e.fieldId,o=e.contentFieldId,i=(o?t.nestedFieldPostions[o]:t.outerFieldPostions).filter((function(e){return e.id!==n}));o?t.nestedFieldPostions[o]=Object(D.a)(i):t.outerFieldPostions=Object(D.a)(i),t.nestedFieldPostions[n]&&ne(t.nestedFieldPostions,n);var r=$(t.selectedFieldId,t.fieldsMap),a=r.indexOf(n);a>=0&&(t.selectedFieldId=r[a+1]||null),ne(t.fieldsMap,n)},se=function(e,t){var n=e.fieldId,o=t.nestedFieldPostions,i=t.fieldsMap,r=t.outerFieldPostions,a=t.selectedFieldId,l=$(t.selectedFieldId,t.fieldsMap),c=-1;return Array.isArray(n)&&(n.forEach((function(e){var t=i[e];if(t){t.parId?(o[t.parId]=o[t.parId].filter((function(t){return t.id!==e})),o[e]&&ne(o,e)):r=r.filter((function(t){return t.id!==e})),ne(i,e);var n=l.indexOf(e);c=Math.max(n,c)}})),c>=0&&(a=l[c+1]||null)),{nestedFieldPostions:o,outerFieldPostions:r,fieldsMap:i,selectedFieldId:a}},ue=function(e,t,n){var o=e.fieldId,i=e.newFieldInfo,r=void 0===i?{}:i,a=e.cover;o=o||t.selectedFieldId;var c=t.fieldsMap[o];t.fieldsMap[o]=a?Object(l.a)(Object(l.a)({},r),{},{parId:c.parId}):Object.assign({parId:c.parId},c,Object(F.cloneDeep)(r))},de=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=void 0)},fe=function(){var e,t,n,i,r,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(F.cloneDeep)(oe),u=arguments.length>1?arguments[1]:void 0,d=u.type,f=u.formDesignId,p=Object(c.a)(u,ee),E=J[s.formDesignId]||{};switch(d){case v:return Object(l.a)(Object(l.a)({},s),{},{formDesignId:f});case m:var D=(null===(e=E.transformFormVo)||void 0===e?void 0:e.call(E,p.formVo||[]))||{},C=D.fieldsMap,S=Object(c.a)(D,te);return de(s.fieldsMap),Object.assign(s.fieldsMap,C||{}),Object(l.a)(Object(l.a)({},s),S);case b:return ie(p,s,E),null===(t=E.onFormVoChange)||void 0===t||t.call(E,o.add,p.innerField),Object(l.a)({},s);case I:return re(p,s,E),null===(n=E.onFormVoChange)||void 0===n||n.call(E,o.copy,p.copyField),Object(l.a)({},s);case h:var T=le(p,s);if(T){var w,P=p.placeLayerInfo,R=p.dragFieldInfo,A=s.fieldsMap[R.id];return A.parId=P.contentFieldId,null===(w=E.onFormVoChange)||void 0===w||w.call(E,o.move,A),Object(l.a)(Object(l.a)({},s),T)}return s;case x:return ce(p,s),null===(i=E.onFormVoChange)||void 0===i||i.call(E,o.delete,p.fieldId),Object(l.a)({},s);case j:var N=se(p,s);return null===(r=E.onFormVoChange)||void 0===r||r.call(E,o.delete,p.deleteIds),Object(l.a)(Object(l.a)({},s),N);case g:return null===(a=E.onFormVoChange)||void 0===a||a.call(E,o.select,p.selectId),Object(l.a)(Object(l.a)({},s),{},{selectedFieldId:p.selectId});case O:return ue(p,s),Object(l.a)({},s);case y:return Object(F.cloneDeep)(oe);default:return s}},pe=n(4),me=["formDesignPerfixCls"],ve=["formVo","templates","fieldFunctionContorl","formDesignId","customFieldAttrWithSetting","customFieldsRules","manualContorlSchema","onFormVoChange","onFieldChange","onChangeValidateInSetter","extendMaskLayers","fieldKey","coustomPerview"],be=["formDesignState","formDesignDataDiepatch","placeFieldValidate","createInnerFieldInfo","moveFieldValidate","deleteFieldValidate","copyFieldValidate","createCopyFieldInfo","formDesignId"],xe=["type"],je=["type"],he=["splitDownKeys"],ge=["type"],Ie=["type"],Oe={formDesignPerfixCls:"mortale-form-design",formDesignId:""},ye=a.a.createContext(Oe),Fe=a.a.createContext(oe),Ee=a.a.createContext({placeField:function(){return Promise.resolve([])},moveField:function(){},deleteField:function(){return Promise.resolve(!0)},copyField:function(){return Promise.resolve([])},selectField:function(){}}),De=(Q=[function(e){return a.a.forwardRef((function(t,n){var o=t.formDesignPerfixCls,i=Object(c.a)(t,me),r=a.a.useMemo((function(){var e=Object(l.a)({},Oe);return o&&(e.formDesignPerfixCls=o),e.formDesignId=Object(F.uniqueId)("".concat(e.formDesignPerfixCls,"-")),e}),[o]);return Object(pe.jsx)(ye.Provider,{value:r,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)(Object(l.a)({},i),r),{},{ref:n}))})}))},function(e){return a.a.forwardRef((function(t,n){var o=t.formVo,r=t.templates,s=t.fieldFunctionContorl,u=t.formDesignId,d=t.customFieldAttrWithSetting,f=t.customFieldsRules,p=t.manualContorlSchema,b=t.onFormVoChange,x=t.onFieldChange,j=t.onChangeValidateInSetter,h=t.extendMaskLayers,g=t.fieldKey,I=void 0===g?"id":g,D=t.coustomPerview,C=Object(c.a)(t,ve),S=a.a.useState({mounted:!1,unMounted:!1}),T=Object(i.a)(S,1)[0],w=a.a.useReducer(fe,Object(F.cloneDeep)(oe)),P=Object(i.a)(w,2),R=P[0],A=P[1];a.a.useEffect((function(){return T.mounted=!0,Promise.resolve().then((function(){J.initSupInfo(u,{fieldFunctionContorl:s,customFieldAttrWithSetting:d,templates:r,customFieldsRules:f,validateWithScrollSign:E.i.ref(""),manualContorlSchema:p,onFormVoChange:b,onFieldChange:x,onChangeValidateInSetter:j,fieldKey:I,CoustomPerView:D,extendMaskLayers:h}),A({type:v,formDesignId:u})})).finally((function(){null!==o&&void 0!==o&&o.length&&A({type:m,formVo:o})})),function(){Promise.resolve().then((function(){J.deleteSupInfo(u),T.unMounted=!0,A({type:y})})).finally((function(){}))}}),[]),a.a.useEffect((function(){T.mounted&&J.changeSupInfo(u,{fieldFunctionContorl:s,customFieldAttrWithSetting:d,customFieldsRules:f,templates:r,manualContorlSchema:p,onFormVoChange:b,onFieldChange:x,CoustomPerView:D})}),[r,s,d,f,p,b,x,D]),a.a.useEffect((function(){var e=J[u];e&&A({type:m,formVo:o}),R.selectedFieldId&&(null!==e&&void 0!==e&&e.resetSetterPaneValue&&(e.resetSetterPaneValue.value=e.resetSetterPaneValue.value+1),null!==e&&void 0!==e&&e.resetSetterPaneSchema&&(e.resetSetterPaneSchema.value=e.resetSetterPaneSchema.value+1))}),[o]);var N=a.a.useCallback((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];A({type:O,fieldId:e,newFieldInfo:t,cover:n})}),[]),M=a.a.useMemo((function(){return Object(l.a)(Object(l.a)({},R),{},{changeField:N})}),[R,N]);return Object(pe.jsx)(Fe.Provider,{value:M,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)({},C),{},{formDesignDataDiepatch:A,formDesignState:R,formDesignId:u,ref:n}))})}))},function(e){return a.a.forwardRef((function(t,n){var o=t.formDesignState,r=t.formDesignDataDiepatch,s=t.placeFieldValidate,u=t.createInnerFieldInfo,d=t.moveFieldValidate,f=t.deleteFieldValidate,p=t.copyFieldValidate,m=t.createCopyFieldInfo,v=t.formDesignId,O=Object(c.a)(t,be),y=a.a.useCallback((function(e,t,n,i){var r,a,c,s=J[v],u=null===(r=s.recoverField)||void 0===r?void 0:r.call(s,o.fieldsMap[n.id]),d=null===(a=s.recoverField)||void 0===a?void 0:a.call(s,o.fieldsMap[t.id]);return Promise.resolve(e||null===(c=null===i||void 0===i?void 0:i(Object(l.a)(Object(l.a)({},u),n),Object(l.a)(Object(l.a)({},d),t)))||void 0===c||c).then((function(e){return{validateResult:e,operationField:u,contentField:d}}))}),[]),E=a.a.useCallback((function(e,t){e.type;var n=Object(c.a)(e,xe),o=(t.type,Object(c.a)(t,je)),a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=J[v];return Promise.resolve(y(a,n,o,s)).then((function(e){var t=e.validateResult,a=(e.operationField,e.contentField);if(t){console.log(l,v,111);var s=Object(F.cloneDeep)(l.fieldInfoTemplate[o.uniquelySign]),d=(s.splitDownKeys,Object(c.a)(s,he));return d||console.error("".concat(o.uniquelySign,"\u7c7b\u578b\u5b57\u6bb5\u4e0d\u5b58\u5728")),Promise.resolve((null===u||void 0===u?void 0:u(d,a))||d).then((function(e){var t=U(e,l),a=Object(i.a)(t,2),c=a[0],s=a[1];return r({type:b,innerField:c,placeLayerInfo:n,dragFieldInfo:o}),s}))}return[]}))}),[s,u]),D=a.a.useCallback((function(e,t){e.type;var n=Object(c.a)(e,ge),o=(t.type,Object(c.a)(t,Ie)),i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Promise.resolve(y(i,n,o,d)).then((function(e){var t=e.validateResult;e.operationField,e.contentField,t&&r({type:h,placeLayerInfo:n,dragFieldInfo:o})}))}),[d]),C=a.a.useCallback((function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return null===o||void 0===o||o.stopPropagation(),Promise.resolve(y(i,{id:t},{id:e},f)).then((function(o){var i,r=o.validateResult,a=(o.operationField,o.contentField,!1);return Array.isArray(r)?null!==r&&void 0!==r&&r.length&&(i={fieldId:r},a=!0):r&&(Array.isArray(e)&&null!==e&&void 0!==e&&e.length?(i={deleteIds:e},a=!0):i={fieldId:e,deleteIndex:n,contentFieldId:t}),{isBatchDel:a,dispatchParams:i}})).then((function(e){var t=e.isBatchDel,n=e.dispatchParams,o=!1;return n&&(r(t?Object(l.a)({type:j},n):Object(l.a)({type:x},n)),o=!0),o}))}),[f]),S=a.a.useCallback((function(e,t){null===t||void 0===t||t.stopPropagation(),r({type:g,selectId:e})}),[]),T=a.a.useCallback((function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null===o||void 0===o||o.stopPropagation();var l=J[v];return Promise.resolve(y(a,{id:t},{id:e},p)).then((function(e){var o=e.validateResult,a=e.operationField,c=e.contentField;return o?Promise.resolve((null===m||void 0===m?void 0:m(a,c))||a).then((function(e){var o=U(e,l),a=Object(i.a)(o,2),c=a[0],s=a[1];return r({type:I,contentFieldId:t,innerIndex:n,copyField:c}),s})):[]}))}),[y,p,m]),w=a.a.useMemo((function(){return{placeField:E,moveField:D,deleteField:C,selectField:S,copyField:T}}),[]);return Object(pe.jsx)(Ee.Provider,{value:w,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)({},O),{},{ref:n}))})}))}],function(e){return Q.reduceRight((function(e,t){return t(e)}),e)}),Ce=["children","type","uniquelySign","canDrag","title","style","className","formDesignPerfixCls","formDesignId"],Se=["info"],Te=a.a.memo((function(e){var t=e.type,n=void 0===t?p:t,o=e.canDrag,r=void 0===o||o,l=e.formDesignPerfixCls,c=e.uniquelySign,d=Object(u.a)({item:{type:n,uniquelySign:c},options:{dropEffect:"copy"},canDrag:function(){return r}}),m=Object(i.a)(d,3),v=m[1],b=m[2];return a.a.useEffect((function(){b(document.getElementById("".concat(l,"-faker-perview")))}),[l]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("div",{ref:v,className:f()("".concat(l,"-drag-layer"),Object(s.a)({},"".concat(l,"-drag-disable"),!r))})})})),we=a.a.memo((function(e){var t=e.children,n=e.type,o=void 0===n?p:n,i=e.uniquelySign,r=e.canDrag,s=e.title,u=e.style,d=e.className,m=e.formDesignPerfixCls,v=e.formDesignId,b=Object(c.a)(e,Ce),x=J[v],j=a.a.useMemo((function(){return"".concat(o,"_").concat(i)}),[o,i]);return a.a.useEffect((function(){x&&(x.dndMaskLayerTemplates[i]=Object(l.a)({id:j,uniquelySign:i,type:o,name:s},b))}),[x,j]),Object(pe.jsxs)("div",{className:f()("".concat(m,"-drag-range"),d),id:j,title:s,style:u,children:[Object(pe.jsx)(Te,{type:o,uniquelySign:i,canDrag:r,formDesignPerfixCls:m}),t]})})),Pe=function(e){var t=e.info,n=Object(c.a)(e,Se),o=a.a.useContext(ye),i=o.formDesignId,r=o.formDesignPerfixCls;return Object(pe.jsx)(we,Object(l.a)(Object(l.a)(Object(l.a)({},t),n),{},{title:t.name,formDesignId:i,formDesignPerfixCls:r,children:Object(pe.jsx)("div",{className:"".concat(r,"-single-widget-content"),children:Object(pe.jsx)("div",{className:"".concat(r,"-single-widget-text"),children:t.name})})}))},Re=n(222),Ae=n.n(Re),Ne=n(134),Me=n(517),Ve=n(518),ke=n(521),Le=["isDropContent","accept","type","children","fieldId","index","contentFieldId"],$e=Object(Ne.default)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.apply(void 0,n.concat(o))}}));!function(e){e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.none=""}(Z||(Z={}));var qe=r.forwardRef((function(e,t){var n=e.children,o=e.contentFieldId,i=e.formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(i,"-drop-content"),style:{zIndex:o?11:1},ref:t,children:n})})),Ye=r.forwardRef((function(e,t){var n,o=e.children,i=(e.contentFieldId,e.fieldId),a=e.isSelected,l=e.deleteField,c=e.selectField,u=e.copyField,d=e.canDel,p=e.canCopy,m=e.isDragging,v=e.isFirstField,b=e.isLastField,x=e.locationMarker,j=e.formDesignPerfixCls,h="".concat(j,"-form-item-hover"),g=r.useCallback((function(e){return l(e)}),[l]),I=r.useCallback((function(e){return u(e)}),[u]);return Object(pe.jsx)("div",{id:i,ref:t,className:"".concat(j,"-field-dnd-wrapper"),children:Object(pe.jsx)("div",{className:f()((n={},Object(s.a)(n,"".concat(j,"-field-active"),a),Object(s.a)(n,"".concat(j,"-first-field"),v),Object(s.a)(n,"".concat(j,"-last-field"),b),Object(s.a)(n,"".concat(j,"-field-dragging"),m),Object(s.a)(n,"".concat(j,"-location-").concat(x.sign,"-marker"),x.show&&x.sign),n)),onClick:c,onMouseOver:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.add(h)},onMouseOut:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.remove(h)},children:Object(pe.jsxs)("div",{className:"".concat(j,"-field-border"),children:[Object(pe.jsxs)("div",{className:"".concat(j,"-field-operation-area"),children:[Object(pe.jsx)("span",{children:p&&Object(pe.jsx)(Ve.a,{onClick:I})}),Object(pe.jsx)("span",{children:d&&Object(pe.jsx)(ke.a,{onClick:g})})]}),o]})})})})),Be=function(e){var t=e.isDropContent,n=void 0!==t&&t,o=e.accept,a=void 0===o?p:o,s=e.type,d=void 0===s?p:s,f=e.children,m=e.fieldId,v=e.index,b=e.contentFieldId,x=Object(c.a)(e,Le),j=r.useContext(ye).formDesignPerfixCls,h=r.useContext(Ee),g=h.placeField,I=h.moveField,O=h.selectField,y=h.deleteField,F=h.copyField,E=$e(O,m),D=$e(y,m,b,v),C=$e(F,m,b,v),S=function(e,t,n){var o=t.placeField,a=t.moveField,l=t.selectField,c=t.type,s=t.accept,d=t.canDrag,f=void 0===d||d,p=t.formDesignPerfixCls,m=n.contentFieldId,v=n.fieldId,b=n.index,x=r.useState({show:!1,sign:Z.none}),j=Object(i.a)(x,2),h=j[0],g=j[1],I=r.useRef(null),O=Object(u.a)({item:{type:c,id:v,contentFieldId:m,dragIndex:b},canDrag:f,collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(i.a)(O,3),F=y[0],E=y[1],D=y[2],C=r.useCallback((function(e,t){var n=t.top,o=t.height,i=t.bottom,r=e.y;if(!(r-n<0||i-r<0)){var a={show:!0,sign:r-n<=o/2?Z.top:Z.bottom};h.show===a.show&&h.sign===a.sign||g(a)}}),[h]),S=Object(Me.a)({accept:s,drop:function(e,t){var n=t.getDropResult(),i=t.isOver({shallow:!1}),r=t.getItem().id;if(!n&&i)if(r){var s="number"!==typeof b||[Z.bottom,Z.right].includes(h.sign)?b:b-1;null===a||void 0===a||a({type:c,id:v,contentFieldId:m,dropIndex:s},e)}else{var u="number"!==typeof b||[Z.top,Z.left].includes(h.sign)?b:b+1;o({type:c,id:v,contentFieldId:m,dropIndex:u},e).then((function(e){e.length&&l(e[0])}))}},hover:function(t,n){if(((null===t||void 0===t?void 0:t.id)!==v||e)&&n.isOver({shallow:!0})&&I.current){var o=n.getClientOffset(),i=I.current.getBoundingClientRect();if(t.id&&[t.index,t.index+1].includes(o.y-i.top<=i.height/2?b:b+1))return;C(o,i)}},collect:function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),clientOffset:e.getClientOffset()}}}),T=Object(i.a)(S,2),w=T[0],P=T[1];return r.useEffect((function(){e||(E(I),D(document.getElementById("".concat(p,"-faker-perview")))),P(I)}),[I,e]),r.useEffect((function(){var e;return h.show&&!w.isOverCurrent&&(e=setTimeout((function(){clearTimeout(e),g({show:!1,sign:Z.none})}),32)),function(){e&&clearTimeout(e)}}),[h,w.isOverCurrent]),[I,F.isDragging,h]}(n,{placeField:g,moveField:I,selectField:O,type:d,accept:a,canDrag:x.canDrag,formDesignPerfixCls:j},{contentFieldId:b,fieldId:m,index:v}),T=Object(i.a)(S,3),w=T[0],P=T[1],R=T[2],A=r.useMemo((function(){return n?qe:Ye}),[n]);return Object(pe.jsx)(A,Object(l.a)(Object(l.a)({ref:w},x),{},{formDesignPerfixCls:j,fieldId:m,contentFieldId:b,selectField:E,deleteField:D,copyField:C,isDragging:P,locationMarker:R,children:f}))},Ge=n(155),We=n.n(Ge),He=n(215),ze=n.n(He),Xe=n(53),Ke=n(55),_e=n(209),Ue=n.n(_e),Je=function(){return Je=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Je.apply(this,arguments)},Qe=Object(r.createContext)(null),Ze=Object(r.createContext)(null),et=function(){return Je(Je({},Object(r.useContext)(Qe)),Object(r.useContext)(Ze))},tt=n(180),nt=n.n(tt),ot=n(283),it=n.n(ot),rt=n(519),at=n(503),lt=n(504),ct=n(505),st=["id"],ut=function(){return ut=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)},dt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},ft=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};var pt={error:a.a.createElement(at.a,null),success:a.a.createElement(lt.a,null),warning:a.a.createElement(ct.a,null)},mt=function(e){var t,n,o,i,l,s=e.id,u=Object(c.a)(e,st),d=u.children,p=dt(u,["children"]),m=ft(Object(r.useState)(!1),2),v=m[0],b=m[1],x=function(e){var t,n,o,i,r,l,c,s,u,d,f,p,m,v,b,x,j,h,g,I,O,y,F,E,D=et();return ut(ut({},e),{layout:null!==(n=null!==(t=e.layout)&&void 0!==t?t:D.layout)&&void 0!==n?n:"horizontal",colon:null!==(o=e.colon)&&void 0!==o?o:D.colon,labelAlign:"vertical"===D.layout?null!==(r=null!==(i=e.labelAlign)&&void 0!==i?i:D.labelAlign)&&void 0!==r?r:"left":null!==(c=null!==(l=e.labelAlign)&&void 0!==l?l:D.labelAlign)&&void 0!==c?c:"right",labelWrap:null!==(s=e.labelWrap)&&void 0!==s?s:D.labelWrap,labelWidth:null!==(u=e.labelWidth)&&void 0!==u?u:D.labelWidth,wrapperWidth:null!==(d=e.wrapperWidth)&&void 0!==d?d:D.wrapperWidth,labelCol:null!==(f=e.labelCol)&&void 0!==f?f:D.labelCol,wrapperCol:null!==(p=e.wrapperCol)&&void 0!==p?p:D.wrapperCol,wrapperAlign:null!==(m=e.wrapperAlign)&&void 0!==m?m:D.wrapperAlign,wrapperWrap:null!==(v=e.wrapperWrap)&&void 0!==v?v:D.wrapperWrap,fullness:null!==(b=e.fullness)&&void 0!==b?b:D.fullness,size:null!==(x=e.size)&&void 0!==x?x:D.size,inset:null!==(j=e.inset)&&void 0!==j?j:D.inset,asterisk:e.asterisk,bordered:null!==(h=e.bordered)&&void 0!==h?h:D.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(I=null!==(g=e.feedbackLayout)&&void 0!==g?g:D.feedbackLayout)&&void 0!==I?I:"loose",tooltipLayout:null!==(y=null!==(O=e.tooltipLayout)&&void 0!==O?O:D.tooltipLayout)&&void 0!==y?y:"icon",tooltipIcon:null!==(E=null!==(F=e.tooltipIcon)&&void 0!==F?F:D.tooltipIcon)&&void 0!==E?E:a.a.createElement(rt.a,null)})}(p),j=function(){var e=ft(Object(r.useState)(!1),2),t=e[0],n=e[1],o=Object(r.useRef)(),i=Object(r.useRef)();return Object(r.useLayoutEffect)((function(){if(o.current&&i.current){var e=i.current.getBoundingClientRect().width,r=o.current.getBoundingClientRect().width;e&&r&&r<e||t&&n(!1)}}),[]),{overflow:t,containerRef:o,contentRef:i}}(),h=j.containerRef,g=j.contentRef,I=j.overflow,O=x.label,y=x.style,F=x.layout,E=x.colon,D=void 0===E||E,C=x.addonBefore,S=x.addonAfter,T=x.asterisk,w=x.feedbackStatus,P=x.extra,R=x.feedbackText,A=x.fullness,N=x.feedbackLayout,M=x.feedbackIcon,V=x.inset,k=x.bordered,L=void 0===k||k,$=x.labelWidth,q=x.wrapperWidth,Y=x.labelCol,B=x.wrapperCol,G=x.labelAlign,W=x.wrapperAlign,H=void 0===W?"left":W,z=x.size,X=x.labelWrap,K=x.wrapperWrap,_=x.tooltipLayout,U=x.tooltip,J=x.tooltipIcon;O=24===Y&&/^\s+$/.test(O)?null:O;var Q=ut({},x.labelStyle),Z=ut({},x.wrapperStyle),ee=!1;($||q)&&($&&(Q.width="auto"===$?void 0:$,Q.maxWidth="auto"===$?void 0:$),q&&(Z.width="auto"===q?void 0:q,Z.maxWidth="auto"===q?void 0:q)),(Y||B)&&(Q.width||Z.width||(ee=!0));var te=function(e,t){var n=null===t||void 0===t?"ant":t.antPrefixCls;return(null===t||void 0===t?void 0:t.prefixCls)||(e?(n+"-").concat(e):n)}("formily-item",u),ne="popover"===N?a.a.createElement(it.a,{autoAdjustOverflow:!0,placement:"top",content:a.a.createElement("div",{className:f()((t={},t[te+"-"+w+"-help"]=!!w,t[te+"-help"]=!0,t))},pt[w]," ",R),visible:!!R},d):d;return a.a.createElement("div",ut({},function(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(t,n){return n.includes("data-")&&(t[n]=e[n]),t}),{})}(u),{style:ut(ut({},y),{}),className:f()((n={},n[""+te]=!0,n[te+"-layout-"+F]=!0,n[te+"-"+w]=!!w,n[te+"-feedback-has-text"]=!!R,n[te+"-size-"+z]=!!z,n[te+"-feedback-layout-"+N]=!!N,n[te+"-fullness"]=!!A||!!V||!!M,n[te+"-inset"]=!!V,n[te+"-active"]=v,n[te+"-inset-active"]=!!V&&v,n[te+"-label-align-"+G]=!0,n[te+"-control-align-"+H]=!0,n[te+"-label-wrap"]=!!X,n[te+"-control-wrap"]=!!K,n[te+"-bordered-none"]=!1===L||!!V||!!M,n[u.className]=!!u.className,n)),onFocus:function(){(M||V)&&b(!0)},onBlur:function(){(M||V)&&b(!1)},id:s}),function(){var e;return O?a.a.createElement("div",{className:f()((e={},e[te+"-label"]=!0,e[te+"-label-tooltip"]=U&&"text"===_||I,e[te+"-item-col-"+Y]=ee&&!!Y,e)),style:Q},function(){var e=a.a.createElement("div",{className:f()(te+"-label-content"),ref:h},T&&a.a.createElement("span",{className:f()(te+"-asterisk")},"*"),a.a.createElement("label",{ref:g},O));return"text"===_&&U||I?a.a.createElement(nt.a,{placement:"top",align:{offset:[0,10]},title:I?a.a.createElement("div",null,a.a.createElement("div",null,O),a.a.createElement("div",null,U)):U},e):e}(),function(){if(U&&"icon"===_&&!I)return a.a.createElement("span",{className:f()(te+"-label-tooltip-icon")},a.a.createElement(nt.a,{placement:"top",align:{offset:[0,2]},title:U},J))}()," "!==O&&a.a.createElement("span",{className:f()(te+"-colon")},D?":":"")):null}(),a.a.createElement("div",{className:f()((o={},o[te+"-control"]=!0,o[te+"-item-col-"+B]=ee&&!!B&&O,o))},a.a.createElement("div",{className:f()(te+"-control-content")},C&&a.a.createElement("div",{className:f()(te+"-addon-before")},C),a.a.createElement("div",{style:Z,className:f()((i={},i[te+"-control-content-component"]=!0,i[te+"-control-content-component-has-feedback-icon"]=!!M,i))},a.a.createElement(Ze.Provider,{value:void 0},ne),M&&a.a.createElement("div",{className:f()(te+"-feedback-icon")},M)),S&&a.a.createElement("div",{className:f()(te+"-addon-after")},S)),!!R&&"popover"!==N&&"none"!==N&&a.a.createElement("div",{className:f()((l={},l[te+"-"+w+"-help"]=!!w,l[te+"-help"]=!0,l[te+"-help-enter"]=!0,l[te+"-help-enter-active"]=!0,l))},R),P&&a.a.createElement("div",{className:f()(te+"-extra")},P)))},vt=Object(w.c)(mt,Object(w.e)({validateStatus:!0,title:"label",required:!0},(function(e,t){if(Object(T.d)(t))return{extra:e.extra||t.description};if(!t)return e;return{feedbackText:function(){var n=function(e){return e.reduce((function(t,n,o){return n?o<e.length-1?t.concat([n,", "]):t.concat([n]):t}),[])};if(!t.validating)return e.feedbackText?e.feedbackText:t.selfErrors.length?n(t.selfErrors):t.selfWarnings.length?n(t.selfWarnings):t.selfSuccesses.length?n(t.selfSuccesses):void 0}(),extra:e.extra||t.description}}),(function(e,t){var n;return Object(T.d)(t)?e:t?{feedbackStatus:"validating"===t.validateStatus?"pending":(null===(n=t.decorator[1])||void 0===n?void 0:n.feedbackStatus)||t.validateStatus}:e}),(function(e,t){if(Object(T.d)(t))return e;if(!t)return e;var n=!1;return t.required&&"readPretty"!==t.pattern&&(n=!0),"asterisk"in e&&(n=e.asterisk),{asterisk:n}}),(function(e,t){var n={};return t&&(n.id=t.address.entire),n})));vt.BaseItem=mt;var bt=vt,xt=(n(502),n(419),["span","labelCol","wrapperCol","className"]),jt=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(e){return Object(C.a)(this,n),t.call(this,e)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.span,n=e.labelCol,o=e.wrapperCol,i=e.className,r=Object(c.a)(e,xt);return Object(pe.jsx)(Ue.a,{span:t||24,children:Object(pe.jsx)(bt,Object(l.a)({antPrefixCls:"ant",labelCol:n,wrapperCol:o,colon:24!==n,labelAlign:24!==n?"right":"left",className:i},r))})}}]),n}(r.Component),ht=n(219),gt=n.n(ht),It=n(221),Ot=n.n(It),yt=["fieldInfo"],Ft=["fieldInfo"],Et=["fieldInfo"],Dt=["fieldInfo"],Ct=We.a.TextArea,St=r.memo((function(e){var t=e.formDesignPerfixCls,n=e.supInfo,o=(e.mode,e.type),a=n.dndMaskLayerTemplates,l=r.useState(a[o]),c=Object(i.a)(l,2),s=c[0],u=c[1];return r.useEffect((function(){Object(E.k)((function(){s||u(a[o])}))}),[]),Object(pe.jsx)("div",{className:"".concat(t,"-field-mark")})})),Tt=function(e){return r.memo((function(t){var n,o,i,a=t.fieldInfo,l=r.useContext($t),c=l.labelCol,s=l.wrapperCol,u=r.useContext(Lt),d=u.mode,p=u.SuffixFieldDisplay,m=u.SuffixFieldWidth,v=r.useContext(ye),b=v.formDesignPerfixCls,x=v.formDesignId,j=J[x];return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(St,{formDesignPerfixCls:b,supInfo:j,mode:d,type:a.type}),Object(pe.jsx)("div",{style:{flex:"0 0 ".concat(m,"px")},className:"".concat(b,"-field-custom-area"),children:Object(pe.jsx)(p,{fieldInfo:j.recoverField(a),mode:d})}),Object(pe.jsx)(jt,{labelCol:c,wrapperCol:s,label:a.title||" ",asterisk:"EDITABLE"===a["statusInfo>statusType"]&&a.required,extra:a.description,wrapperStyle:{pointerEvents:"none"},style:{marginBottom:"0"},mode:d,children:Object(pe.jsx)(e,{fieldInfo:a,placeholder:a.placeholder,disabled:"EDITABLE"!==a["statusInfo>statusType"],style:a.style||{},className:f()("".concat(b,"-").concat((null===(n=a.type)||void 0===n||null===(o=n.replace("_","-"))||void 0===o||null===(i=o.toLocaleLowerCase)||void 0===i?void 0:i.call(o))||"unknow","-field"),a.className),mode:d})})]})}))},wt={TEXT:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,yt);return Object(pe.jsx)(We.a,Object(l.a)({},t))})),TEXTAREA:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Ft);return Object(pe.jsx)(Ct,Object(l.a)({width:"100%"},t))})),DATE:Tt((function(e){return Object(pe.jsx)(ze.a,Object(l.a)({width:"100%",block:!0},e))})),NUMBER:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Et),n=f()("input-number-handler-wrap-contorl",t.className);return Object(pe.jsx)(gt.a,Object(l.a)(Object(l.a)({},t),{},{className:n}))})),RADIO:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Dt);return Object(pe.jsx)(Ot.a,Object(l.a)({},t))}))},Pt=function(e){var t;t=e,"[object Object]"===Object.prototype.toString.call(t)&&Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],o=t[1];wt[n]=Tt(o)}))},Rt=function(e){var t=e.fieldId,n=r.useContext(Fe).fieldsMap[t],o=r.useMemo((function(){return wt[n.type]}),[n.type]);return Object(pe.jsx)(o,{fieldInfo:n})},At=(n(463),["id"]),Nt=function(){return Object(pe.jsx)("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:"\u8bf7\u4ece\u5de6\u8fb9\u62d6\u5165\u4e00\u4e2a\u7ec4\u4ef6"})},Mt=r.memo((function(e){var t=e.fieldGroupData,n=e.contentFieldId,o=e.selectedFieldId,i=t.length-1;return Object(pe.jsx)(Ae.a,{children:t.map((function(e,t){var r=e.id,a=Object(c.a)(e,At);return"boolean"!==typeof a.visible||a.visible?Object(pe.jsx)(Be,Object(l.a)(Object(l.a)({isFirstField:!t,isLastField:t===i,index:t,contentFieldId:n,fieldId:r,isSelected:o===r},a),{},{children:Object(pe.jsx)(Rt,{fieldId:r})}),r):null}))})})),Vt=r.memo((function(e){var t=e.contentFieldId,n=e.fieldGroupData,o=e.selectedFieldId,i=e.customNoData,r=void 0===i?null:i;return Object(pe.jsx)(Be,{isDropContent:!0,contentFieldId:t,children:null!==n&&void 0!==n&&n.length?Object(pe.jsx)(Mt,{contentFieldId:t,fieldGroupData:n,selectedFieldId:o}):r})})),kt=function(e){var t=e.contentFieldId,n=e.customNoData,o=r.useContext(Fe),i=o.outerFieldPostions,a=o.nestedFieldPostions,l=o.selectedFieldId,c=t?a[t]:i;return Object(pe.jsx)(Vt,{contentFieldId:t,selectedFieldId:l,fieldGroupData:c,customNoData:n})},Lt=r.createContext({mode:"web",SuffixFieldDisplay:function(e){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:84}),$t=r.createContext({labelCol:8,wrapperCol:16}),qt=function(e){var t=r.useContext(ye).formDesignPerfixCls,n=r.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16},e.layout)}),[e.layout]),o=r.useMemo((function(){return Object.assign({},{mode:e.mode||"web",SuffixFieldDisplay:e.SuffixFieldDisplay||function(){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:e.SuffixFieldWidth||84})}),[e.SuffixFieldWidth,e.SuffixFieldDisplay,e.mode]);return r.useEffect((function(){Pt(e.expendFieldSimulate)}),[e.expendFieldSimulate]),Object(pe.jsx)(Lt.Provider,{value:o,children:Object(pe.jsx)($t.Provider,{value:n,children:Object(pe.jsx)("div",{className:"".concat(t,"-simulator-content"),children:Object(pe.jsx)(kt,{contentFieldId:null,customNoData:e.noData||Object(pe.jsx)(Nt,{})})})})})},Yt=n(506),Bt=n(467),Gt=n.n(Bt),Wt=function(e){var t=e.title,n=e.supContent,o=void 0===n?function(){return null}:n,i=e.children,a=r.useContext(ye).formDesignPerfixCls;return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"".concat(a,"-form-group-title"),children:[t,Object(pe.jsx)(o,{})]}),Object(pe.jsx)(Gt.a,{children:i})]})},Ht=function(){var e=r.useContext(ye).formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(e,"-side-line")})},zt=n(121),Xt=n.n(zt),Kt=["type","value","onChange","decimal"],_t=["value","onChange","format"],Ut=["type","onBlur","onFocus"],Jt=ze.a.RangePicker,Qt=function(e){return/^\-$/.test(e)?"0":/\.$/.test(e)?e.slice(0,e.length-1):null},Zt=function(e){e.type,e.value;var t=e.onChange,n=e.decimal,o=void 0===n?2:n,a=Object(c.a)(e,Kt),s=r.useState(e.value||[]),u=Object(i.a)(s,2),d=u[0],f=u[1],p=r.useMemo((function(){return new RegExp("^\\-?((0|[1-9][0-9]*)?$|(0|[1-9][0-9]*)(\\.\\d{0,"+o+"})?$)")}),[o]),m=function(e,n){var o=n.target.value,i=function(e,t){var n=Object(D.a)(d);return p.test(t)?(n[e]=t,n):null}(e,o);if(i){var r=Object(D.a)(i);f(i);var a=Qt(o);a&&(r[e]=a),t(r)}},v=function(){var e=Object(i.a)(d,2),n=e[0],o=e[1];n=Qt(n)||n,o=Qt(o)||o,n&&o&&+n>+o&&(f([o,n]),t([o,n]))};return Object(pe.jsxs)("div",{className:"flex",children:[Object(pe.jsx)(We.a,Object(l.a)({value:d[0],onChange:m.bind(null,0),onBlur:v},a)),"~",Object(pe.jsx)(We.a,Object(l.a)({value:d[1],onChange:m.bind(null,1),onBlur:v},a))]})},en=function(e){var t=e.value,n=e.onChange,o=e.format,a=Object(c.a)(e,_t),s=r.useState(Array.from({length:2},(function(t,n){return e.value[n]&&Xt()(e.value[n])}))),u=Object(i.a)(s,2),d=u[0],f=u[1],p=r.useMemo((function(){var e={YYYY:{type:"rangepicker",picker:"year"},"YYYY-MM":{type:"rangepicker",picker:"month"},"YYYY-MM-DD HH:mm":{type:"rangepicker",showTime:{format:"HH:mm"}},"YYYY-MM-DD HH:mm:ss":{type:"rangepicker",showTime:{format:"HH:mm:ss"}}}[o]||{type:"rangepicker"},i=t.map((function(e){return e&&Xt()(e).format(o)}));return n(i),f(i.map((function(e){return e&&Xt()(e)}))),e}),[o]);return Object(pe.jsx)(Jt,Object(l.a)(Object(l.a)(Object(l.a)({},a),p),{},{block:!0,value:d,isDefinedValue:!0,onCalendarChange:function(e,t){f(e),n(t)}}))},tn=function(e){var t=e.type,n=(e.onBlur,e.onFocus,Object(c.a)(e,Ut)),o=r.useMemo((function(){return["rangepicker"===t?en:Zt]}),[t]),a=Object(i.a)(o,1)[0];return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(a,Object(l.a)({type:t},n))})},nn={number:"\u6570\u503c",percent:"\u767e\u5206\u6bd4",rangepicker:"\u65e5\u671f"},on=function(e){var t=e.value||[],n=Object(i.a)(t,2),o=n[0],r=n[1],a=nn[e.componentProps.type],l=e.componentProps.suffix||"",c="";return o&&!r?c="\u4e0d\u80fd\u4f4e\u4e8e".concat(a,"\u6700\u5c0f\u503c").concat(o).concat(l):!o&&r?c="\u4e0d\u80fd\u8d85\u51fa".concat(a,"\u6700\u5927\u503c").concat(r).concat(l):o&&r&&(c="\u8bf7\u8f93\u5165".concat(o).concat(l,"~").concat(r).concat(l,"\u7684").concat(a)),c},rn=n(471),an=n.n(rn),ln=["isCompose","checkText","children","options"],cn=an.a.Group,sn=function(e){var t=e.isCompose,n=e.checkText,o=e.children,i=e.options,r=Object(c.a)(e,ln);return t?Object(pe.jsx)(cn,Object(l.a)({options:i},r)):Object(pe.jsx)(an.a,Object(l.a)(Object(l.a)({},r),{},{children:n||o}))},un=n(475),dn=n.n(un),fn=["id"],pn=["correctionNumber"],mn=We.a.TextArea,vn=function(e){return"[object Object]"===Object.prototype.toString.call(e)},bn=function(e,t,n,o){var r=t.form,a=n[e.perStatusType||t.initialValue]||[];Object.entries(a).forEach((function(t){var n=Object(i.a)(t,2),o=n[0],a=n[1];a=Array.isArray(a)?a:[a],e[o]=a.reduce((function(e,t){var n=r.getValuesIn(t);return vn(n)?(e=e||{},Object.assign(e,n)):e=n,e}),void 0)})),e.perStatusType=t.value};Object(T.q)({rangeSetterValidateRules:function(e,t,n){var o=e||[],r=Object(i.a)(o,2),a=r[0],l=r[1];return a&&l?"":"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u5b57\u6bb5"}});var xn=r.memo((function(e){var t=r.useContext(Sn);return Object(pe.jsx)(jt,Object(l.a)(Object(l.a)({},t),e))})),jn=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(o.length){var r=o[o.length-1];"function"===typeof r&&(o[o.length-1]=function(t,n){var o,i=null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,t,n);return Object(l.a)(Object(l.a)({},r(i,n)),i)})}else o=[function(t,n){var o;return null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,n.data||{},t)}];return Object(w.c)(t,w.e.apply(void 0,Object(D.a)(o)))},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=jn.bind(null,e);return t&&vn(t)?Object.entries(t).reduce((function(e,t){var o=Object(i.a)(t,2),r=o[0],a=o[1];return e[r]=n(a),e}),{}):{}},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=jn.bind(null,e),o=n(We.a),i=n((function(e){var t=e.id,n=Object(c.a)(e,fn);return Object(pe.jsx)("div",{id:t,children:Object(pe.jsx)(Ot.a,Object(l.a)({},n))})}),(function(e,n){var o=t+"-"+n.address.entire;return{options:n.dataSource,id:o,getPopupContainer:function(){return document.getElementById(o)}}})),r=n((function(e){e.correctionNumber;var t=Object(c.a)(e,pn);return Object(pe.jsx)(gt.a,Object(l.a)({},t))}),(function(e){var t=e.correctionNumber,n={className:"input-number-handler-wrap-contorl"};return t?Object(l.a)(Object(l.a)({},n),{},{formatter:function(e){return+e-t},parser:function(e){return+e+t}}):n})),a=n(sn,(function(e,t){return e.isCompose&&{options:t.dataSource}})),s=n(dn.a,{value:"checked"},(function(e,t){return e.isCompose?{}:{composeOpts:t.dataSource,checkedOpts:e.value}})),u=n(mn),d=n(tn),f=Object(w.c)(Wt),p=Object(w.c)(Ht);return{Input:o,TextArea:u,Select:i,InputNumber:r,Radio:a,Checkbox:s,FormGroup:f,RangeSetter:d,SideLine:p,FormItem:xn}},In=(n(476),["expandFields","layout","scope"]),On=["splitDownKeys"],yn=E.i.ref(0),Fn=E.i.ref(0),En=function(e){e.validate().catch((function(e){Object(Yt.a)(document.getElementById(e[0].address),{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"})}))},Dn=function(){return Object(pe.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u7684\u7ec4\u4ef6"})},Cn=r.memo((function(e){var t=e.createSchemaFieldParams,n=e.selectedFieldId,o=e.fieldType,a=e.fieldsMap,l=e.NoData,c=void 0===l?Dn:l,s=e.changeField,u=e.formDesignId,d=a[n]||{},f=J[u],p=r.useState({form:{},selectedFieldId:n}),m=Object(i.a)(p,1)[0],v=function(e,t,n,o){var a=t[e]||{},l=null===a||void 0===a?void 0:a.type,c=r.useState([{type:"object",properties:{}},null]),s=Object(i.a)(c,2),u=s[0],d=s[1],f=r.useState({selectedFieldId:null}),p=Object(i.a)(f,1)[0],m=r.useCallback((function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!p.selectedFieldId||!t[p.selectedFieldId])return{type:"object",properties:{}};var i=n.recoverField(p.formAction.values);return z(n.fieldSetterTemplate[e],(function(e,t,r){if(t.type||t["x-component"]){var a;o.push(r.concat(e).toString());var l={componentProps:t["x-component-props"],enum:t.enum,visible:t["x-visible"]},c=null===(a=n.manualContorlSchema)||void 0===a?void 0:a.call(n,e,l,i);c&&c!==l&&(c.enum&&Array.isArray(c.enum)&&(t.enum=c.enum),c.componentProps&&(t["x-component-props"]=c.componentProps),"boolean"===typeof c.visible&&(t["x-visible"]=c.visible))}}))}),[]),v=r.useCallback((function(e,t){return Object(T.b)({initialValues:e,validateFirst:!0,effects:function(){Object(T.p)((function(e){t.validateWithScrollSign.value===p.selectedFieldId&&(t.validateWithScrollSign.value="",En(e))})),Object(T.g)("*",(function(e){var n;null===(n=t.onFieldChange)||void 0===n||n.call(t,e.props.name,e.value)})),Object(T.o)((function(e){o(p.selectedFieldId,e.values)}))}})}),[o]);return r.useEffect((function(){n&&Object(E.k)((function(){return n.resetSetterPaneSchema.value}),(function(){var e=[],t=m(p.type,p.supInfo,e);p.formAction.setFormState((function(n){e.forEach((function(e){delete n.fields[e]})),d([t,p.formAction])}))}),{fireImmediately:!1})}),[n]),r.useEffect((function(){if(n){p.selectedFieldId=e,p.type=l,p.supInfo=n;var t=v(a,n);p.formAction=t;var o=m(l,n);d([o,t])}}),[e,l,n]),u}(n,a,f,s),b=Object(i.a)(v,2),x=b[0],j=b[1],h=r.useMemo((function(){return Object.assign(t.scope,function(e){var t={};return{rangeSetterEeactRangeErrorMsg:on,statusTypeChangeEffect:bn.bind(null,t),statusInfo:t}}()),t.scope.$published=d.published||!1,Object(w.d)(t)}),[t,x]);return r.useEffect((function(){m.form=j,m.selectedFieldId=n}),[j]),r.useEffect((function(){f&&(Object(E.k)((function(){return f.validateWithScrollSign.value}),(function(e){e===m.selectedFieldId&&(f.validateWithScrollSign.value="",En(m.form))})),Object(E.k)((function(){return f.resetSetterPaneValue.value}),(function(e,t){var n;null!==(n=m.form)&&void 0!==n&&n.id&&m.form.setValues(a[m.selectedFieldId],"overwrite")}),{fireImmediately:!1}))}),[f]),Object(pe.jsx)(pe.Fragment,{children:o&&j?Object(pe.jsx)(w.a,{form:j,children:Object(pe.jsx)(h,{schema:x})}):Object(pe.jsx)(c,{})})}),(function(e,t){return e.selectedFieldId===t.selectedFieldId&&e.fieldType===t.fieldType&&e.changeField===t.changeField&&e.createSchemaFieldParams===t.createSchemaFieldParams})),Sn=r.createContext({labelCol:8,wrapperCol:16,span:24}),Tn=function(e){var t,n=e.expandFields,o=void 0===n?{}:n,i=e.layout,a=void 0===i?{}:i,u=e.scope,d=Object(c.a)(e,In),f=r.useContext(ye).formDesignPerfixCls,p=r.useContext(Fe),m=p.selectedFieldId,v=p.fieldsMap,b=p.formDesignId,x=p.changeField,j=J[b],h=r.useMemo((function(){var e={components:Object(l.a)(Object(l.a)({},gn(j,f)),hn(j,o)),scope:{typeEffect:function(e){var t,n=e.value,o=e.form.values||{},i=j.fieldKey,r=o.title,a=o.description,u=o.placeholder,d=o.id,f=o.parId,p=(j.fieldInfoTemplate||{})[n],m=(p.splitDownKeys,Object(c.a)(p,On)),v=Object(l.a)(Object(l.a)(Object(l.a)({},{}),m),{},(t={title:r,description:a},Object(s.a)(t,i,o[i]),Object(s.a)(t,"placeholder",u),Object(s.a)(t,"id",d),Object(s.a)(t,"parId",f),t));x("",v,!0)},customScope:u}};return J.changeSupInfo(b,{createSchemaFieldParams:e,resetSetterPaneSchema:yn,resetSetterPaneValue:Fn}),e}),[o,u,j]);r.useEffect((function(){Object(T.q)({customFieldsRules:function(e,t,n){var o,i,r,a=null===(o=j.recoverField)||void 0===o?void 0:o.call(j,n.form.values);return null===(i=j.customFieldsRules)||void 0===i?void 0:i.call(j,a,null===n||void 0===n||null===(r=n.props)||void 0===r?void 0:r.name,e)}})}),[j]);var g=r.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16,span:24},a)}),[a]),I=null===(t=v[m||""])||void 0===t?void 0:t.type;return Object(pe.jsx)(Sn.Provider,{value:g,children:Object(pe.jsx)(Cn,Object(l.a)(Object(l.a)({},d),{},{formDesignId:b,selectedFieldId:m||"",fieldsMap:v,fieldType:I,createSchemaFieldParams:h,changeField:x}))})},wn=n(510),Pn=n(500),Rn=n(509),An={position:"fixed",pointerEvents:"none",zIndex:-1,left:0,top:0,height:"0px",visibility:"hidden"};var Nn=function(e){var t=e.formDesignId,n=e.fieldsMap,o=e.formDesignPerfixCls,r=J[t]||{},c=r.dndMaskLayerTemplates,s=r.CoustomPerView,u=Object(Rn.a)((function(e){return{dragItem:e.getItem(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}})),d=u.isDragging,f=u.dragItem,p=u.currentOffset,m=u.clientOffset,v=a.a.useMemo((function(){if(null!==f&&void 0!==f&&f.id){var e=n[f.id],t=e.type,o=e.title,i=c[t]||{},r=i.id,a=i.iconClass,s=Object(l.a)(Object(l.a)({},f),{},{uniquelySign:t,fieldName:o,iconClass:a});return[Object(l.a)(Object(l.a)({},s),{},{dragId:r}),s]}if(null!==f&&void 0!==f&&f.uniquelySign){var u=c[null===f||void 0===f?void 0:f.uniquelySign],d=u.iconClass,p=u.id,m=u.name,v=Object(l.a)(Object(l.a)({},f),{},{iconClass:d,fieldName:m});return[Object(l.a)(Object(l.a)({},v),{},{dragId:p}),v]}return[f,f]}),[f,n,c]),b=Object(i.a)(v,2),x=b[0],j=b[1],h=a.a.useState({contentHeight:40,contentWidth:0}),g=Object(i.a)(h,1)[0];a.a.useEffect((function(){if(x){var e,t,n=x.dragId||(null===(e=Object.values(c)[0])||void 0===e?void 0:e.id),o=null===(t=document.getElementById(n))||void 0===t?void 0:t.offsetWidth;g.contentWidth=o||200}}),[x]);var I=function(e,t,n,o){if(n.contentHeight,n.contentWidth,!e||!t)return{};var i=e.x,r=e.y,a=t.x,l=t.y,c={background:"#fff",position:"relative",left:"".concat(i,"px"),top:"".concat(r,"px")};return o&&Object.assign(c,{transform:"translate(-50%, -50%)",left:"".concat(a,"px"),top:"".concat(l,"px")}),c}(p,m,g,null===x||void 0===x?void 0:x.id);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("div",{style:d&&null!==x&&void 0!==x&&x.uniquelySign?Object(l.a)(Object(l.a)({},An),{},{zIndex:999,visibility:"visible"}):An,children:Object(pe.jsx)("div",{style:I,children:s?Object(pe.jsx)(s,Object(l.a)({},j)):Object(pe.jsx)("div",{className:"".concat(o,"-drag-perview"),style:{width:g.contentWidth,height:g.contentHeight},children:Object(pe.jsx)("div",{className:"".concat(o,"-single-widget-text"),children:null===x||void 0===x?void 0:x.fieldName})})})}),Object(pe.jsx)("div",{id:"".concat(o,"-faker-perview"),style:{position:"fixed",top:"-1000px"},children:"\xa0"})]})},Mn=(n(477),r.forwardRef((function(e,t){var n=r.useContext(ye),o=r.useContext(Fe),a=r.useContext(Ee),l=r.useMemo((function(){var e;return null===(e=J[o.formDesignId])||void 0===e?void 0:e.mounted}),[o.formDesignId]);return r.useImperativeHandle(t,(function(){var e=J[o.formDesignId]||{},t=e.recoverField,n=e.resetSetterPaneSchema,r=e.resetSetterPaneValue,l=function(t){var n="";return t.catch((function(e){var t=Object.entries(e[0]),o=Object(i.a)(t,1),r=Object(i.a)(o[0],1)[0];throw n=r,e})).finally((function(){var t;n&&(null===(t=a.selectField)||void 0===t||t.call(a,n),e.validateWithScrollSign.value=n)}))};return{validate:function(){return l(_(o,e))},submit:function(){return l(function(e,t){return _(e,t,!0).then((function(n){var o=e.outerFieldPostions,i=e.nestedFieldPostions;return function e(o){return o.reduce((function(o,r){var a=r.id,l=r.visible?t.recoverField(n[a]):n[a];return i[a]&&(l.items=e(i[a])),o.push(l),o}),[])}(o)}))}(o,e))},getFieldsMap:K.bind(null,o,t),setSelectFieldId:a.selectField,getSelectFieldId:function(){return o.selectedFieldId},getSelectField:function(){return t(o.fieldsMap[o.selectedFieldId||""])},deleteField:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[e,null,null];if("string"===typeof e){var i,r=(null===(i=o.fieldsMap[e])||void 0===i?void 0:i.parId)||null;n[1]=r}return a.deleteField.apply(a,n.concat([null,t]))},addField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.selectedFieldId,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={type:p,uniquelySign:e},r=o.fieldsMap[t||""],l={contentFieldId:null,dropIndex:null,id:"",type:"BASE"};if(r){var c=r.parId,s=c?o.nestedFieldPostions[c]||[]:o.outerFieldPostions,u=s.findIndex((function(e){return e.id===t}));l={contentFieldId:c,dropIndex:u=u>-1?u+1:s.length,id:t,type:"BASE"}}return a.placeField(l,i,n)},changeFieldInfo:function(t,n,i){if(t){var a,l=o.outerFieldPostions,c=o.nestedFieldPostions,s=null===(a=o.fieldsMap[t])||void 0===a?void 0:a.parId;n=((s?c[s]:l).filter((function(e){return e.id===t}))[0]||{}).visible?e.transformField(n):n}o.changeField(t,n,i||!1),t&&t!==o.selectedFieldId||(r.value=r.value+1)},resetSetterPane:function(){r.value=r.value+1,n.value=n.value+1}}}),[o,a]),Object(pe.jsxs)(wn.a,{backend:Pn.a,children:[Object(pe.jsx)("div",{className:f()(n.formDesignPerfixCls,e.className),style:e.style,children:l&&e.children}),Object(pe.jsx)(Nn,{formDesignPerfixCls:n.formDesignPerfixCls,formDesignId:o.formDesignId,fieldsMap:o.fieldsMap})]})}))),Vn=De(r.memo(Mn)),kn=n(513),Ln=n(512),$n=n(515),qn=a.a.createContext({}),Yn=a.a.createContext({}),Bn=n(520),Gn=Object(Bn.a)({scriptUrl:"//at.alicdn.com/t/font_3381042_lt1lqf512ec.js"}),Wn=n(514),Hn=n(233),zn=["children","sign"],Xn=a.a.memo((function(e){var t=e.onChange,n=e.dataSource,o=e.size,r=e.buttonSize,s=a.a.useState(0),u=Object(i.a)(s,2),d=u[0],f=u[1],p=function(e,n){f(e),null===t||void 0===t||t(n)};return Object(pe.jsx)(Wn.b,{size:o||0,children:n.map((function(e,t){var n=e.children,o=e.sign,i=Object(c.a)(e,zn);return Object(pe.jsx)(Hn.a,Object(l.a)(Object(l.a)({size:r},i),{},{style:t===d?{cursor:"default"}:{},disabled:t===d,onClick:p.bind(null,t,o),children:n}),o)}))})})),Kn=[{children:Object(pe.jsx)(Gn,{type:"icon-design"}),sign:"design"},{children:Object(pe.jsx)(Gn,{type:"icon-json"}),sign:"json"},{children:Object(pe.jsx)(Gn,{type:"icon-yunhang"}),sign:"run"}],_n=function(e){var t=e.onChange,n=a.a.useContext(qn).prefix;return Object(pe.jsx)("div",{className:"flex ".concat(n,"-content-header"),children:Object(pe.jsx)(Xn,{buttonSize:"small",dataSource:Kn,onChange:t})})},Un=n(96),Jn=["type","description","title","statusInfo","valueRule"],Qn={TEXT:{type:"string","x-decorator":"FormItem","x-component":"Input"},TEXTAREA:{type:"string","x-decorator":"FormItem","x-component":"Input.TextArea"},DATE:{type:"string","x-decorator":"FormItem","x-component":"DatePicker"},NUMBER:{type:"string","x-decorator":"FormItem","x-component":"NumberPicker"},SELECT:{type:"string","x-decorator":"FormItem","x-component":"Select"}},Zn={DATE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1980-01-01",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"9999-01-01",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u8bf7\u5927\u4e8e\u6700\u5c0f\u503c",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\u8bf7\u5c0f\u4e8e\u6700\u5927\u503c";return function(i){return i?+new Date(i)>=+new Date(t)?o:+new Date(i)<=+new Date(e)?n:void 0:""}}},eo=Object(S.a)((function e(){Object(C.a)(this,e)}));eo.initData=function(e){var t=e.type,n=e.description,o=e.title,r=e.statusInfo,a=e.valueRule,l=Object(c.a)(e,Jn);if(!Qn[t])throw new Error("".concat(t," \u7c7b\u578b\u4e0d\u5b58\u5728"));var s=function(e){switch(e.statusType){case"EDITABLE":return{editable:!0};case"READONLY":return{editable:!1};case"HIDDEN":return{visible:!1}}}(r),u=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=["DATE"].includes(t);return Object.entries(e).reduce((function(o,r){var a=Object(i.a)(r,2),l=a[0],c=a[1];return["minLength","maxLength","minimum","maximum"].includes(l)?o[l]=Number(c):"required"===l&&c?o["x-validator"].push({required:c,message:e.requiredErrorMsg}):"range"===l&&c&&n&&o["x-validator"].push(Zn[t](e.minDate,e.maxDate)),o}),{"x-validator":[]})}(a,{type:t});return Object.assign({title:o,description:n},Qn[t],{status:s},u,{"x-component-props":l})};var to=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(e){var o;Object(C.a)(this,n),o=t.call(this);var i=n.initData(e);return Object.assign(Object(Un.a)(o),i),o}return Object(S.a)(n)}(eo),no=["id"],oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=e.reduce((function(e,n){try{var o=n.id,i=Object(c.a)(n,no),r=new to(i);r=t(r),e[o]=r}catch(a){console.error(a)}return e}),{});return{type:"object",properties:n}},io=n(498),ro=Object(w.d)({components:{FormItem:io.b,Input:io.c,Select:io.e,DatePicker:io.a,NumberPicker:io.d}}),ao=Object(T.b)(),lo=function(e){var t=e.schema;return Object(pe.jsx)(w.a,{form:ao,children:Object(pe.jsx)(ro,{schema:t})})},co=kn.a.Content,so=kn.a.Sider,uo=Ln.a.TextArea,fo={CustomDataSourceSetter:Ln.a,AssociateDataSourceSetter:function(){return"AssociateDataSourceSetter"},NonEditableInfoSetter:function(e){return Object(pe.jsx)($n.a,Object(l.a)({options:[{key:"1",value:"1"},{key:"2",value:"2"}]},e))}},po=function(e){var t=e.dataSource;return Object(pe.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"8px 16px"},children:t.map((function(e){return Object(pe.jsx)(Pe,{uniquelySign:e.uniquelySign,info:e,style:{marginBottom:"8px"}},e.uniquelySign)}))})},mo=function(e){var t=e.json,n=a.a.useMemo((function(){return oo(t)}),[t]);return Object(pe.jsx)("div",{style:{width:800,margin:"0 auto"},children:Object(pe.jsx)(lo,{schema:n})})},vo=function(e){var t=function e(t){if(Array.isArray(t))return t.map(e);if("object"===typeof t){var n={};for(var o in t)n[o]=e(t[o]);return n}return"function"===typeof t?t.toString():t};for(var n in e)e[n]=t(e[n]);return e},bo=function(e){var t=e.prefix,n=e.json,o=a.a.useState(n),r=Object(i.a)(o,2),l=r[0],c=r[1],s=a.a.useCallback((function(e){if("origin"===e)c(n);else{var t=oo(n,vo);c(t)}}),[]);return Object(pe.jsxs)("div",{className:"".concat(t,"-json-show"),children:[Object(pe.jsx)($n.a,{style:{width:200},defaultValue:"origin",options:[{label:"\u539f\u59cb\u6570\u636e",value:"origin"},{label:"schema\u683c\u5f0f",value:"schema"}],onChange:s}),Object(pe.jsx)(uo,{className:"".concat(t,"-json-show-main"),value:JSON.stringify(l,void 0,"\t"),bordered:!1,autoSize:!0})]})},xo=function(e,t){switch(t.type){case"design":return Object(l.a)(Object(l.a)({},e),{},{selectId:t.type});case"json":case"run":return Object(l.a)(Object(l.a)({},e),{},{selectId:t.type,json:t.json});default:return e}},jo={selectId:"design",json:{}},ho=function(e){var t=e.dataSource,n=a.a.useContext(Yn).formDesignRef,o=a.a.useContext(qn).prefix,r=a.a.useReducer(xo,Object(l.a)({},jo)),c=Object(i.a)(r,2),s=c[0],u=s.selectId,d=s.json,f=c[1],p=a.a.useCallback((function(e){var t=["json","run"].includes(e)?n.current.submit().then((function(e){return{json:e}})):Promise.resolve();t.then((function(t){f(Object(l.a)({type:e},t))}))}),[]);return Object(pe.jsxs)(kn.a,{style:{height:"100%"},children:[Object(pe.jsx)(so,{theme:"light",width:300,children:Object(pe.jsx)(po,{dataSource:t})}),Object(pe.jsxs)(co,{className:"flex ".concat(o,"-content-main"),children:[Object(pe.jsx)(_n,{onChange:p}),Object(pe.jsxs)("div",{className:"".concat(o,"-operation-content"),children:["design"===u&&Object(pe.jsx)(qt,{}),"json"===u&&Object(pe.jsx)(bo,{prefix:o,json:d}),"run"===u&&Object(pe.jsx)(mo,{prefix:o,json:d})]})]}),"design"===u&&Object(pe.jsx)(so,{theme:"light",width:360,style:{padding:"8px 16px",height:"100%",overflow:"overlay"},children:Object(pe.jsx)(Tn,{expandFields:fo})})]})},go=(n(492),[{TEXT:n(493)},{TEXTAREA:n(494)},{DATE:n(495)},{NUMBER:n(496)},{SELECT:n(497)}]),Io=[{name:"\u6587\u672c",uniquelySign:"TEXT"},{name:"\u6587\u672c\u57df",uniquelySign:"TEXTAREA"},{name:"\u65e5\u671f",uniquelySign:"DATE"},{name:"\u6570\u503c",uniquelySign:"NUMBER"},{name:"\u9009\u62e9",uniquelySign:"SELECT"}],Oo=function(){var e=r.useRef({}),t=r.useState([]),n=Object(i.a)(t,2),o=n[0],a=(n[1],r.useState([])),l=Object(i.a)(a,2),c=l[0],s=l[1];return r.useEffect((function(){return console.log("mounted"),s(go),function(){console.log("unmounted"),s([])}}),[]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(kn.a,{style:{height:"100%",borderBottom:"1px solid #d9d9d9"},children:Object(pe.jsx)(Yn.Provider,{value:{formDesignRef:e},children:Object(pe.jsx)(Vn,{templates:c,style:{flex:1,overflow:"hidden"},ref:e,formVo:o,children:Object(pe.jsx)(ho,{dataSource:Io})})})})})},yo={prefix:"custom-form"};t.default=function(){return Object(pe.jsx)(qn.Provider,{value:yo,children:Object(pe.jsx)(Oo,{})})}}}]);
//# sourceMappingURL=4.8184eaa6.chunk.js.map