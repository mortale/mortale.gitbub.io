(this["webpackJsonpchild-react17"]=this["webpackJsonpchild-react17"]||[]).push([[4],{434:function(e,t,n){},478:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},514:function(e,t,n){},515:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c","x-component-props":{"maxLength":20},"x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"maxLength":100,"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXT","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"20"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","initialValue":"EDITABLE","x-component-props":{"isCompose":true},"enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},516:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c\u57df","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXTAREA","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"100"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},517:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u65e5\u671f","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"DATE","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u9009\u62e9\u65e5\u671f","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"format":{"title":"\u65e5\u671f\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","initialValue":"YYYY-MM-DD","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"target":"[valueRule>minDate,valueRule>maxDate]","fulfill":{"state":{"component[1].format":"{{$self.value}}"}}},"enum":[{"value":"YYYY","label":"\u5e74"},{"value":"YYYY-MM","label":"\u5e74-\u6708"},{"value":"YYYY-MM-DD","label":"\u5e74-\u6708-\u65e5"},{"value":"YYYY-MM-DD HH:mm","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206"},{"value":"YYYY-MM-DD HH:mm:ss","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2"}]}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minDate,valueRule>maxDate]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","initialValue":["2000","2025"],"x-component-props":{"type":"rangepicker"},"x-hidden":"{{!$values[\'valueRule>range\']}}","x-validator":[{"rangeSetterValidateRules":true}]}}}}}')},518:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6570\u503c","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"NUMBER","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165\u6570\u503c","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"carryRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u8fdb\u4f4d\u89c4\u5219"},"properties":{"valueRule>decimal":{"title":"\u5c0f\u6570\u4f4d","x-decorator":"FormItem","x-component":"InputNumber","initialValue":2,"x-component-props":{"width":"100%","min":0,"max":20}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minimum,valueRule>maximum]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","x-visible":"{{!!$values[\'valueRule>range\']}}","initialValue":["0","100"],"x-component-props":{"type":"number","placeholder":"\u4e0d\u9650"},"x-validator":[{"rangeSetterValidateRules":true}],"x-reactions":{"dependencies":["valueRule>decimal"],"fulfill":{"state":{"component[1].decimal":"{{$deps[0]}}"}}}}}}}}')},519:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u5355\u9009","x-validator":{"required":true,"customFieldsRules":true}},"id":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}"},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"SELECT","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"SELECT","label":"\u9009\u62e9"}]},"placeholder":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"options":{"title":"\u9009\u9879\u8bbe\u7f6e","x-decorator":"FormItem","x-component":"ModalContorl","x-component-props":{"text":"\u914d\u7f6e\u53ef\u9009\u9879"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}]}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"valueRule>required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'valueRule>required\']}}"}}}}}')},532:function(e,t,n){"use strict";n.r(t);var o,i=n(39),a=n(0),r=n.n(a),l=n(11),c=n(41),s=n(16),u=n(538),d=n(37),f=n.n(d),p="BASE",m="CHANGE_FORMVO",v="INIT_FORMDESIGN",b="PLACE_FIELD",j="DELETE_FIELD",x="BATCH_DELETE_FIELD",h="MOVE_FIELD",O="SELECT_FIELD",g="COPY_FIELD",I="CHANGE_FIELD",y="CLEAR_FORMDESIGN",F=n(180),E=n(58),D=n(49),C=n(50),S=n(51),T=n(73),w=n(65),P=n(246),R=["items"],N=["fieldFunctionContorl","templates","extendMaskLayers"],A=["mounted","unMounted"],M=["templates","splitDownKeys","dndMaskLayerTemplates"],k=["parId","splitDownKeys"],V=function(e){return void 0===e||null===e||"object"!==typeof e?e:JSON.parse(JSON.stringify(e))},L=function(e){return"[object Object]"===Object.prototype.toString.call(e)},$=function(e,t){if(!e)return[];for(var n=[e],o=t[n[n.length-1]];o.parId;)n.push(o.parId),o=t[n[n.length-1]];return n},q=function(e){var t={};if(!e||!L(e))return null;var n=this.fieldInfoTemplate[e.type];n||console.error("".concat(e.type," template is not found"));var o=Array.from((null===n||void 0===n?void 0:n.splitDownKeys)||[]);for(var i in e)if(!k.includes(i)&&Object.prototype.hasOwnProperty.call(e,i)){var a=""===e[i]?null:V(e[i]),r=i.replace(/(\"|\')/g,"").split(">"),l=r.pop();if(r.length>=1){if(r.every((function(e){return o.includes(e)})))r.reduce((function(e,t){return e[t]||(e[t]={}),e[t]}),t)[l]=a}else t[i]=a}return t},B=function(e,t){var n={};if(!e||!L(e))return null;void 0!==t&&(n.parId=t);var o=this.fieldInfoTemplate[e.type];o||console.error("".concat(e.type," template is not found"));var i=Array.from((null===o||void 0===o?void 0:o.splitDownKeys)||[]);return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=o?o+">"+a:a,l=t[a];i.includes(a)&&L(l)?e(l,r):n[r]=V(l)}}(e),n},Y=function(e,t){var n,o=this.fieldFunctionContorl,i=this.transformField,a=this.fieldKey,r={},c={};return n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t||void 0===t?void 0:t.map((function(t){var s=""+t[a],u=(null===o||void 0===o?void 0:o(t))||{},d=u.canDrag,f=u.canDel,p=u.canCopy,m=u.visible,v={id:s,canDrag:null===d||void 0===d||d,canDel:null===f||void 0===f||f,canCopy:null===p||void 0===p||p,visible:null===m||void 0===m||m};return c[s]=v.visible?i(t,n):Object(l.a)(Object(l.a)({},t),{},{parId:n}),t.items&&(r[s]=e(t.items||[],s)),v}))}(e),{outerFieldPostions:n,nestedFieldPostions:r,fieldsMap:c}},W=function e(t){return(t=Array.isArray(t)?t:[t]).reduce((function(t,n){if("Identifier"===n.type)t.push(n.value);else if("DestructorExpression"===n.type){var o;"ArrayPattern"===(null===(o=n.value)||void 0===o?void 0:o.type)?t.push.apply(t,Object(D.a)(e(n.value.elements))):(console.warn("parserType",n.type),console.warn("afterType",n.value.type))}else console.warn("otherType",n.type);return t}),[])},G=function(e){var t={},n={};return e&&e.forEach((function(e){var o=function(o){if(Object.prototype.hasOwnProperty.call(e,o)){var i=e[o];if(i){t[o]=Object(l.a)({splitDownKeys:new Set},i.initialValue||{}),n[o]=i;var a=z(i,(function(e,n){var i=new P.a(e).parse(),a=void 0!==n.initialValue&&null!==n.initialValue;W(i).forEach((function(e,i){var r=e.replace(/(\"|\')/g,"").split(">");r.length>1&&(r.pop(),r.forEach((function(e){return t[o].splitDownKeys.add(e)}))),!a||n.type&&!["void","array","object"].includes(n.type)||(Array.isArray(n.initialValue)?t[o][e]=n.initialValue[i]:t[o][e]=n.initialValue)})),delete n.initialValue}));n[o]=a.toJSON()}}};for(var i in e)o(i)})),{fieldInfoTemplate:t,fieldSetterTemplate:n}},H=function(e,t){var n=this,o=(t.data||{}).contorlTrigger;return o&&(o=Array.isArray(o)?o:[o]).forEach((function(o){var i=e[o];e[o]=function(){for(var e,a,r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];Promise.resolve(null===(e=null===(a=n["".concat(o,"ValidateInSetter")])||void 0===a?void 0:a.call(n,t.props.name,l[0],n.recoverField(t.form.values)))||void 0===e||e).then((function(e){e&&i.apply(void 0,l)}))}})),Object(l.a)({},e)},z=function(e,t){return function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T.a(""),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mapProperties((function(n,a,r){var l=o.concat(a);if(void 0===a||null===a)e(n,o);else{var c=null===t||void 0===t?void 0:t(a,n,o,i);n.type&&["object","void"].includes(n.type)&&e(n,l,c)}}))}(e=new w.b(Object.assign({type:"object"},e))),e},X=function(e,t,n){var o=n.createSchemaFieldParams;t=new w.b(t);var i=Object(T.b)({initialValues:e,validateFirst:!0});return z(t,(function(e,t,n){var a,r=t.toFieldProps(o),l=Object.assign({},r,{name:e,basePath:n});(a="object"===t.type?i.createObjectField(l):"array"===t.type?i.createArrayField(l):"void"===t.type?i.createVoidField(l):i.createField(l))&&"none"===a.display&&(i.deleteValuesIn(e),a.destroy())})),i.onMount(),i.submit().finally((function(){i.onUnmount()}))},K=function(e,t){var n=e.outerFieldPostions,o=e.nestedFieldPostions,i=e.fieldsMap;return function e(n){return n.reduce((function(n,a){var r=a.id,l=a.visible,c=i[r];return l&&(c=t(c),o[r]&&(c.items=e(o[r])),n.push(c)),n}),[])}(n)},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.fieldsMap,a=e.outerFieldPostions,r=e.nestedContainerFieldPostions,l=t.fieldSetterTemplate,c=Object.entries(o).reduce((function(e,n){var o=Object(i.a)(n,2),c=o[0],s=o[1];if(!s)return e;var u,d=null===s||void 0===s?void 0:s.parId,f=(d?r[d]:a).filter((function(e){return e.id===c}))[0].visible,p=null!==(u=l[s.type])&&void 0!==u?u:null;return f?p?e.push(X(s,p,t).then((function(e){return[c,e]}),(function(e){throw[c,e]}))):e.push(Promise.reject([c,[{code:"schemaError",messages:s.type?"".concat(c,"\u5b57\u6bb5\u7c7b\u578b\u4e3a\u4e0d\u5b58\u5728"):"".concat(c,"\u7684\u7c7b\u578b\u4e3a").concat(s.type,"\u7684schema\u7f3a\u5931")}]])):e.push([c,s]),e}),[]);return Promise.allSettled(c).then((function(e){var t=e.reduce((function(e,t){var n=t.status,o=t.value,i=t.reason;return"rejected"===n?e.error.push(Object(s.a)({},i[0],i[1])):e.success[o[0]]=o[1],e}),{error:[],success:{}});if(t.error.length)throw t.error;if(n)return t.success}))},U=function e(t,n){var o=n.fieldInfoTemplate,i=n.fieldKey,a=[];return[(Array.isArray(t)?t:[t]).map((function(t){var n,r,u=t.items,d=Object(c.a)(t,R),f=null!==(n=t[i])&&void 0!==n?n:Math.random().toString(36).slice(-8)+ +new Date,p=(o[d.type]||{}).title,m=Object(l.a)(Object(l.a)({},d),{},(r={id:f},Object(s.a)(r,i,f),Object(s.a)(r,"title",p),r));return u&&Array.isArray(u)&&(m.items=e(u,o)),a.push(f),m})),a]},J=function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,null,[{key:"initSupInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldFunctionContorl,o=t.templates,i=t.extendMaskLayers,a=Object(c.a)(t,N),r=G(o);this[e]=Object(l.a)(Object(l.a)(Object(l.a)({mounted:!0,fieldFunctionContorl:n,templates:o,extendMaskLayers:i},a),r),{},{dndMaskLayerTemplates:Object(E.i)(i||{})}),Object.assign(this[e],{transformField:B.bind(this[e]),recoverField:q.bind(this[e]),transformFormVo:Y.bind(this[e]),dealWithCustomData:H.bind(this[e])})}},{key:"changeSupInfo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this[t]){var o=this[t],i=(o.mounted,o.unMounted,Object(c.a)(o,A)),a=e.diffChange(i,n);Object.assign(this[t],a)}}},{key:"deleteSupInfo",value:function(e){this[e]&&Object.assign(this[e],{unMounted:!0})}},{key:"diffChange",value:function(e,t){var n=t.templates,o=(t.splitDownKeys,t.dndMaskLayerTemplates,Object(c.a)(t,M));return n&&e.templates!==n&&Object.assign(o,G(n)),o}}]),e}();!function(e){e.add="add",e.move="move",e.delete="delete",e.copy="copy",e.select="select"}(o||(o={}));var Q,Z,ee=["type","formDesignId"],te=["fieldsMap"],ne=function(e,t){e[t]=void 0},oe={formDesignId:"",outerFieldPostions:[],nestedFieldPostions:{},fieldsMap:{},selectedFieldId:null},ie=function(e,t,n){var o,i=e.innerField,a=e.placeLayerInfo,r=(e.dragFieldInfo,a.contentFieldId),l=a.dropIndex,c=r?t.nestedFieldPostions[r]||(t.nestedFieldPostions[r]=[],t.nestedFieldPostions[r]):t.outerFieldPostions,s=l||Object(F.findLastIndex)(c,(function(e){return e.visible}))+1,u=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,i);c.splice.apply(c,[s,0].concat(Object(D.a)(u.outerFieldPostions))),r?t.nestedFieldPostions[r]=Object(D.a)(c):t.outerFieldPostions=Object(D.a)(c),Object.assign(t.fieldsMap,u.fieldsMap),Object.assign(t.nestedFieldPostions,u.nestedFieldPostions)},ae=function(e,t,n){var o,i=e.contentFieldId,a=e.copyField,r=e.innerIndex,l=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,a),c=i?t.nestedFieldPostions[i]:t.outerFieldPostions;c.splice.apply(c,[r+1,0].concat(Object(D.a)(l.outerFieldPostions))),i?t.nestedFieldPostions[i]=Object(D.a)(c):t.outerFieldPostions=Object(D.a)(c),Object.assign(t.nestedFieldPostions,l.nestedFieldPostions),Object.assign(t.fieldsMap,l.fieldsMap)},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:""},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.index,i=t.id,a=n.index,r=[],l=e.filter((function(e){return e.id===i}))[0];e.length&&-1!==o||r.push(l);var c=e.reduce((function(e,t,n){return n!==a&&e.push(t),n===o&&l&&e.push(l),e}),r);if(l&&void 0===o){var s=Object(F.findLastIndex)(c,(function(e){return e.visible}))+1;c.splice(s,0,l)}return c},le=function(e,t){var n=e.placeLayerInfo,o=e.dragFieldInfo,i=t.nestedContainerFieldPostions,a=t.outerFieldPostions,r=o.id,l=o.contentFieldId,c=o.dragIndex,s=n.contentFieldId,u=n.dropIndex,d=s?i[s]:a,f=l?i[l]:a,p=[];switch((p=d===f?[d=re(d,{index:u,id:r},{index:c})]:[d=re(d,{index:u||d.length-1,id:r}),f=re(f,void 0,{index:c})]).length){case 1:return s?i[s]=p[0]:a=p[0],{nestedContainerFieldPostions:i,outerFieldPostions:a};case 2:return s?i[s]=p[0]:a=p[0],l?i[l]=p[1]:a=p[1],{nestedContainerFieldPostions:i,outerFieldPostions:a};default:return null}},ce=function(e,t){var n=e.fieldId,o=e.contentFieldId,i=(o?t.nestedFieldPostions[o]:t.outerFieldPostions).filter((function(e){return e.id!==n}));o?t.nestedFieldPostions[o]=Object(D.a)(i):t.outerFieldPostions=Object(D.a)(i),t.nestedFieldPostions[n]&&ne(t.nestedFieldPostions,n);var a=$(t.selectedFieldId,t.fieldsMap),r=a.indexOf(n);r>=0&&(t.selectedFieldId=a[r+1]||null),ne(t.fieldsMap,n)},se=function(e,t){var n=e.fieldId,o=t.nestedFieldPostions,i=t.fieldsMap,a=t.outerFieldPostions,r=t.selectedFieldId,l=$(t.selectedFieldId,t.fieldsMap),c=-1;return Array.isArray(n)&&(n.forEach((function(e){var t=i[e];if(t){t.parId?(o[t.parId]=o[t.parId].filter((function(t){return t.id!==e})),o[e]&&ne(o,e)):a=a.filter((function(t){return t.id!==e})),ne(i,e);var n=l.indexOf(e);c=Math.max(n,c)}})),c>=0&&(r=l[c+1]||null)),{nestedFieldPostions:o,outerFieldPostions:a,fieldsMap:i,selectedFieldId:r}},ue=function(e,t,n){var o=e.fieldId,i=e.newFieldInfo,a=void 0===i?{}:i,r=e.cover;o=o||t.selectedFieldId;var c=t.fieldsMap[o];t.fieldsMap[o]=r?Object(l.a)(Object(l.a)({},a),{},{parId:c.parId}):Object.assign({parId:c.parId},c,Object(F.cloneDeep)(a))},de=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=void 0)},fe=function(){var e,t,n,i,a,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(F.cloneDeep)(oe),u=arguments.length>1?arguments[1]:void 0,d=u.type,f=u.formDesignId,p=Object(c.a)(u,ee),E=J[s.formDesignId]||{};switch(d){case v:return Object(l.a)(Object(l.a)({},s),{},{formDesignId:f});case m:var D=(null===(e=E.transformFormVo)||void 0===e?void 0:e.call(E,p.formVo||[]))||{},C=D.fieldsMap,S=Object(c.a)(D,te);return de(s.fieldsMap),Object.assign(s.fieldsMap,C||{}),Object(l.a)(Object(l.a)({},s),S);case b:return ie(p,s,E),null===(t=E.onFormVoChange)||void 0===t||t.call(E,o.add,p.innerField),Object(l.a)({},s);case g:return ae(p,s,E),null===(n=E.onFormVoChange)||void 0===n||n.call(E,o.copy,p.copyField),Object(l.a)({},s);case h:var T=le(p,s);if(T){var w,P=p.placeLayerInfo,R=p.dragFieldInfo,N=s.fieldsMap[R.id];return N.parId=P.contentFieldId,null===(w=E.onFormVoChange)||void 0===w||w.call(E,o.move,N),Object(l.a)(Object(l.a)({},s),T)}return s;case j:return ce(p,s),null===(i=E.onFormVoChange)||void 0===i||i.call(E,o.delete,p.fieldId),Object(l.a)({},s);case x:var A=se(p,s);return null===(a=E.onFormVoChange)||void 0===a||a.call(E,o.delete,p.deleteIds),Object(l.a)(Object(l.a)({},s),A);case O:return null===(r=E.onFormVoChange)||void 0===r||r.call(E,o.select,p.selectId),Object(l.a)(Object(l.a)({},s),{},{selectedFieldId:p.selectId});case I:return ue(p,s),Object(l.a)({},s);case y:return Object(F.cloneDeep)(oe);default:return s}},pe=n(4),me=["formDesignPerfixCls"],ve=["formVo","templates","fieldFunctionContorl","formDesignId","customFieldAttrWithSetting","customFieldsRules","manualContorlSchema","onFormVoChange","onFieldChange","onChangeValidateInSetter","extendMaskLayers","fieldKey","coustomPerview"],be=["formDesignState","formDesignDataDiepatch","placeFieldValidate","createInnerFieldInfo","moveFieldValidate","deleteFieldValidate","copyFieldValidate","createCopyFieldInfo","formDesignId"],je=["type"],xe=["type"],he=["splitDownKeys"],Oe=["type"],ge=["type"],Ie={formDesignPerfixCls:"mortale-form-design",formDesignId:""},ye=r.a.createContext(Ie),Fe=r.a.createContext(oe),Ee=r.a.createContext({placeField:function(){return Promise.resolve([])},moveField:function(){},deleteField:function(){return Promise.resolve(!0)},copyField:function(){return Promise.resolve([])},selectField:function(){}}),De=(Q=[function(e){return r.a.forwardRef((function(t,n){var o=t.formDesignPerfixCls,i=Object(c.a)(t,me),a=r.a.useMemo((function(){var e=Object(l.a)({},Ie);return o&&(e.formDesignPerfixCls=o),e.formDesignId=Object(F.uniqueId)("".concat(e.formDesignPerfixCls,"-")),e}),[o]);return Object(pe.jsx)(ye.Provider,{value:a,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)(Object(l.a)({},i),a),{},{ref:n}))})}))},function(e){return r.a.forwardRef((function(t,n){var o=t.formVo,a=t.templates,s=t.fieldFunctionContorl,u=t.formDesignId,d=t.customFieldAttrWithSetting,f=t.customFieldsRules,p=t.manualContorlSchema,b=t.onFormVoChange,j=t.onFieldChange,x=t.onChangeValidateInSetter,h=t.extendMaskLayers,O=t.fieldKey,g=void 0===O?"id":O,D=t.coustomPerview,C=Object(c.a)(t,ve),S=r.a.useReducer(fe,Object(F.cloneDeep)(oe)),T=Object(i.a)(S,2),w=T[0],P=T[1];r.a.useEffect((function(){J.changeSupInfo(u,{fieldFunctionContorl:s,customFieldAttrWithSetting:d,customFieldsRules:f,templates:a,manualContorlSchema:p,onFormVoChange:b,onFieldChange:j,CoustomPerView:D})}),[a,s,d,f,p,b,j,D]),r.a.useEffect((function(){return Promise.resolve(J.initSupInfo(u,{fieldFunctionContorl:s,customFieldAttrWithSetting:d,templates:a,customFieldsRules:f,validateWithScrollSign:E.i.ref(""),manualContorlSchema:p,onFormVoChange:b,onFieldChange:j,onChangeValidateInSetter:x,fieldKey:g,CoustomPerView:D,extendMaskLayers:h})).then((function(){P({type:v,formDesignId:u})})).finally((function(){null!==o&&void 0!==o&&o.length&&P({type:m,formVo:o})})),function(){Promise.resolve(J.deleteSupInfo(u)).then((function(){P({type:y})})).finally((function(){}))}}),[]),r.a.useEffect((function(){var e=J[u];e&&P({type:m,formVo:o}),w.selectedFieldId&&(null!==e&&void 0!==e&&e.resetSetterPaneValue&&(e.resetSetterPaneValue.value=e.resetSetterPaneValue.value+1),null!==e&&void 0!==e&&e.resetSetterPaneSchema&&(e.resetSetterPaneSchema.value=e.resetSetterPaneSchema.value+1))}),[o]);var R=r.a.useCallback((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];P({type:I,fieldId:e,newFieldInfo:t,cover:n})}),[]),N=r.a.useMemo((function(){return Object(l.a)(Object(l.a)({},w),{},{changeField:R})}),[w,R]);return Object(pe.jsx)(Fe.Provider,{value:N,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)({},C),{},{formDesignDataDiepatch:P,formDesignState:w,formDesignId:u,ref:n}))})}))},function(e){return r.a.forwardRef((function(t,n){var o=t.formDesignState,a=t.formDesignDataDiepatch,s=t.placeFieldValidate,u=t.createInnerFieldInfo,d=t.moveFieldValidate,f=t.deleteFieldValidate,p=t.copyFieldValidate,m=t.createCopyFieldInfo,v=t.formDesignId,I=Object(c.a)(t,be),y=r.a.useCallback((function(e,t,n,i){var a,r,c,s=J[v],u=null===(a=s.recoverField)||void 0===a?void 0:a.call(s,o.fieldsMap[n.id]),d=null===(r=s.recoverField)||void 0===r?void 0:r.call(s,o.fieldsMap[t.id]);return Promise.resolve(e||null===(c=null===i||void 0===i?void 0:i(Object(l.a)(Object(l.a)({},u),n),Object(l.a)(Object(l.a)({},d),t)))||void 0===c||c).then((function(e){return{validateResult:e,operationField:u,contentField:d}}))}),[]),E=r.a.useCallback((function(e,t){e.type;var n=Object(c.a)(e,je),o=(t.type,Object(c.a)(t,xe)),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=J[v];return Promise.resolve(y(r,n,o,s)).then((function(e){var t=e.validateResult,r=(e.operationField,e.contentField);if(t){var s=Object(F.cloneDeep)(l.fieldInfoTemplate[o.uniquelySign]),d=(s.splitDownKeys,Object(c.a)(s,he));return d||console.error("".concat(o.uniquelySign,"\u7c7b\u578b\u5b57\u6bb5\u4e0d\u5b58\u5728")),Promise.resolve((null===u||void 0===u?void 0:u(d,r))||d).then((function(e){var t=U(e,l),r=Object(i.a)(t,2),c=r[0],s=r[1];return a({type:b,innerField:c,placeLayerInfo:n,dragFieldInfo:o}),s}))}return[]}))}),[s,u]),D=r.a.useCallback((function(e,t){e.type;var n=Object(c.a)(e,Oe),o=(t.type,Object(c.a)(t,ge)),i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Promise.resolve(y(i,n,o,d)).then((function(e){var t=e.validateResult;e.operationField,e.contentField,t&&a({type:h,placeLayerInfo:n,dragFieldInfo:o})}))}),[d]),C=r.a.useCallback((function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return null===o||void 0===o||o.stopPropagation(),Promise.resolve(y(i,{id:t},{id:e},f)).then((function(o){var i,a=o.validateResult,r=(o.operationField,o.contentField,!1);return Array.isArray(a)?null!==a&&void 0!==a&&a.length&&(i={fieldId:a},r=!0):a&&(Array.isArray(e)&&null!==e&&void 0!==e&&e.length?(i={deleteIds:e},r=!0):i={fieldId:e,deleteIndex:n,contentFieldId:t}),{isBatchDel:r,dispatchParams:i}})).then((function(e){var t=e.isBatchDel,n=e.dispatchParams,o=!1;return n&&(a(t?Object(l.a)({type:x},n):Object(l.a)({type:j},n)),o=!0),o}))}),[f]),S=r.a.useCallback((function(e,t){null===t||void 0===t||t.stopPropagation(),a({type:O,selectId:e})}),[]),T=r.a.useCallback((function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null===o||void 0===o||o.stopPropagation();var l=J[v];return Promise.resolve(y(r,{id:t},{id:e},p)).then((function(e){var o=e.validateResult,r=e.operationField,c=e.contentField;return o?Promise.resolve((null===m||void 0===m?void 0:m(r,c))||r).then((function(e){var o=U(e,l),r=Object(i.a)(o,2),c=r[0],s=r[1];return a({type:g,contentFieldId:t,innerIndex:n,copyField:c}),s})):[]}))}),[y,p,m]),w=r.a.useMemo((function(){return{placeField:E,moveField:D,deleteField:C,selectField:S,copyField:T}}),[]);return Object(pe.jsx)(Ee.Provider,{value:w,children:Object(pe.jsx)(e,Object(l.a)(Object(l.a)({},I),{},{ref:n}))})}))}],function(e){return Q.reduceRight((function(e,t){return t(e)}),e)}),Ce=["children","type","uniquelySign","canDrag","title","style","className","formDesignPerfixCls","formDesignId"],Se=["info"],Te=r.a.memo((function(e){var t=e.type,n=void 0===t?p:t,o=e.canDrag,a=void 0===o||o,l=e.formDesignPerfixCls,c=e.uniquelySign,d=Object(u.a)({item:{type:n,uniquelySign:c},options:{dropEffect:"copy"},canDrag:function(){return a}}),m=Object(i.a)(d,3),v=m[1],b=m[2];return r.a.useEffect((function(){b(document.getElementById("".concat(l,"-faker-perview")))}),[l]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("div",{ref:v,className:f()("".concat(l,"-drag-layer"),Object(s.a)({},"".concat(l,"-drag-disable"),!a))})})})),we=r.a.memo((function(e){var t=e.children,n=e.type,o=void 0===n?p:n,i=e.uniquelySign,a=e.canDrag,s=e.title,u=e.style,d=e.className,m=e.formDesignPerfixCls,v=e.formDesignId,b=Object(c.a)(e,Ce),j=J[v],x=r.a.useMemo((function(){return"".concat(o,"_").concat(i)}),[o,i]);return r.a.useEffect((function(){j&&(j.dndMaskLayerTemplates[i]=Object(l.a)({id:x,uniquelySign:i,type:o,name:s},b))}),[j,x]),Object(pe.jsxs)("div",{className:f()("".concat(m,"-drag-range"),d),id:x,title:s,style:u,children:[Object(pe.jsx)(Te,{type:o,uniquelySign:i,canDrag:a,formDesignPerfixCls:m}),t]})})),Pe=function(e){var t=e.info,n=Object(c.a)(e,Se),o=r.a.useContext(ye),i=o.formDesignId,a=o.formDesignPerfixCls;return Object(pe.jsx)(we,Object(l.a)(Object(l.a)(Object(l.a)({},t),n),{},{title:t.name,formDesignId:i,formDesignPerfixCls:a,children:Object(pe.jsx)("div",{className:"".concat(a,"-single-widget-content"),children:Object(pe.jsx)("div",{className:"".concat(a,"-single-widget-text"),children:t.name})})}))},Re=n(232),Ne=n.n(Re),Ae=n(144),Me=n(539),ke=n(543),Ve=n(544),Le=["isDropContent","accept","type","children","fieldId","index","contentFieldId"],$e=Object(Ae.default)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.apply(void 0,n.concat(o))}}));!function(e){e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.none=""}(Z||(Z={}));var qe=a.forwardRef((function(e,t){var n=e.children,o=e.contentFieldId,i=e.formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(i,"-drop-content"),style:{zIndex:o?11:1},ref:t,children:n})})),Be=a.forwardRef((function(e,t){var n,o=e.children,i=(e.contentFieldId,e.fieldId),r=e.isSelected,l=e.deleteField,c=e.selectField,u=e.copyField,d=e.canDel,p=e.canCopy,m=e.isDragging,v=e.isFirstField,b=e.isLastField,j=e.locationMarker,x=e.formDesignPerfixCls,h="".concat(x,"-form-item-hover"),O=a.useCallback((function(e){return l(e)}),[l]),g=a.useCallback((function(e){return u(e)}),[u]);return Object(pe.jsx)("div",{id:i,ref:t,className:"".concat(x,"-field-dnd-wrapper"),children:Object(pe.jsx)("div",{className:f()((n={},Object(s.a)(n,"".concat(x,"-field-active"),r),Object(s.a)(n,"".concat(x,"-first-field"),v),Object(s.a)(n,"".concat(x,"-last-field"),b),Object(s.a)(n,"".concat(x,"-field-dragging"),m),Object(s.a)(n,"".concat(x,"-location-").concat(j.sign,"-marker"),j.show&&j.sign),n)),onClick:c,onMouseOver:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.add(h)},onMouseOut:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.remove(h)},children:Object(pe.jsxs)("div",{className:"".concat(x,"-field-border"),children:[Object(pe.jsxs)("div",{className:"".concat(x,"-field-operation-area"),children:[Object(pe.jsx)("span",{children:p&&Object(pe.jsx)(ke.a,{onClick:g})}),Object(pe.jsx)("span",{children:d&&Object(pe.jsx)(Ve.a,{onClick:O})})]}),o]})})})})),Ye=function(e){var t=e.isDropContent,n=void 0!==t&&t,o=e.accept,r=void 0===o?p:o,s=e.type,d=void 0===s?p:s,f=e.children,m=e.fieldId,v=e.index,b=e.contentFieldId,j=Object(c.a)(e,Le),x=a.useContext(ye).formDesignPerfixCls,h=a.useContext(Ee),O=h.placeField,g=h.moveField,I=h.selectField,y=h.deleteField,F=h.copyField,E=$e(I,m),D=$e(y,m,b,v),C=$e(F,m,b,v),S=function(e,t,n){var o=t.placeField,r=t.moveField,l=t.selectField,c=t.type,s=t.accept,d=t.canDrag,f=void 0===d||d,p=t.formDesignPerfixCls,m=n.contentFieldId,v=n.fieldId,b=n.index,j=a.useState({show:!1,sign:Z.none}),x=Object(i.a)(j,2),h=x[0],O=x[1],g=a.useRef(null),I=Object(u.a)({item:{type:c,id:v,contentFieldId:m,dragIndex:b},canDrag:f,collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(i.a)(I,3),F=y[0],E=y[1],D=y[2],C=a.useCallback((function(e,t){var n=t.top,o=t.height,i=t.bottom,a=e.y;if(!(a-n<0||i-a<0)){var r={show:!0,sign:a-n<=o/2?Z.top:Z.bottom};h.show===r.show&&h.sign===r.sign||O(r)}}),[h]),S=Object(Me.a)({accept:s,drop:function(e,t){var n=t.getDropResult(),i=t.isOver({shallow:!1}),a=t.getItem().id;if(!n&&i)if(a){var s="number"!==typeof b||[Z.bottom,Z.right].includes(h.sign)?b:b-1;null===r||void 0===r||r({type:c,id:v,contentFieldId:m,dropIndex:s},e)}else{var u="number"!==typeof b||[Z.top,Z.left].includes(h.sign)?b:b+1;o({type:c,id:v,contentFieldId:m,dropIndex:u},e).then((function(e){e.length&&l(e[0])}))}},hover:function(t,n){if(((null===t||void 0===t?void 0:t.id)!==v||e)&&n.isOver({shallow:!0})&&g.current){var o=n.getClientOffset(),i=g.current.getBoundingClientRect();if(t.id&&[t.index,t.index+1].includes(o.y-i.top<=i.height/2?b:b+1))return;C(o,i)}},collect:function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),clientOffset:e.getClientOffset()}}}),T=Object(i.a)(S,2),w=T[0],P=T[1];return a.useEffect((function(){e||(E(g),D(document.getElementById("".concat(p,"-faker-perview")))),P(g)}),[g,e]),a.useEffect((function(){var e;return h.show&&!w.isOverCurrent&&(e=setTimeout((function(){clearTimeout(e),O({show:!1,sign:Z.none})}),32)),function(){e&&clearTimeout(e)}}),[h,w.isOverCurrent]),[g,F.isDragging,h]}(n,{placeField:O,moveField:g,selectField:I,type:d,accept:r,canDrag:j.canDrag,formDesignPerfixCls:x},{contentFieldId:b,fieldId:m,index:v}),T=Object(i.a)(S,3),w=T[0],P=T[1],R=T[2],N=a.useMemo((function(){return n?qe:Be}),[n]);return Object(pe.jsx)(N,Object(l.a)(Object(l.a)({ref:w},j),{},{formDesignPerfixCls:x,fieldId:m,contentFieldId:b,selectField:E,deleteField:D,copyField:C,isDragging:P,locationMarker:R,children:f}))},We=n(166),Ge=n.n(We),He=n(225),ze=n.n(He),Xe=n(54),Ke=n(56),_e=n(219),Ue=n.n(_e),Je=function(){return Je=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Je.apply(this,arguments)},Qe=Object(a.createContext)(null),Ze=Object(a.createContext)(null),et=function(){return Je(Je({},Object(a.useContext)(Qe)),Object(a.useContext)(Ze))},tt=n(190),nt=n.n(tt),ot=n(299),it=n.n(ot),at=n(545),rt=n(250),lt=n(251),ct=n(252),st=["id"],ut=function(){return ut=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)},dt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},ft=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return r};var pt={error:r.a.createElement(rt.a,null),success:r.a.createElement(lt.a,null),warning:r.a.createElement(ct.a,null)},mt=function(e){var t,n,o,i,l,s=e.id,u=Object(c.a)(e,st),d=u.children,p=dt(u,["children"]),m=ft(Object(a.useState)(!1),2),v=m[0],b=m[1],j=function(e){var t,n,o,i,a,l,c,s,u,d,f,p,m,v,b,j,x,h,O,g,I,y,F,E,D=et();return ut(ut({},e),{layout:null!==(n=null!==(t=e.layout)&&void 0!==t?t:D.layout)&&void 0!==n?n:"horizontal",colon:null!==(o=e.colon)&&void 0!==o?o:D.colon,labelAlign:"vertical"===D.layout?null!==(a=null!==(i=e.labelAlign)&&void 0!==i?i:D.labelAlign)&&void 0!==a?a:"left":null!==(c=null!==(l=e.labelAlign)&&void 0!==l?l:D.labelAlign)&&void 0!==c?c:"right",labelWrap:null!==(s=e.labelWrap)&&void 0!==s?s:D.labelWrap,labelWidth:null!==(u=e.labelWidth)&&void 0!==u?u:D.labelWidth,wrapperWidth:null!==(d=e.wrapperWidth)&&void 0!==d?d:D.wrapperWidth,labelCol:null!==(f=e.labelCol)&&void 0!==f?f:D.labelCol,wrapperCol:null!==(p=e.wrapperCol)&&void 0!==p?p:D.wrapperCol,wrapperAlign:null!==(m=e.wrapperAlign)&&void 0!==m?m:D.wrapperAlign,wrapperWrap:null!==(v=e.wrapperWrap)&&void 0!==v?v:D.wrapperWrap,fullness:null!==(b=e.fullness)&&void 0!==b?b:D.fullness,size:null!==(j=e.size)&&void 0!==j?j:D.size,inset:null!==(x=e.inset)&&void 0!==x?x:D.inset,asterisk:e.asterisk,bordered:null!==(h=e.bordered)&&void 0!==h?h:D.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(g=null!==(O=e.feedbackLayout)&&void 0!==O?O:D.feedbackLayout)&&void 0!==g?g:"loose",tooltipLayout:null!==(y=null!==(I=e.tooltipLayout)&&void 0!==I?I:D.tooltipLayout)&&void 0!==y?y:"icon",tooltipIcon:null!==(E=null!==(F=e.tooltipIcon)&&void 0!==F?F:D.tooltipIcon)&&void 0!==E?E:r.a.createElement(at.a,null)})}(p),x=function(){var e=ft(Object(a.useState)(!1),2),t=e[0],n=e[1],o=Object(a.useRef)(),i=Object(a.useRef)();return Object(a.useLayoutEffect)((function(){if(o.current&&i.current){var e=i.current.getBoundingClientRect().width,a=o.current.getBoundingClientRect().width;e&&a&&a<e||t&&n(!1)}}),[]),{overflow:t,containerRef:o,contentRef:i}}(),h=x.containerRef,O=x.contentRef,g=x.overflow,I=j.label,y=j.style,F=j.layout,E=j.colon,D=void 0===E||E,C=j.addonBefore,S=j.addonAfter,T=j.asterisk,w=j.feedbackStatus,P=j.extra,R=j.feedbackText,N=j.fullness,A=j.feedbackLayout,M=j.feedbackIcon,k=j.inset,V=j.bordered,L=void 0===V||V,$=j.labelWidth,q=j.wrapperWidth,B=j.labelCol,Y=j.wrapperCol,W=j.labelAlign,G=j.wrapperAlign,H=void 0===G?"left":G,z=j.size,X=j.labelWrap,K=j.wrapperWrap,_=j.tooltipLayout,U=j.tooltip,J=j.tooltipIcon;I=24===B&&/^\s+$/.test(I)?null:I;var Q=ut({},j.labelStyle),Z=ut({},j.wrapperStyle),ee=!1;($||q)&&($&&(Q.width="auto"===$?void 0:$,Q.maxWidth="auto"===$?void 0:$),q&&(Z.width="auto"===q?void 0:q,Z.maxWidth="auto"===q?void 0:q)),(B||Y)&&(Q.width||Z.width||(ee=!0));var te=function(e,t){var n=null===t||void 0===t?"ant":t.antPrefixCls;return(null===t||void 0===t?void 0:t.prefixCls)||(e?(n+"-").concat(e):n)}("formily-item",u),ne="popover"===A?r.a.createElement(it.a,{autoAdjustOverflow:!0,placement:"top",content:r.a.createElement("div",{className:f()((t={},t[te+"-"+w+"-help"]=!!w,t[te+"-help"]=!0,t))},pt[w]," ",R),visible:!!R},d):d;return r.a.createElement("div",ut({},function(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(t,n){return n.includes("data-")&&(t[n]=e[n]),t}),{})}(u),{style:ut(ut({},y),{}),className:f()((n={},n[""+te]=!0,n[te+"-layout-"+F]=!0,n[te+"-"+w]=!!w,n[te+"-feedback-has-text"]=!!R,n[te+"-size-"+z]=!!z,n[te+"-feedback-layout-"+A]=!!A,n[te+"-fullness"]=!!N||!!k||!!M,n[te+"-inset"]=!!k,n[te+"-active"]=v,n[te+"-inset-active"]=!!k&&v,n[te+"-label-align-"+W]=!0,n[te+"-control-align-"+H]=!0,n[te+"-label-wrap"]=!!X,n[te+"-control-wrap"]=!!K,n[te+"-bordered-none"]=!1===L||!!k||!!M,n[u.className]=!!u.className,n)),onFocus:function(){(M||k)&&b(!0)},onBlur:function(){(M||k)&&b(!1)},id:s}),function(){var e;return I?r.a.createElement("div",{className:f()((e={},e[te+"-label"]=!0,e[te+"-label-tooltip"]=U&&"text"===_||g,e[te+"-item-col-"+B]=ee&&!!B,e)),style:Q},function(){var e=r.a.createElement("div",{className:f()(te+"-label-content"),ref:h},T&&r.a.createElement("span",{className:f()(te+"-asterisk")},"*"),r.a.createElement("label",{ref:O},I));return"text"===_&&U||g?r.a.createElement(nt.a,{placement:"top",align:{offset:[0,10]},title:g?r.a.createElement("div",null,r.a.createElement("div",null,I),r.a.createElement("div",null,U)):U},e):e}(),function(){if(U&&"icon"===_&&!g)return r.a.createElement("span",{className:f()(te+"-label-tooltip-icon")},r.a.createElement(nt.a,{placement:"top",align:{offset:[0,2]},title:U},J))}()," "!==I&&r.a.createElement("span",{className:f()(te+"-colon")},D?":":"")):null}(),r.a.createElement("div",{className:f()((o={},o[te+"-control"]=!0,o[te+"-item-col-"+Y]=ee&&!!Y&&I,o))},r.a.createElement("div",{className:f()(te+"-control-content")},C&&r.a.createElement("div",{className:f()(te+"-addon-before")},C),r.a.createElement("div",{style:Z,className:f()((i={},i[te+"-control-content-component"]=!0,i[te+"-control-content-component-has-feedback-icon"]=!!M,i))},r.a.createElement(Ze.Provider,{value:void 0},ne),M&&r.a.createElement("div",{className:f()(te+"-feedback-icon")},M)),S&&r.a.createElement("div",{className:f()(te+"-addon-after")},S)),!!R&&"popover"!==A&&"none"!==A&&r.a.createElement("div",{className:f()((l={},l[te+"-"+w+"-help"]=!!w,l[te+"-help"]=!0,l[te+"-help-enter"]=!0,l[te+"-help-enter-active"]=!0,l))},R),P&&r.a.createElement("div",{className:f()(te+"-extra")},P)))},vt=Object(w.c)(mt,Object(w.e)({validateStatus:!0,title:"label",required:!0},(function(e,t){if(Object(T.d)(t))return{extra:e.extra||t.description};if(!t)return e;return{feedbackText:function(){var n=function(e){return e.reduce((function(t,n,o){return n?o<e.length-1?t.concat([n,", "]):t.concat([n]):t}),[])};if(!t.validating)return e.feedbackText?e.feedbackText:t.selfErrors.length?n(t.selfErrors):t.selfWarnings.length?n(t.selfWarnings):t.selfSuccesses.length?n(t.selfSuccesses):void 0}(),extra:e.extra||t.description}}),(function(e,t){var n;return Object(T.d)(t)?e:t?{feedbackStatus:"validating"===t.validateStatus?"pending":(null===(n=t.decorator[1])||void 0===n?void 0:n.feedbackStatus)||t.validateStatus}:e}),(function(e,t){if(Object(T.d)(t))return e;if(!t)return e;var n=!1;return t.required&&"readPretty"!==t.pattern&&(n=!0),"asterisk"in e&&(n=e.asterisk),{asterisk:n}}),(function(e,t){var n={};return t&&(n.id=t.address.entire),n})));vt.BaseItem=mt;var bt=vt,jt=(n(526),n(434),["span","labelCol","wrapperCol","className"]),xt=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(e){return Object(C.a)(this,n),t.call(this,e)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.span,n=e.labelCol,o=e.wrapperCol,i=e.className,a=Object(c.a)(e,jt);return Object(pe.jsx)(Ue.a,{span:t||24,children:Object(pe.jsx)(bt,Object(l.a)({antPrefixCls:"ant",labelCol:n,wrapperCol:o,colon:24!==n,labelAlign:24!==n?"right":"left",className:i},a))})}}]),n}(a.Component),ht=n(229),Ot=n.n(ht),gt=n(231),It=n.n(gt),yt=["fieldInfo"],Ft=["fieldInfo"],Et=["fieldInfo"],Dt=["fieldInfo"],Ct=Ge.a.TextArea,St=a.memo((function(e){var t=e.formDesignPerfixCls,n=e.supInfo,o=(e.mode,e.type),r=n.dndMaskLayerTemplates,l=a.useState(r[o]),c=Object(i.a)(l,2),s=c[0],u=c[1];return a.useEffect((function(){Object(E.k)((function(){s||u(r[o])}))}),[]),Object(pe.jsx)("div",{className:"".concat(t,"-field-mark")})})),Tt=function(e){return a.memo((function(t){var n,o,i,r=t.fieldInfo,l=a.useContext($t),c=l.labelCol,s=l.wrapperCol,u=a.useContext(Lt),d=u.mode,p=u.SuffixFieldDisplay,m=u.SuffixFieldWidth,v=a.useContext(ye),b=v.formDesignPerfixCls,j=v.formDesignId,x=J[j];return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(St,{formDesignPerfixCls:b,supInfo:x,mode:d,type:r.type}),Object(pe.jsx)("div",{style:{flex:"0 0 ".concat(m,"px")},className:"".concat(b,"-field-custom-area"),children:Object(pe.jsx)(p,{fieldInfo:x.recoverField(r),mode:d})}),Object(pe.jsx)(xt,{labelCol:c,wrapperCol:s,label:r.title||" ",asterisk:"EDITABLE"===r["statusInfo>statusType"]&&r.required,extra:r.description,wrapperStyle:{pointerEvents:"none"},style:{marginBottom:"0"},mode:d,children:Object(pe.jsx)(e,{fieldInfo:r,placeholder:r.placeholder,disabled:"EDITABLE"!==r["statusInfo>statusType"],style:r.style||{},className:f()("".concat(b,"-").concat((null===(n=r.type)||void 0===n||null===(o=n.replace("_","-"))||void 0===o||null===(i=o.toLocaleLowerCase)||void 0===i?void 0:i.call(o))||"unknow","-field"),r.className),mode:d})})]})}))},wt={TEXT:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,yt);return Object(pe.jsx)(Ge.a,Object(l.a)({},t))})),TEXTAREA:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Ft);return Object(pe.jsx)(Ct,Object(l.a)({width:"100%"},t))})),DATE:Tt((function(e){return Object(pe.jsx)(ze.a,Object(l.a)({width:"100%",block:!0},e))})),NUMBER:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Et),n=f()("input-number-handler-wrap-contorl",t.className);return Object(pe.jsx)(Ot.a,Object(l.a)(Object(l.a)({},t),{},{className:n}))})),SELECT:Tt((function(e){e.fieldInfo;var t=Object(c.a)(e,Dt);return Object(pe.jsx)(It.a,Object(l.a)({},t))}))},Pt=function(e){var t;t=e,"[object Object]"===Object.prototype.toString.call(t)&&Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],o=t[1];wt[n]=Tt(o)}))},Rt=function(e){var t=e.fieldId,n=a.useContext(Fe).fieldsMap[t],o=a.useMemo((function(){return wt[n.type]}),[n.type]);return Object(pe.jsx)(o,{fieldInfo:n})},Nt=(n(478),["id"]),At=function(){return Object(pe.jsx)("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:"\u8bf7\u4ece\u5de6\u8fb9\u62d6\u5165\u4e00\u4e2a\u7ec4\u4ef6"})},Mt=a.memo((function(e){var t=e.fieldGroupData,n=e.contentFieldId,o=e.selectedFieldId,i=t.length-1;return Object(pe.jsx)(Ne.a,{children:t.map((function(e,t){var a=e.id,r=Object(c.a)(e,Nt);return"boolean"!==typeof r.visible||r.visible?Object(pe.jsx)(Ye,Object(l.a)(Object(l.a)({isFirstField:!t,isLastField:t===i,index:t,contentFieldId:n,fieldId:a,isSelected:o===a},r),{},{children:Object(pe.jsx)(Rt,{fieldId:a})}),a):null}))})})),kt=a.memo((function(e){var t=e.contentFieldId,n=e.fieldGroupData,o=e.selectedFieldId,i=e.customNoData,a=void 0===i?null:i;return Object(pe.jsx)(Ye,{isDropContent:!0,contentFieldId:t,children:null!==n&&void 0!==n&&n.length?Object(pe.jsx)(Mt,{contentFieldId:t,fieldGroupData:n,selectedFieldId:o}):a})})),Vt=function(e){var t=e.contentFieldId,n=e.customNoData,o=a.useContext(Fe),i=o.outerFieldPostions,r=o.nestedFieldPostions,l=o.selectedFieldId,c=t?r[t]:i;return Object(pe.jsx)(kt,{contentFieldId:t,selectedFieldId:l,fieldGroupData:c,customNoData:n})},Lt=a.createContext({mode:"web",SuffixFieldDisplay:function(e){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:84}),$t=a.createContext({labelCol:8,wrapperCol:16}),qt=function(e){var t=a.useContext(ye).formDesignPerfixCls,n=a.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16},e.layout)}),[e.layout]),o=a.useMemo((function(){return Object.assign({},{mode:e.mode||"web",SuffixFieldDisplay:e.SuffixFieldDisplay||function(){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:e.SuffixFieldWidth||84})}),[e.SuffixFieldWidth,e.SuffixFieldDisplay,e.mode]);return a.useEffect((function(){Pt(e.expendFieldSimulate)}),[e.expendFieldSimulate]),Object(pe.jsx)(Lt.Provider,{value:o,children:Object(pe.jsx)($t.Provider,{value:n,children:Object(pe.jsx)("div",{className:"".concat(t,"-simulator-content"),children:Object(pe.jsx)(Vt,{contentFieldId:null,customNoData:e.noData||Object(pe.jsx)(At,{})})})})})},Bt=n(527),Yt=n(482),Wt=n.n(Yt),Gt=function(e){var t=e.title,n=e.supContent,o=void 0===n?function(){return null}:n,i=e.children,r=a.useContext(ye).formDesignPerfixCls;return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"".concat(r,"-form-group-title"),children:[t,Object(pe.jsx)(o,{})]}),Object(pe.jsx)(Wt.a,{children:i})]})},Ht=function(){var e=a.useContext(ye).formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(e,"-side-line")})},zt=n(128),Xt=n.n(zt),Kt=["type","value","onChange","decimal"],_t=["value","onChange","format"],Ut=["type","onBlur","onFocus"],Jt=ze.a.RangePicker,Qt=function(e){return/^\-$/.test(e)?"0":/\.$/.test(e)?e.slice(0,e.length-1):null},Zt=function(e){e.type,e.value;var t=e.onChange,n=e.decimal,o=void 0===n?2:n,r=Object(c.a)(e,Kt),s=a.useState(e.value||[]),u=Object(i.a)(s,2),d=u[0],f=u[1],p=a.useMemo((function(){return new RegExp("^\\-?((0|[1-9][0-9]*)?$|(0|[1-9][0-9]*)(\\.\\d{0,"+o+"})?$)")}),[o]),m=function(e,n){var o=n.target.value,i=function(e,t){var n=Object(D.a)(d);return p.test(t)?(n[e]=t,n):null}(e,o);if(i){var a=Object(D.a)(i);f(i);var r=Qt(o);r&&(a[e]=r),t(a)}},v=function(){var e=Object(i.a)(d,2),n=e[0],o=e[1];n=Qt(n)||n,o=Qt(o)||o,n&&o&&+n>+o&&(f([o,n]),t([o,n]))};return Object(pe.jsxs)("div",{className:"flex",children:[Object(pe.jsx)(Ge.a,Object(l.a)({value:d[0],onChange:m.bind(null,0),onBlur:v},r)),"~",Object(pe.jsx)(Ge.a,Object(l.a)({value:d[1],onChange:m.bind(null,1),onBlur:v},r))]})},en=function(e){var t=e.value,n=e.onChange,o=e.format,r=Object(c.a)(e,_t),s=a.useState(Array.from({length:2},(function(t,n){return e.value[n]&&Xt()(e.value[n])}))),u=Object(i.a)(s,2),d=u[0],f=u[1],p=a.useMemo((function(){var e={YYYY:{type:"rangepicker",picker:"year"},"YYYY-MM":{type:"rangepicker",picker:"month"},"YYYY-MM-DD HH:mm":{type:"rangepicker",showTime:{format:"HH:mm"}},"YYYY-MM-DD HH:mm:ss":{type:"rangepicker",showTime:{format:"HH:mm:ss"}}}[o]||{type:"rangepicker"},i=t.map((function(e){return e&&Xt()(e).format(o)}));return n(i),f(i.map((function(e){return e&&Xt()(e)}))),e}),[o]);return Object(pe.jsx)(Jt,Object(l.a)(Object(l.a)(Object(l.a)({},r),p),{},{block:!0,value:d,isDefinedValue:!0,onCalendarChange:function(e,t){f(e),n(t)}}))},tn=function(e){var t=e.type,n=(e.onBlur,e.onFocus,Object(c.a)(e,Ut)),o=a.useMemo((function(){return["rangepicker"===t?en:Zt]}),[t]),r=Object(i.a)(o,1)[0];return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(r,Object(l.a)({type:t},n))})},nn={number:"\u6570\u503c",percent:"\u767e\u5206\u6bd4",rangepicker:"\u65e5\u671f"},on=function(e){var t=e.value||[],n=Object(i.a)(t,2),o=n[0],a=n[1],r=nn[e.componentProps.type],l=e.componentProps.suffix||"",c="";return o&&!a?c="\u4e0d\u80fd\u4f4e\u4e8e".concat(r,"\u6700\u5c0f\u503c").concat(o).concat(l):!o&&a?c="\u4e0d\u80fd\u8d85\u51fa".concat(r,"\u6700\u5927\u503c").concat(a).concat(l):o&&a&&(c="\u8bf7\u8f93\u5165".concat(o).concat(l,"~").concat(a).concat(l,"\u7684").concat(r)),c},an=n(490),rn=n.n(an),ln=n(486),cn=n.n(ln),sn=["isCompose","checkText","children","options"],un=cn.a.Group,dn=function(e){var t=e.isCompose,n=e.checkText,o=e.children,i=e.options,a=Object(c.a)(e,sn);return t?Object(pe.jsx)(un,Object(l.a)({options:i},a)):Object(pe.jsx)(cn.a,Object(l.a)(Object(l.a)({},a),{},{children:n||o}))},fn=["id"],pn=["correctionNumber"],mn=Ge.a.TextArea,vn=function(e){return"[object Object]"===Object.prototype.toString.call(e)},bn=function(e,t,n,o){var a=t.form,r=n[e.perStatusType||t.initialValue]||[];Object.entries(r).forEach((function(t){var n=Object(i.a)(t,2),o=n[0],r=n[1];r=Array.isArray(r)?r:[r],e[o]=r.reduce((function(e,t){var n=a.getValuesIn(t);return vn(n)?(e=e||{},Object.assign(e,n)):e=n,e}),void 0)})),e.perStatusType=t.value};Object(T.q)({rangeSetterValidateRules:function(e,t,n){var o=e||[],a=Object(i.a)(o,2),r=a[0],l=a[1];return r&&l?"":"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u5b57\u6bb5"}});var jn=a.memo((function(e){var t=a.useContext(Sn);return Object(pe.jsx)(xt,Object(l.a)(Object(l.a)({},t),e))})),xn=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(o.length){var a=o[o.length-1];"function"===typeof a&&(o[o.length-1]=function(t,n){var o,i=null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,t,n);return Object(l.a)(Object(l.a)({},a(i,n)),i)})}else o=[function(t,n){var o;return null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,n.data||{},t)}];return Object(w.c)(t,w.e.apply(void 0,Object(D.a)(o)))},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=xn.bind(null,e);return t&&vn(t)?Object.entries(t).reduce((function(e,t){var o=Object(i.a)(t,2),a=o[0],r=o[1];return e[a]=n(r),e}),{}):{}},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=xn.bind(null,e),o=n(Ge.a),i=n((function(e){var t=e.id,n=Object(c.a)(e,fn);return Object(pe.jsx)("div",{id:t,children:Object(pe.jsx)(It.a,Object(l.a)({},n))})}),(function(e,n){var o=t+"-"+n.address.entire;return{options:n.dataSource,id:o,getPopupContainer:function(){return document.getElementById(o)}}})),a=n((function(e){e.correctionNumber;var t=Object(c.a)(e,pn);return Object(pe.jsx)(Ot.a,Object(l.a)({},t))}),(function(e){var t=e.correctionNumber,n={className:"input-number-handler-wrap-contorl"};return t?Object(l.a)(Object(l.a)({},n),{},{formatter:function(e){return+e-t},parser:function(e){return+e+t}}):n})),r=n(dn,(function(e,t){return e.isCompose&&{options:t.dataSource}})),s=n(rn.a,{value:"checked"},(function(e,t){return e.isCompose?{}:{composeOpts:t.dataSource,checkedOpts:e.value}})),u=n(mn),d=n(tn),f=Object(w.c)(Gt),p=Object(w.c)(Ht);return{Input:o,TextArea:u,Select:i,InputNumber:a,Radio:r,Checkbox:s,FormGroup:f,RangeSetter:d,SideLine:p,FormItem:jn}},gn=(n(491),["expandFields","layout","scope"]),In=["splitDownKeys"],yn=E.i.ref(0),Fn=E.i.ref(0),En=function(e){e.validate().catch((function(e){Object(Bt.a)(document.getElementById(e[0].address),{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"})}))},Dn=function(){return Object(pe.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u7684\u7ec4\u4ef6"})},Cn=a.memo((function(e){var t=e.createSchemaFieldParams,n=e.selectedFieldId,o=e.fieldType,r=e.fieldsMap,l=e.NoData,c=void 0===l?Dn:l,s=e.changeField,u=e.formDesignId,d=r[n]||{},f=J[u],p=a.useState({form:{},selectedFieldId:n}),m=Object(i.a)(p,1)[0],v=function(e,t,n,o){var r=t[e]||{},l=null===r||void 0===r?void 0:r.type,c=a.useState([{type:"object",properties:{}},null]),s=Object(i.a)(c,2),u=s[0],d=s[1],f=a.useState({selectedFieldId:null}),p=Object(i.a)(f,1)[0],m=a.useCallback((function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!p.selectedFieldId||!t[p.selectedFieldId])return{type:"object",properties:{}};var i=n.recoverField(p.formAction.values);return z(n.fieldSetterTemplate[e],(function(e,t,a){if(t.type||t["x-component"]){var r;o.push(a.concat(e).toString());var l={componentProps:t["x-component-props"],enum:t.enum,visible:t["x-visible"]},c=null===(r=n.manualContorlSchema)||void 0===r?void 0:r.call(n,e,l,i);c&&c!==l&&(c.enum&&Array.isArray(c.enum)&&(t.enum=c.enum),c.componentProps&&(t["x-component-props"]=c.componentProps),"boolean"===typeof c.visible&&(t["x-visible"]=c.visible))}}))}),[]),v=a.useCallback((function(e,t){return Object(T.b)({initialValues:e,validateFirst:!0,effects:function(){Object(T.p)((function(e){t.validateWithScrollSign.value===p.selectedFieldId&&(t.validateWithScrollSign.value="",En(e))})),Object(T.g)("*",(function(e){var n;null===(n=t.onFieldChange)||void 0===n||n.call(t,e.props.name,e.value)})),Object(T.o)((function(e){o(p.selectedFieldId,e.values)}))}})}),[o]);return a.useEffect((function(){n&&Object(E.k)((function(){return n.resetSetterPaneSchema.value}),(function(){var e=[],t=m(p.type,p.supInfo,e);p.formAction.setFormState((function(n){e.forEach((function(e){delete n.fields[e]})),d([t,p.formAction])}))}),{fireImmediately:!1})}),[n]),a.useEffect((function(){if(n){p.selectedFieldId=e,p.type=l,p.supInfo=n;var t=v(r,n);p.formAction=t;var o=m(l,n);d([o,t])}}),[e,l,n]),u}(n,r,f,s),b=Object(i.a)(v,2),j=b[0],x=b[1],h=a.useMemo((function(){return Object.assign(t.scope,function(e){var t={};return{rangeSetterEeactRangeErrorMsg:on,statusTypeChangeEffect:bn.bind(null,t),statusInfo:t}}()),t.scope.$published=d.published||!1,Object(w.d)(t)}),[t,j]);return a.useEffect((function(){m.form=x,m.selectedFieldId=n}),[x]),a.useEffect((function(){f&&(Object(E.k)((function(){return f.validateWithScrollSign.value}),(function(e){e===m.selectedFieldId&&(f.validateWithScrollSign.value="",En(m.form))})),Object(E.k)((function(){return f.resetSetterPaneValue.value}),(function(e,t){var n;null!==(n=m.form)&&void 0!==n&&n.id&&m.form.setValues(r[m.selectedFieldId],"overwrite")}),{fireImmediately:!1}))}),[f]),Object(pe.jsx)(pe.Fragment,{children:o&&x?Object(pe.jsx)(w.a,{form:x,children:Object(pe.jsx)(h,{schema:j})}):Object(pe.jsx)(c,{})})}),(function(e,t){return e.selectedFieldId===t.selectedFieldId&&e.fieldType===t.fieldType&&e.changeField===t.changeField&&e.createSchemaFieldParams===t.createSchemaFieldParams})),Sn=a.createContext({labelCol:8,wrapperCol:16,span:24}),Tn=function(e){var t,n=e.expandFields,o=void 0===n?{}:n,i=e.layout,r=void 0===i?{}:i,u=e.scope,d=Object(c.a)(e,gn),f=a.useContext(ye).formDesignPerfixCls,p=a.useContext(Fe),m=p.selectedFieldId,v=p.fieldsMap,b=p.formDesignId,j=p.changeField,x=J[b],h=a.useMemo((function(){var e={components:Object(l.a)(Object(l.a)({},On(x,f)),hn(x,o)),scope:{typeEffect:function(e){var t,n=e.value,o=e.form.values||{},i=x.fieldKey,a=o.title,r=o.description,u=o.placeholder,d=o.id,f=o.parId,p=(x.fieldInfoTemplate||{})[n],m=(p.splitDownKeys,Object(c.a)(p,In)),v=Object(l.a)(Object(l.a)(Object(l.a)({},{}),m),{},(t={title:a,description:r},Object(s.a)(t,i,o[i]),Object(s.a)(t,"placeholder",u),Object(s.a)(t,"id",d),Object(s.a)(t,"parId",f),t));j("",v,!0)},customScope:u}};return J.changeSupInfo(b,{createSchemaFieldParams:e,resetSetterPaneSchema:yn,resetSetterPaneValue:Fn}),e}),[o,u,x]);a.useEffect((function(){Object(T.q)({customFieldsRules:function(e,t,n){var o,i,a,r=null===(o=x.recoverField)||void 0===o?void 0:o.call(x,n.form.values);return null===(i=x.customFieldsRules)||void 0===i?void 0:i.call(x,r,null===n||void 0===n||null===(a=n.props)||void 0===a?void 0:a.name,e)}})}),[x]);var O=a.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16,span:24},r)}),[r]),g=null===(t=v[m||""])||void 0===t?void 0:t.type;return Object(pe.jsx)(Sn.Provider,{value:O,children:Object(pe.jsx)(Cn,Object(l.a)(Object(l.a)({},d),{},{formDesignId:b,selectedFieldId:m||"",fieldsMap:v,fieldType:g,createSchemaFieldParams:h,changeField:j}))})},wn=n(531),Pn=n(521),Rn=n(530),Nn={position:"fixed",pointerEvents:"none",zIndex:-1,left:0,top:0,height:"0px",visibility:"hidden"};var An=function(e){var t=e.formDesignId,n=e.fieldsMap,o=e.formDesignPerfixCls,a=J[t]||{},c=a.dndMaskLayerTemplates,s=a.CoustomPerView,u=Object(Rn.a)((function(e){return{dragItem:e.getItem(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}})),d=u.isDragging,f=u.dragItem,p=u.currentOffset,m=u.clientOffset,v=r.a.useMemo((function(){if(null!==f&&void 0!==f&&f.id){var e=n[f.id],t=e.type,o=e.title,i=c[t]||{},a=i.id,r=i.iconClass,s=Object(l.a)(Object(l.a)({},f),{},{uniquelySign:t,fieldName:o,iconClass:r});return[Object(l.a)(Object(l.a)({},s),{},{dragId:a}),s]}if(null!==f&&void 0!==f&&f.uniquelySign){var u=c[null===f||void 0===f?void 0:f.uniquelySign],d=u.iconClass,p=u.id,m=u.name,v=Object(l.a)(Object(l.a)({},f),{},{iconClass:d,fieldName:m});return[Object(l.a)(Object(l.a)({},v),{},{dragId:p}),v]}return[f,f]}),[f,n,c]),b=Object(i.a)(v,2),j=b[0],x=b[1],h=r.a.useState({contentHeight:40,contentWidth:0}),O=Object(i.a)(h,1)[0];r.a.useEffect((function(){if(j){var e,t,n=j.dragId||(null===(e=Object.values(c)[0])||void 0===e?void 0:e.id),o=null===(t=document.getElementById(n))||void 0===t?void 0:t.offsetWidth;O.contentWidth=o||200}}),[j]);var g=function(e,t,n,o){if(n.contentHeight,n.contentWidth,!e||!t)return{};var i=e.x,a=e.y,r=t.x,l=t.y,c={background:"#fff",position:"relative",left:"".concat(i,"px"),top:"".concat(a,"px")};return o&&Object.assign(c,{transform:"translate(-50%, -50%)",left:"".concat(r,"px"),top:"".concat(l,"px")}),c}(p,m,O,null===j||void 0===j?void 0:j.id);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("div",{style:d&&null!==j&&void 0!==j&&j.uniquelySign?Object(l.a)(Object(l.a)({},Nn),{},{zIndex:999,visibility:"visible"}):Nn,children:Object(pe.jsx)("div",{style:g,children:s?Object(pe.jsx)(s,Object(l.a)({},x)):Object(pe.jsx)("div",{className:"".concat(o,"-drag-perview"),style:{width:O.contentWidth,height:O.contentHeight},children:Object(pe.jsx)("div",{className:"".concat(o,"-single-widget-text"),children:null===j||void 0===j?void 0:j.fieldName})})})}),Object(pe.jsx)("div",{id:"".concat(o,"-faker-perview"),style:{position:"fixed",top:"-1000px"},children:"\xa0"})]})},Mn=(n(492),a.forwardRef((function(e,t){var n=a.useContext(ye),o=a.useContext(Fe),r=a.useContext(Ee),l=a.useMemo((function(){var e;return null===(e=J[o.formDesignId])||void 0===e?void 0:e.mounted}),[o.formDesignId]);return a.useImperativeHandle(t,(function(){var e=J[o.formDesignId]||{},t=e.recoverField,n=e.resetSetterPaneSchema,a=e.resetSetterPaneValue,l=function(t){var n="";return t.catch((function(e){var t=Object.entries(e[0]),o=Object(i.a)(t,1),a=Object(i.a)(o[0],1)[0];throw n=a,e})).finally((function(){var t;n&&(null===(t=r.selectField)||void 0===t||t.call(r,n),e.validateWithScrollSign.value=n)}))};return{validate:function(){return l(_(o,e))},submit:function(){return l(function(e,t){return _(e,t,!0).then((function(n){var o=e.outerFieldPostions,i=e.nestedFieldPostions;return function e(o){return o.reduce((function(o,a){var r=a.id,l=a.visible?t.recoverField(n[r]):n[r];return i[r]&&(l.items=e(i[r])),o.push(l),o}),[])}(o)}))}(o,e))},getFieldsMap:K.bind(null,o,t),setSelectFieldId:r.selectField,getSelectFieldId:function(){return o.selectedFieldId},getSelectField:function(){return t(o.fieldsMap[o.selectedFieldId||""])},deleteField:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[e,null,null];if("string"===typeof e){var i,a=(null===(i=o.fieldsMap[e])||void 0===i?void 0:i.parId)||null;n[1]=a}return r.deleteField.apply(r,n.concat([null,t]))},addField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.selectedFieldId,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={type:p,uniquelySign:e},a=o.fieldsMap[t||""],l={contentFieldId:null,dropIndex:null,id:"",type:"BASE"};if(a){var c=a.parId,s=c?o.nestedFieldPostions[c]||[]:o.outerFieldPostions,u=s.findIndex((function(e){return e.id===t}));l={contentFieldId:c,dropIndex:u=u>-1?u+1:s.length,id:t,type:"BASE"}}return r.placeField(l,i,n)},changeFieldInfo:function(t,n,i){if(t){var r,l=o.outerFieldPostions,c=o.nestedFieldPostions,s=null===(r=o.fieldsMap[t])||void 0===r?void 0:r.parId;n=((s?c[s]:l).filter((function(e){return e.id===t}))[0]||{}).visible?e.transformField(n):n}o.changeField(t,n,i||!1),t&&t!==o.selectedFieldId||(a.value=a.value+1)},resetSetterPane:function(){a.value=a.value+1,n.value=n.value+1}}}),[o,r]),Object(pe.jsxs)(wn.a,{backend:Pn.a,children:[Object(pe.jsx)("div",{className:f()(n.formDesignPerfixCls,e.className),style:e.style,children:l&&e.children}),Object(pe.jsx)(An,{formDesignPerfixCls:n.formDesignPerfixCls,formDesignId:o.formDesignId,fieldsMap:o.fieldsMap})]})}))),kn=De(a.memo(Mn)),Vn=n(535),Ln=n(534),$n=n(537),qn=r.a.createContext({}),Bn=r.a.createContext({}),Yn=n(542),Wn=Object(Yn.a)({scriptUrl:"//at.alicdn.com/t/font_3381042_lt1lqf512ec.js"}),Gn=n(540),Hn=n(129),zn=["children","sign"],Xn=r.a.memo((function(e){var t=e.onChange,n=e.dataSource,o=e.size,a=e.buttonSize,s=r.a.useState(0),u=Object(i.a)(s,2),d=u[0],f=u[1],p=function(e,n,o){o.stopPropagation(),f(e),null===t||void 0===t||t(n)};return Object(pe.jsx)(Gn.b,{size:o||0,children:n.map((function(e,t){var n=e.children,o=e.sign,i=Object(c.a)(e,zn);return Object(pe.jsx)(Hn.a,Object(l.a)(Object(l.a)({size:a},i),{},{style:t===d?{cursor:"default"}:{},disabled:t===d,onClick:p.bind(null,t,o),children:n}),o)}))})})),Kn=[{children:Object(pe.jsx)(Wn,{type:"icon-design"}),sign:"design"},{children:Object(pe.jsx)(Wn,{type:"icon-json"}),sign:"json"},{children:Object(pe.jsx)(Wn,{type:"icon-yunhang"}),sign:"run"}],_n=function(e){var t=e.onChange,n=r.a.useContext(qn).prefix;return Object(pe.jsx)("div",{className:"flex ".concat(n,"-content-header"),children:Object(pe.jsx)(Xn,{buttonSize:"small",dataSource:Kn,onChange:t})})},Un=n(80),Jn=["type","description","title","statusInfo","valueRule"],Qn={TEXT:{type:"string","x-decorator":"FormItem","x-component":"Input"},TEXTAREA:{type:"string","x-decorator":"FormItem","x-component":"Input.TextArea"},DATE:{type:"string","x-decorator":"FormItem","x-component":"DatePicker"},NUMBER:{type:"string","x-decorator":"FormItem","x-component":"NumberPicker"},SELECT:{type:"string","x-decorator":"FormItem","x-component":"Select"}},Zn={DATE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1980-01-01",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"9999-01-01",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u8bf7\u5927\u4e8e\u6700\u5c0f\u503c",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\u8bf7\u5c0f\u4e8e\u6700\u5927\u503c";return function(i){return i?+new Date(i)>=+new Date(t)?o:+new Date(i)<=+new Date(e)?n:void 0:""}}},eo=Object(S.a)((function e(){Object(C.a)(this,e)}));eo.initData=function(e){var t=e.type,n=e.description,o=e.title,a=e.statusInfo,r=e.valueRule,l=Object(c.a)(e,Jn);if(!Qn[t])throw new Error("".concat(t," \u7c7b\u578b\u4e0d\u5b58\u5728"));var s=function(e){switch(e.statusType){case"EDITABLE":return{editable:!0};case"READONLY":return{editable:!1};case"HIDDEN":return{visible:!1}}}(a),u=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=["DATE"].includes(t);return Object.entries(e).reduce((function(o,a){var r=Object(i.a)(a,2),l=r[0],c=r[1];return["minLength","maxLength","minimum","maximum"].includes(l)?o[l]=Number(c):"required"===l&&c?o["x-validator"].push({required:c,message:e.requiredErrorMsg}):"range"===l&&c&&n&&o["x-validator"].push(Zn[t](e.minDate,e.maxDate)),o}),{"x-validator":[]})}(r,{type:t});return Object.assign({title:o,description:n},Qn[t],{status:s},u,{"x-component-props":l})};var to=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(e){var o;Object(C.a)(this,n),o=t.call(this);var i=n.initData(e);return Object.assign(Object(Un.a)(o),i),o}return Object(S.a)(n)}(eo),no=["id"],oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=e.reduce((function(e,n){try{var o=n.id,i=Object(c.a)(n,no),a=new to(i);a=t(a),e[o]=a}catch(r){console.error(r)}return e}),{});return{type:"object",properties:n}},io=n(520),ao=Object(w.d)({components:{FormItem:io.b,Input:io.c,Select:io.e,DatePicker:io.a,NumberPicker:io.d}}),ro=Object(T.b)(),lo=function(e){var t=e.schema;return Object(pe.jsx)(w.a,{form:ro,children:Object(pe.jsx)(ao,{schema:t})})},co=n(533),so=n(536),uo=n(541),fo=n(99),po=Symbol(),mo=function(e){return e.reduce((function(e,t){var n=Object(i.a)(t,2),o=n[0],a=n[1];return o&&(e[o]=a),e}),{})},vo=r.a.forwardRef((function(e,t){var n=e.data,o=e.prefix,l=e.onChange,c=r.a.useMemo((function(){return Object.entries(n||{})}),[n]),s=Object(a.useState)({length:c.length}),u=Object(i.a)(s,2),d=u[0],f=u[1],p=r.a.useMemo((function(){return(null===n||void 0===n?void 0:n.value)||Math.random().toString(36).slice(-8)}),[n]);r.a.useImperativeHandle(t,(function(){return{addParams:function(){c.push([]),f({length:d.length+1})},submit:function(){return mo(c)}}}),[d]),r.a.useEffect((function(){return f({length:c.length}),function(){l(mo(c))}}),[n]);var m=function(e,t){c[e][0]=t.target.value},v=function(e,t){"label"===c[e][0]&&(e===c.findIndex((function(e){return"label"===Object(i.a)(e,1)[0]}))&&(n.label=t.target.value));c[e][1]=t.target.value},b=function(e,t){t.stopPropagation(),c.splice(e,1),f({length:c.length})};return c.length?Object(pe.jsx)("div",{children:Array.from(d).map((function(e,t){var n=Object(i.a)(c[t],2),a=n[0],r=n[1];return Object(pe.jsxs)("div",{className:"".concat(o,"-params-setter"),children:[Object(pe.jsxs)("div",{children:["\u952e\u540d\uff1a",Object(pe.jsx)(Ln.a,{defaultValue:a,onChange:m.bind(null,t)})]}),Object(pe.jsxs)("div",{children:["\u952e\u503c\uff1a",Object(pe.jsx)(Ln.a,{defaultValue:r,onChange:v.bind(null,t)})]}),Object(pe.jsx)("span",{onClick:b.bind(null,t),children:Object(pe.jsx)(Ve.a,{})})]},p+t)}))}):Object(pe.jsx)("span",{children:"\u8bf7\u5148\u9009\u62e9\u5de6\u4fa7\u6811\u8282\u70b9"})})),bo=function(e){var t=e.title,n=e.addBtnText,o=e.className,i=e.prefix,a=e.children,r=e.addItem,l=void 0===r?function(){}:r;return Object(pe.jsxs)("div",{className:f()("".concat(i,"-common"),o),children:[Object(pe.jsxs)("div",{className:"".concat(i,"-common-header"),children:[Object(pe.jsx)("span",{children:t}),Object(pe.jsx)(Hn.a,{type:"text",onClick:l,children:n})]}),Object(pe.jsx)("div",{className:"".concat(i,"-common-content"),children:a})]})},jo={title:"\u53ef\u9009\u9879\u8282\u70b9\u6811",addBtnText:Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(uo.a,{}),"\u65b0\u589e\u8282\u70b9"]})},xo={title:"\u8282\u70b9\u5c5e\u6027",addBtnText:Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(uo.a,{}),"\u589e\u52a0\u952e\u503c\u5bf9"]})},ho=r.a.forwardRef((function(e,t){var n=e.originData,o=r.a.useContext(qn).prefix,c="".concat(o,"-data-source-setter-layout"),u=Object(a.useState)(n),d=Object(i.a)(u,2),f=d[0],p=d[1],m=r.a.useMemo((function(){return n.reduce((function(e,t){return e[t[po]]=t,e}),{})}),[n]),v=Object(a.useState)(null),b=Object(i.a)(v,2),j=b[0],x=b[1],h=r.a.useRef(null);r.a.useImperativeHandle(t,(function(){return{submit:function(){return j&&(m[j]=h.current.submit()),Object.values(m).map((function(e){return Object(l.a)({},e)}))}}}),[j]);var O=function(e,t){t.stopPropagation(),p(f.filter((function(t){return t.key!==e}))),delete m[e]};return Object(pe.jsxs)("div",{className:"flex ".concat(c),children:[Object(pe.jsx)(bo,Object(l.a)(Object(l.a)({},jo),{},{className:"".concat(c,"-left"),prefix:"".concat(c),addItem:function(){var e="".concat(Math.random().toString(36).slice(-8)),t="\u9009\u9879".concat(f.length+1),n=Object(s.a)({label:t},po,e);m[e]=Object(E.i)({label:t,value:e}),p([].concat(Object(D.a)(f),[n]))},children:Object(pe.jsx)(co.a,{fieldNames:{title:"label",key:po},treeData:f,blockNode:!0,showLine:{showLeafIcon:!1},draggable:!0,onDrop:function(e){var t=e.dragNode,n=e.dropPosition,o=+t.pos.split("-")[1],i=f[o],a=f.reduce((function(e,t,a){return a===o||(a+1===n?e.push(t,i):e.push(t)),e}),[]);n<0&&a.unshift(i),p(a)},titleRender:function(e){return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)("div",{className:"flex ".concat(c,"-tree-node"),children:[Object(pe.jsx)(fo.a,{children:function(){var t;return Object(pe.jsx)("span",{children:(null===(t=m[e[po]])||void 0===t?void 0:t.label)||"\u9ed8\u8ba4\u6807\u9898"})}}),Object(pe.jsx)("span",{onClick:O.bind(null,e[po]),className:"tree-node-delete-handler",children:Object(pe.jsx)(Ve.a,{})})]})})},onSelect:function(e,t){x(e[0])}})})),Object(pe.jsx)(bo,Object(l.a)(Object(l.a)({},xo),{},{className:"".concat(c,"-right"),prefix:"".concat(c),addItem:function(){var e;null===(e=h.current)||void 0===e||e.addParams()},children:Object(pe.jsx)(vo,{ref:h,data:m[j],prefix:c,onChange:function(e){j&&(m[j]=Object(E.i)(e))}})}))]})})),Oo=function(e){var t=e.text,n=r.a.useState(!1),o=Object(i.a)(n,2),a=o[0],c=o[1],u=r.a.useMemo((function(){return(e.value||[]).map((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},po,Math.random().toString(36).slice(-8)))}))}),[e.value]),d=r.a.useRef(null);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Hn.a,{onClick:function(e){e.stopPropagation(),c(!0)},children:t}),Object(pe.jsx)(so.a,{visible:a,onCancel:c.bind(null,!1),title:t,width:800,destroyOnClose:!0,onOk:function(){var t=d.current.submit();e.onChange(t),c(!1)},children:Object(pe.jsx)(ho,{originData:u,ref:d})})]})},go=Vn.a.Content,Io=Vn.a.Sider,yo=Ln.a.TextArea,Fo={CustomDataSourceSetter:Ln.a,ModalContorl:Oo,NonEditableInfoSetter:function(e){return Object(pe.jsx)($n.a,Object(l.a)({options:[{key:"1",value:"1"},{key:"2",value:"2"}]},e))}},Eo=function(e){var t=e.dataSource;return Object(pe.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"8px 16px"},children:t.map((function(e){return Object(pe.jsx)(Pe,{uniquelySign:e.uniquelySign,info:e,style:{marginBottom:"8px"}},e.uniquelySign)}))})},Do=function(e){var t=e.json,n=r.a.useMemo((function(){return oo(t)}),[t]);return Object(pe.jsx)("div",{style:{width:800,margin:"0 auto"},children:Object(pe.jsx)(lo,{schema:n})})},Co=function(e){var t=function e(t){if(Array.isArray(t))return t.map(e);if("object"===typeof t){var n={};for(var o in t)n[o]=e(t[o]);return n}return"function"===typeof t?t.toString():t};for(var n in e)e[n]=t(e[n]);return e},So=function(e){var t=e.prefix,n=e.json,o=r.a.useState(n),a=Object(i.a)(o,2),l=a[0],c=a[1],s=r.a.useCallback((function(e){if("origin"===e)c(n);else{var t=oo(n,Co);c(t)}}),[]);return Object(pe.jsxs)("div",{className:"".concat(t,"-json-show"),children:[Object(pe.jsx)($n.a,{style:{width:200},defaultValue:"origin",options:[{label:"\u539f\u59cb\u6570\u636e",value:"origin"},{label:"schema\u683c\u5f0f",value:"schema"}],onChange:s}),Object(pe.jsx)(yo,{className:"".concat(t,"-json-show-main"),value:JSON.stringify(l,void 0,"\t"),bordered:!1,autoSize:!0})]})},To=function(e,t){switch(t.type){case"design":return Object(l.a)(Object(l.a)({},e),{},{selectId:t.type});case"json":case"run":return Object(l.a)(Object(l.a)({},e),{},{selectId:t.type,json:t.json});default:return e}},wo={selectId:"design",json:{}},Po=function(e){var t=e.dataSource,n=r.a.useContext(Bn).formDesignRef,o=r.a.useContext(qn).prefix,a=r.a.useReducer(To,Object(l.a)({},wo)),c=Object(i.a)(a,2),s=c[0],u=s.selectId,d=s.json,f=c[1],p=r.a.useCallback((function(e){var t=["json","run"].includes(e)?n.current.submit().then((function(e){return{json:e}})):Promise.resolve();t.then((function(t){f(Object(l.a)({type:e},t))}))}),[]);return Object(pe.jsxs)(Vn.a,{style:{height:"100%"},children:[Object(pe.jsx)(Io,{theme:"light",width:300,children:Object(pe.jsx)(Eo,{dataSource:t})}),Object(pe.jsxs)(go,{className:"flex ".concat(o,"-content-main"),children:[Object(pe.jsx)(_n,{onChange:p}),Object(pe.jsxs)("div",{className:"".concat(o,"-operation-content"),children:["design"===u&&Object(pe.jsx)(qt,{}),"json"===u&&Object(pe.jsx)(So,{prefix:o,json:d}),"run"===u&&Object(pe.jsx)(Do,{prefix:o,json:d})]})]}),"design"===u&&Object(pe.jsx)(Io,{theme:"light",width:360,style:{padding:"8px 16px",height:"100%",overflow:"overlay"},children:Object(pe.jsx)(Tn,{expandFields:Fo})})]})},Ro=(n(514),[{TEXT:n(515)},{TEXTAREA:n(516)},{DATE:n(517)},{NUMBER:n(518)},{SELECT:n(519)}]),No=[{name:"\u6587\u672c",uniquelySign:"TEXT"},{name:"\u6587\u672c\u57df",uniquelySign:"TEXTAREA"},{name:"\u65e5\u671f",uniquelySign:"DATE"},{name:"\u6570\u503c",uniquelySign:"NUMBER"},{name:"\u9009\u62e9",uniquelySign:"SELECT"}],Ao=function(){var e=a.useRef({}),t=a.useState([]),n=Object(i.a)(t,2),o=n[0],r=(n[1],a.useState([])),l=Object(i.a)(r,2),c=l[0],s=l[1];return a.useEffect((function(){return s(Ro),function(){s([])}}),[]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(Vn.a,{style:{height:"100%",borderBottom:"1px solid #d9d9d9"},children:Object(pe.jsx)(Bn.Provider,{value:{formDesignRef:e},children:Object(pe.jsx)(kn,{templates:c,style:{flex:1,overflow:"hidden"},ref:e,formVo:o,children:Object(pe.jsx)(Po,{dataSource:No})})})})})},Mo={prefix:"custom-form"};t.default=function(){return Object(pe.jsx)(qn.Provider,{value:Mo,children:Object(pe.jsx)(Ao,{})})}}}]);
//# sourceMappingURL=4.3cf2da74.chunk.js.map