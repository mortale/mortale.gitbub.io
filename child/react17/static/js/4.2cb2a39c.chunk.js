(this["webpackJsonpchild-react17"]=this["webpackJsonpchild-react17"]||[]).push([[4],{371:function(e,t,n){},415:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},430:function(e,t,n){},431:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c","x-component-props":{"maxLength":20},"x-validator":{"required":true,"customFieldsRules":true}},"inheritCode":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}","x-component-props":{"disabled":true}},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","initialValue":"\u6587\u672c\u957f\u5ea6\u53ef\u5b9a\u4e49","x-component-props":{"maxLength":100,"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXT","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"RADIO","label":"\u5355\u9879"}]},"tips":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"20"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","initialValue":"EDITABLE","x-component-props":{"isCompose":true},"enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'required\']}}"}}}}}')},432:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6587\u672c\u57df","x-validator":{"required":true,"customFieldsRules":true}},"inheritCode":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}","x-component-props":{"disabled":true}},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","initialValue":"\u6587\u672c\u957f\u5ea6\u53ef\u5b9a\u4e49","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"TEXTAREA","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"RADIO","label":"\u5355\u9879"}]},"tips":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"valueRule>maxLength":{"title":"\u5b57\u6bb5\u957f\u5ea6","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"100"}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'required\']}}"}}}}}')},433:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u65e5\u671f","x-validator":{"required":true,"customFieldsRules":true}},"inheritCode":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}","x-component-props":{"disabled":true}},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","initialValue":"\u5e74\u3001\u6708\u3001\u65e5\u53ef\u5b9a\u4e49\uff0c\u65e5\u671f\u533a\u95f4\u53ef\u5b9a\u4e49","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"DATE","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"RADIO","label":"\u5355\u9879"}]},"tips":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u9009\u62e9\u65e5\u671f","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}},"format":{"title":"\u65e5\u671f\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","initialValue":"YYYY-MM-DD","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"target":"[valueRule>minDate,valueRule>maxDate]","fulfill":{"state":{"component[1].format":"{{$self.value}}"}}},"enum":[{"value":"YYYY","label":"\u5e74"},{"value":"YYYY-MM","label":"\u5e74-\u6708"},{"value":"YYYY-MM-DD","label":"\u5e74-\u6708-\u65e5"},{"value":"YYYY-MM-DD HH:mm","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206"},{"value":"YYYY-MM-DD HH:mm:ss","label":"\u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2"}]}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minDate,valueRule>maxDate]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","initialValue":["1980","9999"],"x-component-props":{"type":"rangepicker"},"x-hidden":"{{!$values[\'valueRule>range\']}}","x-validator":[{"rangeSetterValidateRules":true}]},"voidSideLine1":{"type":"void","x-component":"SideLine"},"valueRule>formatErrorMsg":{"title":"\u683c\u5f0f\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u683c\u5f0f\u4e0d\u6b63\u786e"}}}}}')},434:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u6570\u503c","x-validator":{"required":true,"customFieldsRules":true}},"inheritCode":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}","x-component-props":{"disabled":true}},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","initialValue":"\u5c0f\u6570\u4f4d\u53ef\u5b9a\u4e49\uff0c\u4e0a\u4e0b\u9650\u53ef\u5b9a\u4e49","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"NUMBER","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"RADIO","label":"\u5355\u9879"}]},"tips":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165\u6570\u503c","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}],"x-reactions":{"fulfill":{"run":"statusTypeChangeEffect($self,{\'READONLY\':{\'nonEditableInfo\':\'statusInfo>readonlyInfo\'},\'HIDDEN\':{\'nonEditableInfo\':\'statusInfo>hiddenInfo\'}})"}},"x-validator":{"customFieldsRules":true}},"statusInfo>readonlyInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'READONLY\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'READONLY\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}},"statusInfo>hiddenInfo":{"title":"\u9ed8\u8ba4\u503c","x-decorator":"FormItem","x-component":"NonEditableInfoSetter","x-visible":"{{$values[\'statusInfo>statusType\'] === \'HIDDEN\'}}","x-validator":{"customFieldsRules":true},"x-reactions":{"dependencies":["statusInfo>statusType"],"when":"{{!$self.visible && $deps[0] === \'HIDDEN\'}}","fulfill":{"run":"$self.setValue(statusInfo.nonEditableInfo),$form.notify(\'onFormInputChange\')"}}}}},"carryRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u8fdb\u4f4d\u89c4\u5219"},"properties":{"roundingInfo>type":{"title":"\u5706\u6574\u65b9\u5f0f","x-decorator":"FormItem","x-component":"Select","x-component-props":{"placeholder":"\u8bf7\u9009\u62e9"},"initialValue":"ROUND","enum":[{"label":"\u5411\u4e0a\u5706\u6574\u5c0f\u6570\u4f4d","value":"CEIL"},{"label":"\u5411\u4e0b\u5706\u6574\u5c0f\u6570\u4f4d","value":"FLOOR"},{"label":"\u56db\u820d\u4e94\u5165\u5c0f\u6570\u4f4d","value":"ROUND"},{"label":"\u53ea\u53d6\u6574\u6570","value":"INTEGER"}]},"valueRule>decimal":{"title":"\u5c0f\u6570\u4f4d","x-decorator":"FormItem","x-component":"InputNumber","initialValue":2,"x-visible":"{{$values[\'roundingInfo>type\']!==\'INTEGER\'}}","x-component-props":{"width":"100%","min":0,"max":20}},"example":{"title":"\u793a\u4f8b","x-decorator":"FormItem","x-component":"Input","x-component-props":{"disabled":true,"style":{"textAlign":"right"}},"x-reactions":{"dependencies":["valueRule>decimal"],"fulfill":{"state":{"value":"{{\'9999\'+($deps[0] && $deps[0]!=0?\\".\\"+Array.from({length:$deps[0]},function(){return 9}).join(\\"\\"):\\"\\")}}"}}}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"required":{"title":"\u5fc5\u586b","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'required\']}}"},"voidSideLine0":{"type":"void","x-component":"SideLine","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}"},"valueRule>range":{"title":"\u586b\u5199\u8303\u56f4","x-decorator":"FormItem","x-component":"Checkbox","initialValue":false},"[valueRule>minValue,valueRule>maxValue]":{"title":" ","x-decorator":"FormItem","x-component":"RangeSetter","x-visible":"{{!!$values[\'valueRule>range\']}}","initialValue":["0","100"],"x-component-props":{"type":"number","placeholder":"\u4e0d\u9650"},"x-validator":[{"rangeSetterValidateRules":true}],"x-reactions":{"dependencies":["valueRule>decimal"],"fulfill":{"state":{"component[1].decimal":"{{$deps[0]}}"}}}},"voidSideLine1":{"type":"void","x-component":"SideLine"},"valueRule>formatErrorMsg":{"title":"\u683c\u5f0f\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u586b\u5199\u5408\u6cd5\u6570\u503c"}}}}}')},435:function(e){e.exports=JSON.parse('{"type":"object","properties":{"basicGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u57fa\u672c\u8bbe\u7f6e"},"properties":{"title":{"title":"\u5b57\u6bb5\u540d\u79f0","x-decorator":"FormItem","x-component":"Input","initialValue":"\u5355\u9009","x-validator":{"required":true,"customFieldsRules":true}},"inheritCode":{"title":"\u5b57\u6bb5\u7f16\u7801","required":true,"x-decorator":"FormItem","x-component":"Input","x-visible":"{{!!$self.value}}","x-component-props":{"disabled":true}},"description":{"title":"\u63cf\u8ff0","x-decorator":"FormItem","x-component":"TextArea","initialValue":"\u5173\u8054\u9009\u9879\u53ef\u5b9a\u4e49","x-component-props":{"placeholder":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26","autoSize":{"minRows":2,"maxRows":6},"width":"100%"},"x-validator":{"max":100,"message":"\u4e0d\u8d85\u8fc7100\u4e2a\u5b57\u7b26"}},"type":{"title":"\u5b57\u6bb5\u7c7b\u578b","required":true,"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{$published}}","x-data":{"contorlTrigger":"onChange"},"x-reactions":{"effects":["onFieldInputValueChange"],"fulfill":{"run":"typeEffect($self)"}},"initialValue":"RADIO","enum":[{"value":"TEXT","label":"\u6587\u672c"},{"value":"TEXTAREA","label":"\u6587\u672c\u57df"},{"value":"NUMBER","label":"\u6570\u503c"},{"value":"DATE","label":"\u65e5\u671f"},{"value":"RADIO","label":"\u5355\u9879"}]},"tips":{"title":"\u8f93\u5165\u63d0\u793a","x-decorator":"FormItem","x-component":"Input","initialValue":"\u8bf7\u8f93\u5165","x-component-props":{"placeholder":"\u8bf7\u8f93\u5165"}}}},"statusGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u72b6\u6001"},"properties":{"statusInfo>statusType":{"title":"\u5b57\u6bb5\u72b6\u6001","x-decorator":"FormItem","x-component":"Radio","x-component-props":{"isCompose":true},"initialValue":"EDITABLE","enum":[{"label":"\u666e\u901a","value":"EDITABLE"},{"label":"\u53ea\u8bfb","value":"READONLY"},{"label":"\u9690\u85cf","value":"HIDDEN"}]}}},"associateSetterGroup":{"type":"void","x-component":"FormGroup","x-component-props":{"title":"\u5173\u8054\u8bcd\u5178\u8868"},"properties":{"statusInfo>editableInfo>associateInfo":{"x-decorator":"FormItem","x-component":"AssociateDataSourceSetter","x-decorator-props":{"span":24},"x-validator":{"customFieldsRules":true}}}},"valueRuleGroup":{"type":"void","x-component":"FormGroup","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","x-component-props":{"title":"\u6821\u9a8c\u4e0e\u9519\u8bef\u63d0\u793a"},"properties":{"required":{"title":"\u5fc5\u586b","x-decorator":"FormItem","x-component":"Checkbox","x-visible":"{{$values[\'statusInfo>statusType\']===\'EDITABLE\'}}","initialValue":false},"valueRule>requiredErrorMsg":{"title":"\u9519\u8bef\u63d0\u793a","required":true,"x-decorator":"FormItem","x-component":"Input","initialValue":"\u5b57\u6bb5\u5fc5\u586b","default":"\u5b57\u6bb5\u5fc5\u586b","x-visible":"{{!!$values[\'required\']}}"}}}}}')},448:function(e,t,n){"use strict";n.r(t);var o,i=n(11),a=n(39),r=n(0),l=n.n(r),c=n(117),s=n(42),u=n(16),d=n(454),f=n(38),p=n.n(f),m="BASE",v="CHANGE_FORMVO",b="INIT_FORMDESIGN",x="PLACE_FIELD",j="DELETE_FIELD",h="BATCH_DELETE_FIELD",I="MOVE_FIELD",O="SELECT_FIELD",g="COPY_FIELD",y="CHANGE_FIELD",F="CLEAR_FORMDESIGN",E=n(55),D=n(51),C=n(49),S=n(50),w=n(72),T=n(113),P=n(218),R=["items"],A=["fieldFunctionContorl","templates","extendMaskLayers"],N=["mounted","unMounted"],V=["templates","splitDownKeys","dndMaskLayerTemplates"],M=["parId","splitDownKeys"],k=function(e){return void 0===e||null===e||"object"!==typeof e?e:JSON.parse(JSON.stringify(e))},L=function(e){return"[object Object]"===Object.prototype.toString.call(e)},$=function(e,t){if(!e)return[];for(var n=[e],o=t[n[n.length-1]];o.parId;)n.push(o.parId),o=t[n[n.length-1]];return n},q=function(e){var t={};if(!e||!L(e))return null;var n=this.fieldInfoTemplate[e.type];n||console.error("".concat(e.type," template is not found"));var o=Array.from((null===n||void 0===n?void 0:n.splitDownKeys)||[]);for(var i in e)if(!M.includes(i)&&Object.prototype.hasOwnProperty.call(e,i)){var a=""===e[i]?null:k(e[i]),r=i.replace(/(\"|\')/g,"").split(">"),l=r.pop();if(r.length>=1){if(r.every((function(e){return o.includes(e)})))r.reduce((function(e,t){return e[t]||(e[t]={}),e[t]}),t)[l]=a}else t[i]=a}return t},Y=function(e,t){var n={};if(!e||!L(e))return null;void 0!==t&&(n.parId=t);var o=this.fieldInfoTemplate[e.type];o||console.error("".concat(e.type," template is not found"));var i=Array.from((null===o||void 0===o?void 0:o.splitDownKeys)||[]);return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=o?o+">"+a:a,l=t[a];i.includes(a)&&L(l)?e(l,r):n[r]=k(l)}}(e),n},B=function(e,t){var n,o=this.fieldFunctionContorl,a=this.transformField,r=this.fieldKey,l={},c={};return n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t||void 0===t?void 0:t.map((function(t){var s=""+t[r],u=(null===o||void 0===o?void 0:o(t))||{},d=u.canDrag,f=u.canDel,p=u.canCopy,m=u.visible,v={id:s,canDrag:null===d||void 0===d||d,canDel:null===f||void 0===f||f,canCopy:null===p||void 0===p||p,visible:null===m||void 0===m||m};return c[s]=v.visible?a(t,n):Object(i.a)(Object(i.a)({},t),{},{parId:n}),t.items&&(l[s]=e(t.items||[],s)),v}))}(e),{outerFieldPostions:n,nestedFieldPostions:l,fieldsMap:c}},W=function e(t){return(t=Array.isArray(t)?t:[t]).reduce((function(t,n){if("Identifier"===n.type)t.push(n.value);else if("DestructorExpression"===n.type){var o;"ArrayPattern"===(null===(o=n.value)||void 0===o?void 0:o.type)?t.push.apply(t,Object(D.a)(e(n.value.elements))):(console.warn("parserType",n.type),console.warn("afterType",n.value.type))}else console.warn("otherType",n.type);return t}),[])},G=function(e){var t={},n={};return e&&e.forEach((function(e){var o=function(o){if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o];if(a){t[o]=Object(i.a)({splitDownKeys:new Set},a.initialValue||{}),n[o]=a;var r=z(a,(function(e,n){var i=new P.a(e).parse(),a=void 0!==n.initialValue&&null!==n.initialValue;W(i).forEach((function(e,i){var r=e.replace(/(\"|\')/g,"").split(">");r.length>1&&(r.pop(),r.forEach((function(e){return t[o].splitDownKeys.add(e)}))),!a||n.type&&!["void","array","object"].includes(n.type)||(Array.isArray(n.initialValue)?t[o][e]=n.initialValue[i]:t[o][e]=n.initialValue)})),delete n.initialValue}));n[o]=r.toJSON()}}};for(var a in e)o(a)})),{fieldInfoTemplate:t,fieldSetterTemplate:n}},H=function(e,t){var n=this,o=(t.data||{}).contorlTrigger;return o&&(o=Array.isArray(o)?o:[o]).forEach((function(o){var i=e[o];e[o]=function(){for(var e,a,r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];Promise.resolve(null===(e=null===(a=n["".concat(o,"ValidateInSetter")])||void 0===a?void 0:a.call(n,t.props.name,l[0],n.recoverField(t.form.values)))||void 0===e||e).then((function(e){e&&i.apply(void 0,l)}))}})),Object(i.a)({},e)},z=function(e,t){return function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new w.a(""),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mapProperties((function(n,a,r){var l=o.concat(a);if(void 0===a||null===a)e(n,o);else{var c=null===t||void 0===t?void 0:t(a,n,o,i);n.type&&["object","void"].includes(n.type)&&e(n,l,c)}}))}(e=new T.b(Object.assign({type:"object"},e))),e},X=function(e,t,n){var o=n.createSchemaFieldParams;t=new T.b(t);var i=Object(w.b)({initialValues:e,validateFirst:!0});return z(t,(function(e,t,n){var a,r=t.toFieldProps(o),l=Object.assign({},r,{name:e,basePath:n});(a="object"===t.type?i.createObjectField(l):"array"===t.type?i.createArrayField(l):"void"===t.type?i.createVoidField(l):i.createField(l))&&"none"===a.display&&(i.deleteValuesIn(e),a.destroy())})),i.onMount(),i.submit().finally((function(){i.onUnmount()}))},K=function(e,t){var n=e.outerFieldPostions,o=e.nestedFieldPostions,i=e.fieldsMap;return function e(n){return n.reduce((function(n,a){var r=a.id,l=a.visible,c=i[r];return l&&(c=t(c),o[r]&&(c.items=e(o[r])),n.push(c)),n}),[])}(n)},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.fieldsMap,i=e.outerFieldPostions,r=e.nestedContainerFieldPostions,l=t.fieldSetterTemplate,c=Object.entries(o).reduce((function(e,n){var o=Object(a.a)(n,2),c=o[0],s=o[1];if(!s)return e;var u,d=null===s||void 0===s?void 0:s.parId,f=(d?r[d]:i).filter((function(e){return e.id===c}))[0].visible,p=null!==(u=l[s.type])&&void 0!==u?u:null;return f?p?e.push(X(s,p,t).then((function(e){return[c,e]}),(function(e){throw[c,e]}))):e.push(Promise.reject([c,[{code:"schemaError",messages:s.type?"".concat(c,"\u5b57\u6bb5\u7c7b\u578b\u4e3a\u4e0d\u5b58\u5728"):"".concat(c,"\u7684\u7c7b\u578b\u4e3a").concat(s.type,"\u7684schema\u7f3a\u5931")}]])):e.push([c,s]),e}),[]);return Promise.allSettled(c).then((function(e){var t=e.reduce((function(e,t){var n=t.status,o=t.value,i=t.reason;return"rejected"===n?e.error.push(Object(u.a)({},i[0],i[1])):e.success[o[0]]=o[1],e}),{error:[],success:{}});if(t.error.length)throw t.error;if(n)return t.success}))},U=function e(t,n){var o=n.fieldInfoTemplate,a=n.fieldKey,r=[];return[(Array.isArray(t)?t:[t]).map((function(t){var n,l,c=t.items,d=Object(s.a)(t,R),f=null!==(n=t[a])&&void 0!==n?n:Math.random().toString(36).slice(-8)+ +new Date,p=(o[d.type]||{}).title,m=Object(i.a)(Object(i.a)({},d),{},(l={id:f},Object(u.a)(l,a,f),Object(u.a)(l,"isNew",!0),Object(u.a)(l,"title",p),l));return c&&Array.isArray(c)&&(m.items=e(c,o)),r.push(f),m})),r]},J=function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,null,[{key:"initSupInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldFunctionContorl,o=t.templates,a=t.extendMaskLayers,r=Object(s.a)(t,A),l=G(o);this[e]=Object(i.a)(Object(i.a)(Object(i.a)({mounted:!0,fieldFunctionContorl:n},r),l),{},{dndMaskLayerTemplates:Object(E.i)(a||{}),extendMaskLayers:a}),Object.assign(this[e],{transformField:Y.bind(this[e]),recoverField:q.bind(this[e]),transformFormVo:B.bind(this[e]),dealWithCustomData:H.bind(this[e])})}},{key:"changeSupInfo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this[t]){var o=this[t],i=(o.mounted,o.unMounted,Object(s.a)(o,N)),a=e.diffChange(i,n);Object.assign(this[t],a)}}},{key:"deleteSupInfo",value:function(e){this[e]&&Object.assign(this[e],{unMounted:!0})}},{key:"diffChange",value:function(e,t){var n=t.templates,o=(t.splitDownKeys,t.dndMaskLayerTemplates,Object(s.a)(t,V));return n&&e.templates!==n&&Object.assign(o,G(n)),o}}]),e}();!function(e){e.add="add",e.move="move",e.delete="delete",e.copy="copy",e.select="select"}(o||(o={}));var Q,Z,ee=["type","formDesignId"],te=["fieldsMap"],ne=function(e,t){e[t]=void 0},oe={formDesignId:"",outerFieldPostions:[],nestedFieldPostions:{},fieldsMap:{},selectedFieldId:null},ie=function(e,t,n){var o,i=e.innerField,a=e.placeLayerInfo,r=(e.dragFieldInfo,a.contentFieldId),l=a.dropIndex,s=r?t.nestedFieldPostions[r]||(t.nestedFieldPostions[r]=[],t.nestedFieldPostions[r]):t.outerFieldPostions,u=l||Object(c.findLastIndex)(s,(function(e){return e.visible}))+1,d=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,i);s.splice.apply(s,[u,0].concat(Object(D.a)(d.outerFieldPostions))),r?t.nestedFieldPostions[r]=Object(D.a)(s):t.outerFieldPostions=Object(D.a)(s),Object.assign(t.fieldsMap,d.fieldsMap),Object.assign(t.nestedFieldPostions,d.nestedFieldPostions)},ae=function(e,t,n){var o,i=e.contentFieldId,a=e.copyField,r=e.innerIndex,l=null===(o=n.transformFormVo)||void 0===o?void 0:o.call(n,a),c=i?t.nestedFieldPostions[i]:t.outerFieldPostions;c.splice.apply(c,[r+1,0].concat(Object(D.a)(l.outerFieldPostions))),i?t.nestedFieldPostions[i]=Object(D.a)(c):t.outerFieldPostions=Object(D.a)(c),Object.assign(t.nestedFieldPostions,l.nestedFieldPostions),Object.assign(t.fieldsMap,l.fieldsMap)},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:""},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.index,i=t.id,a=n.index,r=[],l=e.filter((function(e){return e.id===i}))[0];e.length&&-1!==o||r.push(l);var s=e.reduce((function(e,t,n){return n!==a&&e.push(t),n===o&&l&&e.push(l),e}),r);if(l&&void 0===o){var u=Object(c.findLastIndex)(s,(function(e){return e.visible}))+1;s.splice(u,0,l)}return s},le=function(e,t){var n=e.placeLayerInfo,o=e.dragFieldInfo,i=t.nestedContainerFieldPostions,a=t.outerFieldPostions,r=o.id,l=o.contentFieldId,c=o.dragIndex,s=n.contentFieldId,u=n.dropIndex,d=s?i[s]:a,f=l?i[l]:a,p=[];switch((p=d===f?[d=re(d,{index:u,id:r},{index:c})]:[d=re(d,{index:u||d.length-1,id:r}),f=re(f,void 0,{index:c})]).length){case 1:return s?i[s]=p[0]:a=p[0],{nestedContainerFieldPostions:i,outerFieldPostions:a};case 2:return s?i[s]=p[0]:a=p[0],l?i[l]=p[1]:a=p[1],{nestedContainerFieldPostions:i,outerFieldPostions:a};default:return null}},ce=function(e,t){var n=e.fieldId,o=e.contentFieldId,i=(o?t.nestedFieldPostions[o]:t.outerFieldPostions).filter((function(e){return e.id!==n}));o?t.nestedFieldPostions[o]=Object(D.a)(i):t.outerFieldPostions=Object(D.a)(i),t.nestedFieldPostions[n]&&ne(t.nestedFieldPostions,n);var a=$(t.selectedFieldId,t.fieldsMap),r=a.indexOf(n);r>=0&&(t.selectedFieldId=a[r+1]||null),ne(t.fieldsMap,n)},se=function(e,t){var n=e.fieldId,o=t.nestedFieldPostions,i=t.fieldsMap,a=t.outerFieldPostions,r=t.selectedFieldId,l=$(t.selectedFieldId,t.fieldsMap),c=-1;return Array.isArray(n)&&(n.forEach((function(e){var t=i[e];if(t){t.parId?(o[t.parId]=o[t.parId].filter((function(t){return t.id!==e})),o[e]&&ne(o,e)):a=a.filter((function(t){return t.id!==e})),ne(i,e);var n=l.indexOf(e);c=Math.max(n,c)}})),c>=0&&(r=l[c+1]||null)),{nestedFieldPostions:o,outerFieldPostions:a,fieldsMap:i,selectedFieldId:r}},ue=function(e,t,n){var o=e.fieldId,a=e.newFieldInfo,r=void 0===a?{}:a,l=e.cover;o=o||t.selectedFieldId;var s=t.fieldsMap[o];t.fieldsMap[o]=l?Object(i.a)(Object(i.a)({},r),{},{parId:s.parId}):Object.assign({parId:s.parId},s,Object(c.cloneDeep)(r))},de=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=void 0)},fe=function(){var e,t,n,a,r,l,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.cloneDeep)(oe),d=arguments.length>1?arguments[1]:void 0,f=d.type,p=d.formDesignId,m=Object(s.a)(d,ee),E=J[u.formDesignId]||{};switch(f){case b:return Object(i.a)(Object(i.a)({},u),{},{formDesignId:p});case v:var D=(null===(e=E.transformFormVo)||void 0===e?void 0:e.call(E,m.formVo||[]))||{},C=D.fieldsMap,S=Object(s.a)(D,te);return de(u.fieldsMap),Object.assign(u.fieldsMap,C||{}),Object(i.a)(Object(i.a)({},u),S);case x:return ie(m,u,E),null===(t=E.onFormVoChange)||void 0===t||t.call(E,o.add,m.innerField),Object(i.a)({},u);case g:return ae(m,u,E),null===(n=E.onFormVoChange)||void 0===n||n.call(E,o.copy,m.copyField),Object(i.a)({},u);case I:var w=le(m,u);if(w){var T,P=m.placeLayerInfo,R=m.dragFieldInfo,A=u.fieldsMap[R.id];return A.parId=P.contentFieldId,null===(T=E.onFormVoChange)||void 0===T||T.call(E,o.move,A),Object(i.a)(Object(i.a)({},u),w)}return u;case j:return ce(m,u),null===(a=E.onFormVoChange)||void 0===a||a.call(E,o.delete,m.fieldId),Object(i.a)({},u);case h:var N=se(m,u);return null===(r=E.onFormVoChange)||void 0===r||r.call(E,o.delete,m.deleteIds),Object(i.a)(Object(i.a)({},u),N);case O:return null===(l=E.onFormVoChange)||void 0===l||l.call(E,o.select,m.selectId),Object(i.a)(Object(i.a)({},u),{},{selectedFieldId:m.selectId});case y:return ue(m,u),Object(i.a)({},u);case F:return Object(c.cloneDeep)(oe);default:return u}},pe=n(4),me=["formDesignPerfixCls"],ve=["formVo","templates","fieldFunctionContorl","formDesignId","customFieldAttrWithSetting","customFieldsRules","manualContorlSchema","onFormVoChange","onFieldChange","onChangeValidateInSetter","extendMaskLayers","fieldKey","coustomPerview"],be=["formDesignState","formDesignDataDiepatch","placeFieldValidate","createInnerFieldInfo","moveFieldValidate","deleteFieldValidate","copyFieldValidate","createCopyFieldInfo","formDesignId"],xe=["type"],je=["type"],he=["splitDownKeys"],Ie=["type"],Oe=["type"],ge={formDesignPerfixCls:"mortale-form-design",formDesignId:""},ye=l.a.createContext(ge),Fe=l.a.createContext(oe),Ee=l.a.createContext({placeField:function(){return Promise.resolve([])},moveField:function(){},deleteField:function(){return Promise.resolve(!0)},copyField:function(){return Promise.resolve([])},selectField:function(){}}),De=(Q=[function(e){return l.a.forwardRef((function(t,n){var o=t.formDesignPerfixCls,a=Object(s.a)(t,me),r=l.a.useMemo((function(){var e=Object(i.a)({},ge);return o&&(e.formDesignPerfixCls=o),e.formDesignId=Object(c.uniqueId)("".concat(e.formDesignPerfixCls,"-")),e}),[o]);return Object(pe.jsx)(ye.Provider,{value:r,children:Object(pe.jsx)(e,Object(i.a)(Object(i.a)(Object(i.a)({},a),r),{},{ref:n}))})}))},function(e){return l.a.forwardRef((function(t,n){var o=t.formVo,r=t.templates,u=t.fieldFunctionContorl,d=t.formDesignId,f=t.customFieldAttrWithSetting,p=t.customFieldsRules,m=t.manualContorlSchema,x=t.onFormVoChange,j=t.onFieldChange,h=t.onChangeValidateInSetter,I=t.extendMaskLayers,O=t.fieldKey,g=void 0===O?"id":O,D=t.coustomPerview,C=Object(s.a)(t,ve),S=l.a.useState({mounted:!1,unMounted:!1}),w=Object(a.a)(S,1)[0],T=l.a.useReducer(fe,Object(c.cloneDeep)(oe)),P=Object(a.a)(T,2),R=P[0],A=P[1];l.a.useEffect((function(){return w.mounted=!0,Promise.resolve().then((function(){J.initSupInfo(d,{fieldFunctionContorl:u,customFieldAttrWithSetting:f,templates:r,customFieldsRules:p,validateWithScrollSign:E.i.ref(""),manualContorlSchema:m,onFormVoChange:x,onFieldChange:j,onChangeValidateInSetter:h,fieldKey:g,CoustomPerView:D,extendMaskLayers:I}),A({type:b,formDesignId:d})})).finally((function(){null!==o&&void 0!==o&&o.length&&A({type:v,formVo:o})})),function(){Promise.resolve().then((function(){J.deleteSupInfo(d),w.unMounted=!0,A({type:F})})).finally((function(){}))}}),[]),l.a.useEffect((function(){w.mounted&&J.changeSupInfo(d,{fieldFunctionContorl:u,customFieldAttrWithSetting:f,customFieldsRules:p,templates:r,manualContorlSchema:m,onFormVoChange:x,onFieldChange:j,CoustomPerView:D})}),[r,u,f,p,m,x,j,D]),l.a.useEffect((function(){var e=J[d];e&&A({type:v,formVo:o}),R.selectedFieldId&&(null!==e&&void 0!==e&&e.resetSetterPaneValue&&(e.resetSetterPaneValue.value=e.resetSetterPaneValue.value+1),null!==e&&void 0!==e&&e.resetSetterPaneSchema&&(e.resetSetterPaneSchema.value=e.resetSetterPaneSchema.value+1))}),[o]);var N=l.a.useCallback((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];A({type:y,fieldId:e,newFieldInfo:t,cover:n})}),[]),V=l.a.useMemo((function(){return Object(i.a)(Object(i.a)({},R),{},{changeField:N})}),[R,N]);return Object(pe.jsx)(Fe.Provider,{value:V,children:Object(pe.jsx)(e,Object(i.a)(Object(i.a)({},C),{},{formDesignDataDiepatch:A,formDesignState:R,formDesignId:d,ref:n}))})}))},function(e){return l.a.forwardRef((function(t,n){var o=t.formDesignState,r=t.formDesignDataDiepatch,u=t.placeFieldValidate,d=t.createInnerFieldInfo,f=t.moveFieldValidate,p=t.deleteFieldValidate,m=t.copyFieldValidate,v=t.createCopyFieldInfo,b=t.formDesignId,y=Object(s.a)(t,be),F=l.a.useCallback((function(e,t,n,a){var r,l,c,s=J[b],u=null===(r=s.recoverField)||void 0===r?void 0:r.call(s,o.fieldsMap[n.id]),d=null===(l=s.recoverField)||void 0===l?void 0:l.call(s,o.fieldsMap[t.id]);return Promise.resolve(e||null===(c=null===a||void 0===a?void 0:a(Object(i.a)(Object(i.a)({},u),n),Object(i.a)(Object(i.a)({},d),t)))||void 0===c||c).then((function(e){return{validateResult:e,operationField:u,contentField:d}}))}),[]),E=l.a.useCallback((function(e,t){e.type;var n=Object(s.a)(e,xe),o=(t.type,Object(s.a)(t,je)),i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=J[b];return Promise.resolve(F(i,n,o,u)).then((function(e){var t=e.validateResult,i=(e.operationField,e.contentField);if(t){console.log(l.fieldInfoTemplate,o.uniquelySign);var u=Object(c.cloneDeep)(l.fieldInfoTemplate[o.uniquelySign]),f=(u.splitDownKeys,Object(s.a)(u,he));return f||console.error("".concat(o.uniquelySign,"\u7c7b\u578b\u5b57\u6bb5\u4e0d\u5b58\u5728")),Promise.resolve((null===d||void 0===d?void 0:d(f,i))||f).then((function(e){var t=U(e,l),i=Object(a.a)(t,2),c=i[0],s=i[1];return r({type:x,innerField:c,placeLayerInfo:n,dragFieldInfo:o}),s}))}return[]}))}),[u,d]),D=l.a.useCallback((function(e,t){e.type;var n=Object(s.a)(e,Ie),o=(t.type,Object(s.a)(t,Oe)),i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Promise.resolve(F(i,n,o,f)).then((function(e){var t=e.validateResult;e.operationField,e.contentField,t&&r({type:I,placeLayerInfo:n,dragFieldInfo:o})}))}),[f]),C=l.a.useCallback((function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return null===o||void 0===o||o.stopPropagation(),Promise.resolve(F(a,{id:t},{id:e},p)).then((function(o){var i,a=o.validateResult,r=(o.operationField,o.contentField,!1);return Array.isArray(a)?null!==a&&void 0!==a&&a.length&&(i={fieldId:a},r=!0):a&&(Array.isArray(e)&&null!==e&&void 0!==e&&e.length?(i={deleteIds:e},r=!0):i={fieldId:e,deleteIndex:n,contentFieldId:t}),{isBatchDel:r,dispatchParams:i}})).then((function(e){var t=e.isBatchDel,n=e.dispatchParams,o=!1;return n&&(r(t?Object(i.a)({type:h},n):Object(i.a)({type:j},n)),o=!0),o}))}),[p]),S=l.a.useCallback((function(e,t){null===t||void 0===t||t.stopPropagation(),r({type:O,selectId:e})}),[]),w=l.a.useCallback((function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null===o||void 0===o||o.stopPropagation();var l=J[b];return Promise.resolve(F(i,{id:t},{id:e},m)).then((function(e){var o=e.validateResult,i=e.operationField,c=e.contentField;return o?Promise.resolve((null===v||void 0===v?void 0:v(i,c))||i).then((function(e){var o=U(e,l),i=Object(a.a)(o,2),c=i[0],s=i[1];return r({type:g,contentFieldId:t,innerIndex:n,copyField:c}),s})):[]}))}),[F,m,v]),T=l.a.useMemo((function(){return{placeField:E,moveField:D,deleteField:C,selectField:S,copyField:w}}),[]);return Object(pe.jsx)(Ee.Provider,{value:T,children:Object(pe.jsx)(e,Object(i.a)(Object(i.a)({},y),{},{ref:n}))})}))}],function(e){return Q.reduceRight((function(e,t){return t(e)}),e)}),Ce=["children","type","uniquelySign","canDrag","title","style","className","formDesignPerfixCls","formDesignId"],Se=["info"],we=l.a.memo((function(e){var t=e.type,n=void 0===t?m:t,o=e.canDrag,i=void 0===o||o,r=e.formDesignPerfixCls,c=e.uniquelySign,s=Object(d.a)({item:{type:n,uniquelySign:c},options:{dropEffect:"copy"},canDrag:function(){return i}}),f=Object(a.a)(s,3),v=f[1],b=f[2];return l.a.useEffect((function(){b(document.getElementById("".concat(r,"-faker-perview")))}),[r]),Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)("div",{ref:v,className:p()("".concat(r,"-drag-layer"),Object(u.a)({},"".concat(r,"-drag-disable"),!i))})})})),Te=l.a.memo((function(e){var t=e.children,n=e.type,o=void 0===n?m:n,a=e.uniquelySign,r=e.canDrag,c=e.title,u=e.style,d=e.className,f=e.formDesignPerfixCls,v=e.formDesignId,b=Object(s.a)(e,Ce),x=J[v],j=l.a.useMemo((function(){return"".concat(o,"_").concat(a)}),[o,a]);return l.a.useEffect((function(){x&&(x.dndMaskLayerTemplates[a]=Object(i.a)({id:j,uniquelySign:a,type:o,name:c},b))}),[x,j]),Object(pe.jsxs)("div",{className:p()("".concat(f,"-drag-range"),d),id:j,title:c,style:u,children:[Object(pe.jsx)(we,{type:o,uniquelySign:a,canDrag:r,formDesignPerfixCls:f}),t]})})),Pe=function(e){var t=e.info,n=Object(s.a)(e,Se),o=l.a.useContext(ye),a=o.formDesignId,r=o.formDesignPerfixCls;return Object(pe.jsx)(Te,Object(i.a)(Object(i.a)(Object(i.a)({},t),n),{},{title:t.name,formDesignId:a,formDesignPerfixCls:r,children:Object(pe.jsx)("div",{className:"".concat(r,"-single-widget-content"),children:Object(pe.jsx)("div",{className:"".concat(r,"-single-widget-text"),children:t.name})})}))},Re=n(207),Ae=n.n(Re),Ne=n(164),Ve=n(455),Me=n(459),ke=n(462),Le=["isDropContent","accept","type","children","fieldId","index","contentFieldId"],$e=Object(Ne.default)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e.apply(void 0,n.concat(o))}}));!function(e){e.top="top",e.bottom="bottom",e.left="left",e.right="right",e.none=""}(Z||(Z={}));var qe=r.forwardRef((function(e,t){var n=e.children,o=e.contentFieldId,i=e.formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(i,"-drop-content"),style:{zIndex:o?11:1},ref:t,children:n})})),Ye=r.forwardRef((function(e,t){var n,o=e.children,i=(e.contentFieldId,e.fieldId),a=e.isSelected,l=e.deleteField,c=e.selectField,s=e.copyField,d=e.canDel,f=e.canCopy,m=e.isDragging,v=e.isFirstField,b=e.isLastField,x=e.locationMarker,j=e.formDesignPerfixCls,h="".concat(j,"-form-item-hover"),I=r.useCallback((function(e){return l(e)}),[l]),O=r.useCallback((function(e){return s(e)}),[s]);return Object(pe.jsx)("div",{id:i,ref:t,className:"".concat(j,"-field-dnd-wrapper"),children:Object(pe.jsx)("div",{className:p()((n={},Object(u.a)(n,"".concat(j,"-field-active"),a),Object(u.a)(n,"".concat(j,"-first-field"),v),Object(u.a)(n,"".concat(j,"-last-field"),b),Object(u.a)(n,"".concat(j,"-field-dragging"),m),Object(u.a)(n,"".concat(j,"-location-").concat(x.sign,"-marker"),x.show&&x.sign),n)),onClick:c,onMouseOver:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.add(h)},onMouseOut:function(e){var n;e.stopPropagation(),null===(n=t.current)||void 0===n||n.children[0].classList.remove(h)},children:Object(pe.jsxs)("div",{className:"".concat(j,"-field-border"),children:[Object(pe.jsxs)("div",{className:"".concat(j,"-field-operation-area"),children:[Object(pe.jsx)("span",{children:f&&Object(pe.jsx)(Me.a,{onClick:O})}),Object(pe.jsx)("span",{children:d&&Object(pe.jsx)(ke.a,{onClick:I})})]}),o]})})})})),Be=function(e){var t=e.isDropContent,n=void 0!==t&&t,o=e.accept,l=void 0===o?m:o,c=e.type,u=void 0===c?m:c,f=e.children,p=e.fieldId,v=e.index,b=e.contentFieldId,x=Object(s.a)(e,Le),j=r.useContext(ye).formDesignPerfixCls,h=r.useContext(Ee),I=h.placeField,O=h.moveField,g=h.selectField,y=h.deleteField,F=h.copyField,E=$e(g,p),D=$e(y,p,b,v),C=$e(F,p,b,v),S=function(e,t,n){var o=t.placeField,i=t.moveField,l=t.selectField,c=t.type,s=t.accept,u=t.canDrag,f=void 0===u||u,p=t.formDesignPerfixCls,m=n.contentFieldId,v=n.fieldId,b=n.index,x=r.useState({show:!1,sign:Z.none}),j=Object(a.a)(x,2),h=j[0],I=j[1],O=r.useRef(null),g=Object(d.a)({item:{type:c,id:v,contentFieldId:m,dragIndex:b},canDrag:f,collect:function(e){return{isDragging:e.isDragging()}}}),y=Object(a.a)(g,3),F=y[0],E=y[1],D=y[2],C=r.useCallback((function(e,t){var n=t.top,o=t.height,i=t.bottom,a=e.y;if(!(a-n<0||i-a<0)){var r={show:!0,sign:a-n<=o/2?Z.top:Z.bottom};h.show===r.show&&h.sign===r.sign||I(r)}}),[h]),S=Object(Ve.a)({accept:s,drop:function(e,t){var n=t.getDropResult(),a=t.isOver({shallow:!1}),r=t.getItem().id;if(!n&&a)if(r){var s="number"!==typeof b||[Z.bottom,Z.right].includes(h.sign)?b:b-1;null===i||void 0===i||i({type:c,id:v,contentFieldId:m,dropIndex:s},e)}else{var u="number"!==typeof b||[Z.top,Z.left].includes(h.sign)?b:b+1;o({type:c,id:v,contentFieldId:m,dropIndex:u},e).then((function(e){e.length&&l(e[0])}))}},hover:function(t,n){if(((null===t||void 0===t?void 0:t.id)!==v||e)&&n.isOver({shallow:!0})&&O.current){var o=n.getClientOffset(),i=O.current.getBoundingClientRect();if(t.id&&[t.index,t.index+1].includes(o.y-i.top<=i.height/2?b:b+1))return;C(o,i)}},collect:function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),clientOffset:e.getClientOffset()}}}),w=Object(a.a)(S,2),T=w[0],P=w[1];return r.useEffect((function(){e||(E(O),D(document.getElementById("".concat(p,"-faker-perview")))),P(O)}),[O,e]),r.useEffect((function(){var e;return h.show&&!T.isOverCurrent&&(e=setTimeout((function(){clearTimeout(e),I({show:!1,sign:Z.none})}),32)),function(){e&&clearTimeout(e)}}),[h,T.isOverCurrent]),[O,F.isDragging,h]}(n,{placeField:I,moveField:O,selectField:g,type:u,accept:l,canDrag:x.canDrag,formDesignPerfixCls:j},{contentFieldId:b,fieldId:p,index:v}),w=Object(a.a)(S,3),T=w[0],P=w[1],R=w[2],A=r.useMemo((function(){return n?qe:Ye}),[n]);return Object(pe.jsx)(A,Object(i.a)(Object(i.a)({ref:T},x),{},{formDesignPerfixCls:j,fieldId:p,contentFieldId:b,selectField:E,deleteField:D,copyField:C,isDragging:P,locationMarker:R,children:f}))},We=n(141),Ge=n.n(We),He=n(199),ze=n.n(He),Xe=n(57),Ke=n(58),_e=n(193),Ue=n.n(_e),Je=function(){return Je=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Je.apply(this,arguments)},Qe=Object(r.createContext)(null),Ze=Object(r.createContext)(null),et=function(){return Je(Je({},Object(r.useContext)(Qe)),Object(r.useContext)(Ze))},tt=n(166),nt=n.n(tt),ot=n(235),it=n.n(ot),at=n(460),rt=n(456),lt=n(457),ct=n(458),st=["id"],ut=function(){return ut=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)},dt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},ft=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return r};var pt={error:l.a.createElement(rt.a,null),success:l.a.createElement(lt.a,null),warning:l.a.createElement(ct.a,null)},mt=function(e){var t,n,o,i,a,c=e.id,u=Object(s.a)(e,st),d=u.children,f=dt(u,["children"]),m=ft(Object(r.useState)(!1),2),v=m[0],b=m[1],x=function(e){var t,n,o,i,a,r,c,s,u,d,f,p,m,v,b,x,j,h,I,O,g,y,F,E,D=et();return ut(ut({},e),{layout:null!==(n=null!==(t=e.layout)&&void 0!==t?t:D.layout)&&void 0!==n?n:"horizontal",colon:null!==(o=e.colon)&&void 0!==o?o:D.colon,labelAlign:"vertical"===D.layout?null!==(a=null!==(i=e.labelAlign)&&void 0!==i?i:D.labelAlign)&&void 0!==a?a:"left":null!==(c=null!==(r=e.labelAlign)&&void 0!==r?r:D.labelAlign)&&void 0!==c?c:"right",labelWrap:null!==(s=e.labelWrap)&&void 0!==s?s:D.labelWrap,labelWidth:null!==(u=e.labelWidth)&&void 0!==u?u:D.labelWidth,wrapperWidth:null!==(d=e.wrapperWidth)&&void 0!==d?d:D.wrapperWidth,labelCol:null!==(f=e.labelCol)&&void 0!==f?f:D.labelCol,wrapperCol:null!==(p=e.wrapperCol)&&void 0!==p?p:D.wrapperCol,wrapperAlign:null!==(m=e.wrapperAlign)&&void 0!==m?m:D.wrapperAlign,wrapperWrap:null!==(v=e.wrapperWrap)&&void 0!==v?v:D.wrapperWrap,fullness:null!==(b=e.fullness)&&void 0!==b?b:D.fullness,size:null!==(x=e.size)&&void 0!==x?x:D.size,inset:null!==(j=e.inset)&&void 0!==j?j:D.inset,asterisk:e.asterisk,bordered:null!==(h=e.bordered)&&void 0!==h?h:D.bordered,feedbackIcon:e.feedbackIcon,feedbackLayout:null!==(O=null!==(I=e.feedbackLayout)&&void 0!==I?I:D.feedbackLayout)&&void 0!==O?O:"loose",tooltipLayout:null!==(y=null!==(g=e.tooltipLayout)&&void 0!==g?g:D.tooltipLayout)&&void 0!==y?y:"icon",tooltipIcon:null!==(E=null!==(F=e.tooltipIcon)&&void 0!==F?F:D.tooltipIcon)&&void 0!==E?E:l.a.createElement(at.a,null)})}(f),j=function(){var e=ft(Object(r.useState)(!1),2),t=e[0],n=e[1],o=Object(r.useRef)(),i=Object(r.useRef)();return Object(r.useLayoutEffect)((function(){if(o.current&&i.current){var e=i.current.getBoundingClientRect().width,a=o.current.getBoundingClientRect().width;e&&a&&a<e||t&&n(!1)}}),[]),{overflow:t,containerRef:o,contentRef:i}}(),h=j.containerRef,I=j.contentRef,O=j.overflow,g=x.label,y=x.style,F=x.layout,E=x.colon,D=void 0===E||E,C=x.addonBefore,S=x.addonAfter,w=x.asterisk,T=x.feedbackStatus,P=x.extra,R=x.feedbackText,A=x.fullness,N=x.feedbackLayout,V=x.feedbackIcon,M=x.inset,k=x.bordered,L=void 0===k||k,$=x.labelWidth,q=x.wrapperWidth,Y=x.labelCol,B=x.wrapperCol,W=x.labelAlign,G=x.wrapperAlign,H=void 0===G?"left":G,z=x.size,X=x.labelWrap,K=x.wrapperWrap,_=x.tooltipLayout,U=x.tooltip,J=x.tooltipIcon;g=24===Y&&/^\s+$/.test(g)?null:g;var Q=ut({},x.labelStyle),Z=ut({},x.wrapperStyle),ee=!1;($||q)&&($&&(Q.width="auto"===$?void 0:$,Q.maxWidth="auto"===$?void 0:$),q&&(Z.width="auto"===q?void 0:q,Z.maxWidth="auto"===q?void 0:q)),(Y||B)&&(Q.width||Z.width||(ee=!0));var te=function(e,t){var n=null===t||void 0===t?"ant":t.antPrefixCls;return(null===t||void 0===t?void 0:t.prefixCls)||(e?(n+"-").concat(e):n)}("formily-item",u),ne="popover"===N?l.a.createElement(it.a,{autoAdjustOverflow:!0,placement:"top",content:l.a.createElement("div",{className:p()((t={},t[te+"-"+T+"-help"]=!!T,t[te+"-help"]=!0,t))},pt[T]," ",R),visible:!!R},d):d;return l.a.createElement("div",ut({},function(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(t,n){return n.includes("data-")&&(t[n]=e[n]),t}),{})}(u),{style:ut(ut({},y),{}),className:p()((n={},n[""+te]=!0,n[te+"-layout-"+F]=!0,n[te+"-"+T]=!!T,n[te+"-feedback-has-text"]=!!R,n[te+"-size-"+z]=!!z,n[te+"-feedback-layout-"+N]=!!N,n[te+"-fullness"]=!!A||!!M||!!V,n[te+"-inset"]=!!M,n[te+"-active"]=v,n[te+"-inset-active"]=!!M&&v,n[te+"-label-align-"+W]=!0,n[te+"-control-align-"+H]=!0,n[te+"-label-wrap"]=!!X,n[te+"-control-wrap"]=!!K,n[te+"-bordered-none"]=!1===L||!!M||!!V,n[u.className]=!!u.className,n)),onFocus:function(){(V||M)&&b(!0)},onBlur:function(){(V||M)&&b(!1)},id:c}),function(){var e;return g?l.a.createElement("div",{className:p()((e={},e[te+"-label"]=!0,e[te+"-label-tooltip"]=U&&"text"===_||O,e[te+"-item-col-"+Y]=ee&&!!Y,e)),style:Q},function(){var e=l.a.createElement("div",{className:p()(te+"-label-content"),ref:h},w&&l.a.createElement("span",{className:p()(te+"-asterisk")},"*"),l.a.createElement("label",{ref:I},g));return"text"===_&&U||O?l.a.createElement(nt.a,{placement:"top",align:{offset:[0,10]},title:O?l.a.createElement("div",null,l.a.createElement("div",null,g),l.a.createElement("div",null,U)):U},e):e}(),function(){if(U&&"icon"===_&&!O)return l.a.createElement("span",{className:p()(te+"-label-tooltip-icon")},l.a.createElement(nt.a,{placement:"top",align:{offset:[0,2]},title:U},J))}()," "!==g&&l.a.createElement("span",{className:p()(te+"-colon")},D?":":"")):null}(),l.a.createElement("div",{className:p()((o={},o[te+"-control"]=!0,o[te+"-item-col-"+B]=ee&&!!B&&g,o))},l.a.createElement("div",{className:p()(te+"-control-content")},C&&l.a.createElement("div",{className:p()(te+"-addon-before")},C),l.a.createElement("div",{style:Z,className:p()((i={},i[te+"-control-content-component"]=!0,i[te+"-control-content-component-has-feedback-icon"]=!!V,i))},l.a.createElement(Ze.Provider,{value:void 0},ne),V&&l.a.createElement("div",{className:p()(te+"-feedback-icon")},V)),S&&l.a.createElement("div",{className:p()(te+"-addon-after")},S)),!!R&&"popover"!==N&&"none"!==N&&l.a.createElement("div",{className:p()((a={},a[te+"-"+T+"-help"]=!!T,a[te+"-help"]=!0,a[te+"-help-enter"]=!0,a[te+"-help-enter-active"]=!0,a))},R),P&&l.a.createElement("div",{className:p()(te+"-extra")},P)))},vt=Object(T.c)(mt,Object(T.e)({validateStatus:!0,title:"label",required:!0},(function(e,t){if(Object(w.d)(t))return{extra:e.extra||t.description};if(!t)return e;return{feedbackText:function(){var n=function(e){return e.reduce((function(t,n,o){return n?o<e.length-1?t.concat([n,", "]):t.concat([n]):t}),[])};if(!t.validating)return e.feedbackText?e.feedbackText:t.selfErrors.length?n(t.selfErrors):t.selfWarnings.length?n(t.selfWarnings):t.selfSuccesses.length?n(t.selfSuccesses):void 0}(),extra:e.extra||t.description}}),(function(e,t){var n;return Object(w.d)(t)?e:t?{feedbackStatus:"validating"===t.validateStatus?"pending":(null===(n=t.decorator[1])||void 0===n?void 0:n.feedbackStatus)||t.validateStatus}:e}),(function(e,t){if(Object(w.d)(t))return e;if(!t)return e;var n=!1;return t.required&&"readPretty"!==t.pattern&&(n=!0),"asterisk"in e&&(n=e.asterisk),{asterisk:n}}),(function(e,t){var n={};return t&&(n.id=t.address.entire),n})));vt.BaseItem=mt;var bt=vt,xt=(n(442),n(371),["span","labelCol","wrapperCol","className"]),jt=function(e){Object(Xe.a)(n,e);var t=Object(Ke.a)(n);function n(e){return Object(C.a)(this,n),t.call(this,e)}return Object(S.a)(n,[{key:"render",value:function(){var e=this.props,t=e.span,n=e.labelCol,o=e.wrapperCol,a=e.className,r=Object(s.a)(e,xt);return Object(pe.jsx)(Ue.a,{span:t||24,children:Object(pe.jsx)(bt,Object(i.a)({antPrefixCls:"ant",labelCol:n,wrapperCol:o,colon:24!==n,labelAlign:24!==n?"right":"left",className:a},r))})}}]),n}(r.Component),ht=n(204),It=n.n(ht),Ot=n(206),gt=n.n(Ot),yt=["fieldInfo"],Ft=["fieldInfo"],Et=["fieldInfo"],Dt=["fieldInfo"],Ct=Ge.a.TextArea,St=r.memo((function(e){var t=e.formDesignPerfixCls,n=e.supInfo,o=(e.mode,e.type),i=n.dndMaskLayerTemplates,l=r.useState(i[o]),c=Object(a.a)(l,2),s=c[0],u=c[1];return r.useEffect((function(){Object(E.k)((function(){s||u(i[o])}))}),[]),Object(pe.jsx)("div",{className:"".concat(t,"-field-mark")})})),wt=function(e){return r.memo((function(t){var n,o,i,a=t.fieldInfo,l=r.useContext($t),c=l.labelCol,s=l.wrapperCol,u=r.useContext(Lt),d=u.mode,f=u.SuffixFieldDisplay,m=u.SuffixFieldWidth,v=r.useContext(ye),b=v.formDesignPerfixCls,x=v.formDesignId,j=J[x];return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(St,{formDesignPerfixCls:b,supInfo:j,mode:d,type:a.type}),Object(pe.jsx)("div",{style:{flex:"0 0 ".concat(m,"px")},className:"".concat(b,"-field-custom-area"),children:Object(pe.jsx)(f,{fieldInfo:j.recoverField(a),mode:d})}),Object(pe.jsx)(jt,{labelCol:c,wrapperCol:s,label:a.title||" ",asterisk:"EDITABLE"===a["statusInfo>statusType"]&&a.required,tooltip:a.description,wrapperStyle:{pointerEvents:"none"},style:{marginBottom:"0"},mode:d,children:Object(pe.jsx)(e,{fieldInfo:a,placeholder:a.tips,disabled:"EDITABLE"!==a["statusInfo>statusType"],style:a.style||{},className:p()("".concat(b,"-").concat((null===(n=a.type)||void 0===n||null===(o=n.replace("_","-"))||void 0===o||null===(i=o.toLocaleLowerCase)||void 0===i?void 0:i.call(o))||"unknow","-field"),a.className),mode:d})})]})}))},Tt={TEXT:wt((function(e){e.fieldInfo;var t=Object(s.a)(e,yt);return Object(pe.jsx)(Ge.a,Object(i.a)({},t))})),TEXTAREA:wt((function(e){e.fieldInfo;var t=Object(s.a)(e,Ft);return Object(pe.jsx)(Ct,Object(i.a)({width:"100%"},t))})),DATE:wt((function(e){return Object(pe.jsx)(ze.a,Object(i.a)({width:"100%",block:!0},e))})),NUMBER:wt((function(e){e.fieldInfo;var t=Object(s.a)(e,Et),n=p()("input-number-handler-wrap-contorl",t.className);return Object(pe.jsx)(It.a,Object(i.a)(Object(i.a)({},t),{},{className:n}))})),RADIO:wt((function(e){e.fieldInfo;var t=Object(s.a)(e,Dt);return Object(pe.jsx)(gt.a,Object(i.a)({},t))}))},Pt=function(e){var t;t=e,"[object Object]"===Object.prototype.toString.call(t)&&Object.entries(e).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],o=t[1];Tt[n]=wt(o)}))},Rt=function(e){var t=e.fieldId,n=r.useContext(Fe).fieldsMap[t],o=r.useMemo((function(){return Tt[n.type]}),[n.type]);return Object(pe.jsx)(o,{fieldInfo:n})},At=(n(415),["id"]),Nt=function(){return Object(pe.jsx)("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},children:"\u8bf7\u4ece\u5de6\u8fb9\u62d6\u5165\u4e00\u4e2a\u7ec4\u4ef6"})},Vt=r.memo((function(e){var t=e.fieldGroupData,n=e.contentFieldId,o=e.selectedFieldId,a=t.length-1;return Object(pe.jsx)(Ae.a,{children:t.map((function(e,t){var r=e.id,l=Object(s.a)(e,At);return"boolean"!==typeof l.visible||l.visible?Object(pe.jsx)(Be,Object(i.a)(Object(i.a)({isFirstField:!t,isLastField:t===a,index:t,contentFieldId:n,fieldId:r,isSelected:o===r},l),{},{children:Object(pe.jsx)(Rt,{fieldId:r})}),r):null}))})})),Mt=r.memo((function(e){var t=e.contentFieldId,n=e.fieldGroupData,o=e.selectedFieldId,i=e.customNoData,a=void 0===i?null:i;return Object(pe.jsx)(Be,{isDropContent:!0,contentFieldId:t,children:null!==n&&void 0!==n&&n.length?Object(pe.jsx)(Vt,{contentFieldId:t,fieldGroupData:n,selectedFieldId:o}):a})})),kt=function(e){var t=e.contentFieldId,n=e.customNoData,o=r.useContext(Fe),i=o.outerFieldPostions,a=o.nestedFieldPostions,l=o.selectedFieldId,c=t?a[t]:i;return Object(pe.jsx)(Mt,{contentFieldId:t,selectedFieldId:l,fieldGroupData:c,customNoData:n})},Lt=r.createContext({mode:"web",SuffixFieldDisplay:function(e){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:84}),$t=r.createContext({labelCol:8,wrapperCol:16}),qt=function(e){var t=r.useContext(ye).formDesignPerfixCls,n=r.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16},e.layout)}),[e.layout]),o=r.useMemo((function(){return Object.assign({},{mode:e.mode||"web",SuffixFieldDisplay:e.SuffixFieldDisplay||function(){return Object(pe.jsx)(pe.Fragment,{})},SuffixFieldWidth:e.SuffixFieldWidth||84})}),[e.SuffixFieldWidth,e.SuffixFieldDisplay,e.mode]);return r.useEffect((function(){Pt(e.expendFieldSimulate)}),[e.expendFieldSimulate]),Object(pe.jsx)(Lt.Provider,{value:o,children:Object(pe.jsx)($t.Provider,{value:n,children:Object(pe.jsx)("div",{className:"".concat(t,"-simulator-content"),children:Object(pe.jsx)(kt,{contentFieldId:null,customNoData:e.noData||Object(pe.jsx)(Nt,{})})})})})},Yt=n(443),Bt=n(419),Wt=n.n(Bt),Gt=function(e){var t=e.title,n=e.supContent,o=void 0===n?function(){return null}:n,i=e.children,a=r.useContext(ye).formDesignPerfixCls;return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"".concat(a,"-form-group-title"),children:[t,Object(pe.jsx)(o,{})]}),Object(pe.jsx)(Wt.a,{children:i})]})},Ht=function(){var e=r.useContext(ye).formDesignPerfixCls;return Object(pe.jsx)("div",{className:"".concat(e,"-side-line")})},zt=n(200),Xt=n.n(zt),Kt=["type","value","onChange","decimal"],_t=["value","onChange","format"],Ut=["type","onBlur","onFocus"],Jt=ze.a.RangePicker,Qt=function(e){return/^\-$/.test(e)?"0":/\.$/.test(e)?e.slice(0,e.length-1):null},Zt=function(e){e.type,e.value;var t=e.onChange,n=e.decimal,o=void 0===n?2:n,l=Object(s.a)(e,Kt),c=r.useState(e.value||[]),u=Object(a.a)(c,2),d=u[0],f=u[1],p=r.useMemo((function(){return new RegExp("^\\-?((0|[1-9][0-9]*)?$|(0|[1-9][0-9]*)(\\.\\d{0,"+o+"})?$)")}),[o]),m=function(e,n){var o=n.target.value,i=function(e,t){var n=Object(D.a)(d);return p.test(t)?(n[e]=t,n):null}(e,o);if(i){var a=Object(D.a)(i);f(i);var r=Qt(o);r&&(a[e]=r),t(a)}},v=function(){var e=Object(a.a)(d,2),n=e[0],o=e[1];n=Qt(n)||n,o=Qt(o)||o,n&&o&&+n>+o&&(f([o,n]),t([o,n]))};return Object(pe.jsxs)("div",{className:"flex",children:[Object(pe.jsx)(Ge.a,Object(i.a)({value:d[0],onChange:m.bind(null,0),onBlur:v},l)),"~",Object(pe.jsx)(Ge.a,Object(i.a)({value:d[1],onChange:m.bind(null,1),onBlur:v},l))]})},en=function(e){var t=e.value,n=e.onChange,o=e.format,l=Object(s.a)(e,_t),c=r.useState(Array.from({length:2},(function(t,n){return e.value[n]&&Xt()(e.value[n])}))),u=Object(a.a)(c,2),d=u[0],f=u[1],p=r.useMemo((function(){var e={YYYY:{type:"rangepicker",picker:"year"},"YYYY-MM":{type:"rangepicker",picker:"month"},"YYYY-MM-DD HH:mm":{type:"rangepicker",showTime:{format:"HH:mm"}},"YYYY-MM-DD HH:mm:ss":{type:"rangepicker",showTime:{format:"HH:mm:ss"}}}[o]||{type:"rangepicker"},i=t.map((function(e){return e&&Xt()(e).format(o)}));return n(i),f(i.map((function(e){return e&&Xt()(e)}))),e}),[o]);return Object(pe.jsx)(Jt,Object(i.a)(Object(i.a)(Object(i.a)({},l),p),{},{block:!0,value:d,isDefinedValue:!0,onCalendarChange:function(e,t){f(e),n(t)}}))},tn=function(e){var t=e.type,n=(e.onBlur,e.onFocus,Object(s.a)(e,Ut)),o=r.useMemo((function(){return["rangepicker"===t?en:Zt]}),[t]),l=Object(a.a)(o,1)[0];return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(l,Object(i.a)({type:t},n))})},nn={number:"\u6570\u503c",percent:"\u767e\u5206\u6bd4",rangepicker:"\u65e5\u671f"},on=function(e){var t=e.value||[],n=Object(a.a)(t,2),o=n[0],i=n[1],r=nn[e.componentProps.type],l=e.componentProps.suffix||"",c="";return o&&!i?c="\u4e0d\u80fd\u4f4e\u4e8e".concat(r,"\u6700\u5c0f\u503c").concat(o).concat(l):!o&&i?c="\u4e0d\u80fd\u8d85\u51fa".concat(r,"\u6700\u5927\u503c").concat(i).concat(l):o&&i&&(c="\u8bf7\u8f93\u5165".concat(o).concat(l,"~").concat(i).concat(l,"\u7684").concat(r)),c},an=n(423),rn=n.n(an),ln=["isCompose","checkText","children","options"],cn=rn.a.Group,sn=function(e){var t=e.isCompose,n=e.checkText,o=e.children,a=e.options,r=Object(s.a)(e,ln);return t?Object(pe.jsx)(cn,Object(i.a)({options:a},r)):Object(pe.jsx)(rn.a,Object(i.a)(Object(i.a)({},r),{},{children:n||o}))},un=n(427),dn=n.n(un),fn=["id"],pn=["correctionNumber"],mn=Ge.a.TextArea,vn=function(e){return"[object Object]"===Object.prototype.toString.call(e)},bn=function(e,t,n,o){var i=t.form,r=n[e.perStatusType||t.initialValue]||[];Object.entries(r).forEach((function(t){var n=Object(a.a)(t,2),o=n[0],r=n[1];r=Array.isArray(r)?r:[r],e[o]=r.reduce((function(e,t){var n=i.getValuesIn(t);return vn(n)?(e=e||{},Object.assign(e,n)):e=n,e}),void 0)})),e.perStatusType=t.value};Object(w.q)({rangeSetterValidateRules:function(e,t,n){var o=e||[],i=Object(a.a)(o,2),r=i[0],l=i[1];return r&&l?"":"\u8be5\u5b57\u6bb5\u662f\u5fc5\u586b\u5b57\u6bb5"}});var xn=r.memo((function(e){var t=r.useContext(Sn);return Object(pe.jsx)(jt,Object(i.a)(Object(i.a)({},t),e))})),jn=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];if(o.length){var r=o[o.length-1];"function"===typeof r&&(o[o.length-1]=function(t,n){var o,a=null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,t,n);return Object(i.a)(Object(i.a)({},r(a,n)),a)})}else o=[function(t,n){var o;return null===(o=e.dealWithCustomData)||void 0===o?void 0:o.call(e,n.data||{},t)}];return Object(T.c)(t,T.e.apply(void 0,Object(D.a)(o)))},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=jn.bind(null,e);return t&&vn(t)?Object.entries(t).reduce((function(e,t){var o=Object(a.a)(t,2),i=o[0],r=o[1];return e[i]=n(r),e}),{}):{}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=jn.bind(null,e),o=n(Ge.a),a=n((function(e){var t=e.id,n=Object(s.a)(e,fn);return Object(pe.jsx)("div",{id:t,children:Object(pe.jsx)(gt.a,Object(i.a)({},n))})}),(function(e,n){var o=t+"-"+n.address.entire;return{options:n.dataSource,id:o,getPopupContainer:function(){return document.getElementById(o)}}})),r=n((function(e){e.correctionNumber;var t=Object(s.a)(e,pn);return Object(pe.jsx)(It.a,Object(i.a)({},t))}),(function(e){var t=e.correctionNumber,n={className:"input-number-handler-wrap-contorl"};return t?Object(i.a)(Object(i.a)({},n),{},{formatter:function(e){return+e-t},parser:function(e){return+e+t}}):n})),l=n(sn,(function(e,t){return e.isCompose&&{options:t.dataSource}})),c=n(dn.a,{value:"checked"},(function(e,t){return e.isCompose?{}:{composeOpts:t.dataSource,checkedOpts:e.value}})),u=n(mn),d=n(tn),f=Object(T.c)(Gt),p=Object(T.c)(Ht);return{Input:o,TextArea:u,Select:a,InputNumber:r,Radio:l,Checkbox:c,FormGroup:f,RangeSetter:d,SideLine:p,FormItem:xn}},On=(n(428),["expandFields","layout","scope"]),gn=["splitDownKeys"],yn=E.i.ref(0),Fn=E.i.ref(0),En=function(e){e.validate().catch((function(e){Object(Yt.a)(document.getElementById(e[0].address),{scrollMode:"if-needed",block:"nearest",inline:"nearest",behavior:"smooth"})}))},Dn=function(){return Object(pe.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u7684\u7ec4\u4ef6"})},Cn=r.memo((function(e){var t=e.createSchemaFieldParams,n=e.selectedFieldId,o=e.fieldType,i=e.fieldsMap,l=e.NoData,c=void 0===l?Dn:l,s=e.changeField,u=e.formDesignId,d=i[n]||{},f=J[u],p=r.useState({form:{},selectedFieldId:n}),m=Object(a.a)(p,1)[0],v=function(e,t,n,o){var i=t[e]||{},l=null===i||void 0===i?void 0:i.type,c=r.useState([{type:"object",properties:{}},null]),s=Object(a.a)(c,2),u=s[0],d=s[1],f=r.useState({selectedFieldId:null}),p=Object(a.a)(f,1)[0],m=r.useCallback((function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!p.selectedFieldId||!t[p.selectedFieldId])return{type:"object",properties:{}};var i=n.recoverField(p.formAction.values);return z(n.fieldSetterTemplate[e],(function(e,t,a){if(t.type||t["x-component"]){var r;o.push(a.concat(e).toString());var l={componentProps:t["x-component-props"],enum:t.enum,visible:t["x-visible"]},c=null===(r=n.manualContorlSchema)||void 0===r?void 0:r.call(n,e,l,i);c&&c!==l&&(c.enum&&Array.isArray(c.enum)&&(t.enum=c.enum),c.componentProps&&(t["x-component-props"]=c.componentProps),"boolean"===typeof c.visible&&(t["x-visible"]=c.visible))}}))}),[]),v=r.useCallback((function(e,t){return Object(w.b)({initialValues:e,validateFirst:!0,effects:function(){Object(w.p)((function(e){t.validateWithScrollSign.value===p.selectedFieldId&&(t.validateWithScrollSign.value="",En(e))})),Object(w.g)("*",(function(e){t.onFieldChange(e.props.name,e.value)})),Object(w.o)((function(e){o(p.selectedFieldId,e.values)}))}})}),[o]);return r.useEffect((function(){n&&Object(E.k)((function(){return n.resetSetterPaneSchema.value}),(function(){var e=[],t=m(p.type,p.supInfo,e);p.formAction.setFormState((function(n){e.forEach((function(e){delete n.fields[e]})),d([t,p.formAction])}))}),{fireImmediately:!1})}),[n]),r.useEffect((function(){if(n){p.selectedFieldId=e,p.type=l,p.supInfo=n;var t=v(i,n);p.formAction=t;var o=m(l,n);d([o,t])}}),[e,l,n]),u}(n,i,f,s),b=Object(a.a)(v,2),x=b[0],j=b[1],h=r.useMemo((function(){return Object.assign(t.scope,function(e){var t={};return{rangeSetterEeactRangeErrorMsg:on,statusTypeChangeEffect:bn.bind(null,t),statusInfo:t}}()),t.scope.$published=d.published||!1,Object(T.d)(t)}),[t,x]);return r.useEffect((function(){m.form=j,m.selectedFieldId=n}),[j]),r.useEffect((function(){f&&(Object(E.k)((function(){return f.validateWithScrollSign.value}),(function(e){e===m.selectedFieldId&&(f.validateWithScrollSign.value="",En(m.form))})),Object(E.k)((function(){return f.resetSetterPaneValue.value}),(function(e,t){var n;null!==(n=m.form)&&void 0!==n&&n.id&&m.form.setValues(i[m.selectedFieldId],"overwrite")}),{fireImmediately:!1}))}),[f]),Object(pe.jsx)(pe.Fragment,{children:o&&j?Object(pe.jsx)(T.a,{form:j,children:Object(pe.jsx)(h,{schema:x})}):Object(pe.jsx)(c,{})})}),(function(e,t){return e.selectedFieldId===t.selectedFieldId&&e.fieldType===t.fieldType&&e.changeField===t.changeField&&e.createSchemaFieldParams===t.createSchemaFieldParams})),Sn=r.createContext({labelCol:8,wrapperCol:16,span:24}),wn=function(e){var t,n=e.expandFields,o=void 0===n?{}:n,a=e.layout,l=void 0===a?{}:a,c=e.scope,u=Object(s.a)(e,On),d=r.useContext(ye).formDesignPerfixCls,f=r.useContext(Fe),p=f.selectedFieldId,m=f.fieldsMap,v=f.formDesignId,b=f.changeField,x=J[v],j=r.useMemo((function(){var e={components:Object(i.a)(Object(i.a)({},In(x,d)),hn(x,o)),scope:{typeEffect:function(e){var t=e.value,n=e.form.values||{},o=n.title,a=n.description,r=n.inheritCode,l=n.tips,c=n.isNew,u=n.id,d=n.parId,f="boolean"===typeof c?{isNew:c}:{},p=(x.fieldInfoTemplate||{})[t],m=(p.splitDownKeys,Object(s.a)(p,gn)),v=Object(i.a)(Object(i.a)(Object(i.a)({},f),m),{},{title:o,description:a,inheritCode:r,tips:l,id:u,parId:d});b("",v,!0)},customScope:c}};return J.changeSupInfo(v,{createSchemaFieldParams:e,resetSetterPaneSchema:yn,resetSetterPaneValue:Fn}),e}),[o,c,x]);r.useEffect((function(){Object(w.q)({customFieldsRules:function(e,t,n){var o,i,a,r=null===(o=x.recoverField)||void 0===o?void 0:o.call(x,n.form.values);return null===(i=x.customFieldsRules)||void 0===i?void 0:i.call(x,r,null===n||void 0===n||null===(a=n.props)||void 0===a?void 0:a.name,e)}})}),[x]);var h=r.useMemo((function(){return Object.assign({labelCol:8,wrapperCol:16,span:24},l)}),[l]),I=null===(t=m[p||""])||void 0===t?void 0:t.type;return Object(pe.jsx)(Sn.Provider,{value:h,children:Object(pe.jsx)(Cn,Object(i.a)(Object(i.a)({},u),{},{formDesignId:v,selectedFieldId:p||"",fieldsMap:m,fieldType:I,createSchemaFieldParams:j,changeField:b}))})},Tn=n(447),Pn=n(437),Rn=n(446),An={position:"fixed",pointerEvents:"none",zIndex:-1,left:0,top:0,height:"0px",visibility:"hidden"};var Nn=function(e){var t=e.formDesignId,n=e.fieldsMap,o=e.formDesignPerfixCls,r=J[t]||{},c=r.dndMaskLayerTemplates,s=r.CoustomPerView,u=Object(Rn.a)((function(e){return{dragItem:e.getItem(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}})),d=u.isDragging,f=u.dragItem,p=u.currentOffset,m=u.clientOffset,v=l.a.useMemo((function(){if(null!==f&&void 0!==f&&f.id){var e=n[f.id],t=e.type,o=e.title,a=c[t]||{},r=a.id,l=a.iconClass,s=Object(i.a)(Object(i.a)({},f),{},{uniquelySign:t,fieldName:o,iconClass:l});return[Object(i.a)(Object(i.a)({},s),{},{dragId:r}),s]}if(null!==f&&void 0!==f&&f.uniquelySign){var u=c[null===f||void 0===f?void 0:f.uniquelySign],d=u.iconClass,p=u.id,m=u.name,v=Object(i.a)(Object(i.a)({},f),{},{iconClass:d,fieldName:m});return[Object(i.a)(Object(i.a)({},v),{},{dragId:p}),v]}return[f,f]}),[f,n,c]),b=Object(a.a)(v,2),x=b[0],j=b[1],h=l.a.useState({contentHeight:40,contentWidth:0}),I=Object(a.a)(h,1)[0];l.a.useEffect((function(){if(x){var e,t,n=x.dragId||(null===(e=Object.values(c)[0])||void 0===e?void 0:e.id),o=null===(t=document.getElementById(n))||void 0===t?void 0:t.offsetWidth;I.contentWidth=o||200}}),[x]);var O=function(e,t,n,o){if(n.contentHeight,n.contentWidth,!e||!t)return{};var i=e.x,a=e.y,r=t.x,l=t.y,c={background:"#fff",position:"relative",left:"".concat(i,"px"),top:"".concat(a,"px")};return o&&Object.assign(c,{transform:"translate(-50%, -50%)",left:"".concat(r,"px"),top:"".concat(l,"px")}),c}(p,m,I,null===x||void 0===x?void 0:x.id);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("div",{style:d&&null!==x&&void 0!==x&&x.uniquelySign?Object(i.a)(Object(i.a)({},An),{},{zIndex:999,visibility:"visible"}):An,children:Object(pe.jsx)("div",{style:O,children:s?Object(pe.jsx)(s,Object(i.a)({},j)):Object(pe.jsx)("div",{className:"".concat(o,"-drag-perview"),style:{width:I.contentWidth,height:I.contentHeight},children:Object(pe.jsx)("div",{className:"".concat(o,"-single-widget-text"),children:null===x||void 0===x?void 0:x.fieldName})})})}),Object(pe.jsx)("div",{id:"".concat(o,"-faker-perview"),style:{position:"fixed",top:"-1000px"},children:"\xa0"})]})},Vn=(n(429),r.forwardRef((function(e,t){var n=r.useContext(ye),o=r.useContext(Fe),i=r.useContext(Ee),l=r.useMemo((function(){var e;return null===(e=J[o.formDesignId])||void 0===e?void 0:e.mounted}),[o.formDesignId]);return r.useImperativeHandle(t,(function(){var e=J[o.formDesignId]||{},t=e.recoverField,n=e.resetSetterPaneSchema,r=e.resetSetterPaneValue,l=function(t){var n="";return t.catch((function(e){var t=Object.entries(e[0]),o=Object(a.a)(t,1),i=Object(a.a)(o[0],1)[0];throw n=i,e})).finally((function(){var t;n&&(null===(t=i.selectField)||void 0===t||t.call(i,n),e.validateWithScrollSign.value=n)}))};return{validate:function(){return l(_(o,e))},submit:function(){return l(function(e,t){return _(e,t,!0).then((function(n){var o=e.outerFieldPostions,i=e.nestedFieldPostions;return function e(o){return o.reduce((function(o,a){var r=a.id,l=a.visible?t.recoverField(n[r]):n[r];return i[r]&&(l.items=e(i[r])),o.push(l),o}),[])}(o)}))}(o,e))},getFieldsMap:K.bind(null,o,t),setSelectFieldId:i.selectField,getSelectFieldId:function(){return o.selectedFieldId},getSelectField:function(){return t(o.fieldsMap[o.selectedFieldId||""])},deleteField:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[e,null,null];if("string"===typeof e){var a,r=(null===(a=o.fieldsMap[e])||void 0===a?void 0:a.parId)||null;n[1]=r}return i.deleteField.apply(i,n.concat([null,t]))},addField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.selectedFieldId,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={type:m,uniquelySign:e},r=o.fieldsMap[t||""],l={contentFieldId:null,dropIndex:null,id:"",type:"BASE"};if(r){var c=r.parId,s=c?o.nestedFieldPostions[c]||[]:o.outerFieldPostions,u=s.findIndex((function(e){return e.id===t}));l={contentFieldId:c,dropIndex:u=u>-1?u+1:s.length,id:t,type:"BASE"}}return i.placeField(l,a,n)},changeFieldInfo:function(t,n,i){if(t){var a,l=o.outerFieldPostions,c=o.nestedFieldPostions,s=null===(a=o.fieldsMap[t])||void 0===a?void 0:a.parId;n=((s?c[s]:l).filter((function(e){return e.id===t}))[0]||{}).visible?e.transformField(n):n}o.changeField(t,n,i||!1),t&&t!==o.selectedFieldId||(r.value=r.value+1)},resetSetterPane:function(){r.value=r.value+1,n.value=n.value+1}}}),[o,i]),Object(pe.jsxs)(Tn.a,{backend:Pn.a,children:[Object(pe.jsx)("div",{className:p()(n.formDesignPerfixCls,e.className),style:e.style,children:l&&e.children}),Object(pe.jsx)(Nn,{formDesignPerfixCls:n.formDesignPerfixCls,formDesignId:o.formDesignId,fieldsMap:o.fieldsMap})]})}))),Mn=De(r.memo(Vn)),kn=n(451),Ln=n(450),$n=n(452),qn=l.a.createContext({}),Yn=l.a.createContext({}),Bn=n(461),Wn=Object(Bn.a)({scriptUrl:"//at.alicdn.com/t/font_3381042_a6bd1m4mp6u.js"}),Gn=n(453),Hn=n(439),zn=["children","sign"],Xn=l.a.memo((function(e){var t=e.onChange,n=e.dataSource,o=e.size,r=e.buttonSize,c=l.a.useState(0),u=Object(a.a)(c,2),d=u[0],f=u[1],p=function(e,n){f(e),null===t||void 0===t||t(n)};return Object(pe.jsx)(Gn.b,{size:o||0,children:n.map((function(e,t){var n=e.children,o=e.sign,a=Object(s.a)(e,zn);return Object(pe.jsx)(Hn.a,Object(i.a)(Object(i.a)({size:r},a),{},{style:t===d?{cursor:"default"}:{},disabled:t===d,onClick:p.bind(null,t,o),children:n}),o)}))})})),Kn=function(e){var t=e.onChange,n=l.a.useContext(qn).prefix;return Object(pe.jsx)("div",{className:"flex ".concat(n,"-content-header"),children:Object(pe.jsx)(Xn,{buttonSize:"small",dataSource:[{children:Object(pe.jsx)(Wn,{type:"icon-design"}),sign:"design"},{children:Object(pe.jsx)(Wn,{type:"icon-json"}),sign:"json"}],onChange:t})})},_n=kn.a.Content,Un=kn.a.Sider,Jn=Ln.a.TextArea,Qn={CustomDataSourceSetter:Ln.a,AssociateDataSourceSetter:function(){return"AssociateDataSourceSetter"},NonEditableInfoSetter:function(e){return Object(pe.jsx)($n.a,Object(i.a)({options:[{key:"1",value:"1"},{key:"2",value:"2"}]},e))}},Zn=function(e){var t=e.dataSource;return Object(pe.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"8px 16px"},children:t.map((function(e){return Object(pe.jsx)(Pe,{uniquelySign:e.uniquelySign,info:e,style:{marginBottom:"8px"}},e.uniquelySign)}))})},eo=function(e,t){switch(t.type){case"json":return Object(i.a)(Object(i.a)({},e),{},{showSetterPane:!1,showSimulatorWrap:!1,json:t.json});case"design":return Object(i.a)(Object(i.a)({},e),{},{showSetterPane:!0,showSimulatorWrap:!0});default:return e}},to={showSimulatorWrap:!0,showSetterPane:!0,json:{}},no=function(e){var t=e.dataSource,n=l.a.useContext(Yn).formDesignRef,o=l.a.useContext(qn).prefix,r=l.a.useReducer(eo,Object(i.a)({},to)),c=Object(a.a)(r,2),s=c[0],d=s.showSetterPane,f=s.showSimulatorWrap,p=s.json,m=c[1],v=l.a.useCallback((function(e){("json"===e?n.current.submit():Promise.resolve()).then((function(t){m(Object(u.a)({type:e},e,t))}))}),[]);return Object(pe.jsxs)(kn.a,{style:{height:"100%"},children:[Object(pe.jsx)(Un,{theme:"light",width:300,children:Object(pe.jsx)(Zn,{dataSource:t})}),Object(pe.jsxs)(_n,{className:"flex ".concat(o,"-content-main"),children:[Object(pe.jsx)(Kn,{onChange:v}),Object(pe.jsxs)("div",{className:"".concat(o,"-operation-content"),children:[f&&Object(pe.jsx)(qt,{}),!f&&Object(pe.jsx)("div",{className:"".concat(o,"-json-show"),children:Object(pe.jsx)(Jn,{className:"".concat(o,"-json-show-main"),value:JSON.stringify(p,void 0,"\t"),bordered:!1,autoSize:!0})})]})]}),d&&Object(pe.jsx)(Un,{theme:"light",width:360,style:{padding:"8px 16px",height:"100%",overflow:"overlay"},children:Object(pe.jsx)(wn,{expandFields:Qn})})]})},oo=(n(430),[{TEXT:n(431)},{TEXTAREA:n(432)},{DATE:n(433)},{NUMBER:n(434)},{RADIO:n(435)}]),io=[{name:"\u6587\u672c",uniquelySign:"TEXT"},{name:"\u6587\u672c\u57df",uniquelySign:"TEXTAREA"},{name:"\u65e5\u671f",uniquelySign:"DATE"},{name:"\u6570\u503c",uniquelySign:"NUMBER"},{name:"\u5355\u9009",uniquelySign:"RADIO"}],ao=function(){var e=r.useRef({}),t=r.useState([]),n=Object(a.a)(t,2),o=n[0],l=(n[1],r.useState([])),s=Object(a.a)(l,2),u=s[0],d=s[1];r.useEffect((function(){d(oo)}),[]);return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsx)(kn.a,{style:{height:"100%",borderBottom:"1px solid #d9d9d9"},children:Object(pe.jsx)(Yn.Provider,{value:{formDesignRef:e},children:Object(pe.jsx)(Mn,{templates:u,style:{flex:1,overflow:"hidden"},ref:e,formVo:o,createInnerFieldInfo:function(e){var t=Object(c.uniqueId)("A-".concat(Math.random().toString(36).slice(-8),"-"));return Object(i.a)(Object(i.a)({},e),{},{inheritCode:t})},createCopyFieldInfo:function(e){var t=Object(c.uniqueId)("a-".concat(Math.random().toString(36).slice(-8),"-"));return Object(i.a)(Object(i.a)({},e),{},{inheritCode:t})},fieldKey:"inheritCode",children:Object(pe.jsx)(no,{dataSource:io})})})})})},ro={prefix:"custom-form"};t.default=function(){return Object(pe.jsx)(qn.Provider,{value:ro,children:Object(pe.jsx)(ao,{})})}}}]);
//# sourceMappingURL=4.2cb2a39c.chunk.js.map